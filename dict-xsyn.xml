<sect1 id="dict-xsyn">
 <title>dict_xsyn</title>
 
 <indexterm zone="dict-xsyn">
  <primary>dict_xsyn</primary>
 </indexterm>

 <para>
  Le module <filename>dict_xsyn</filename> (<foreignphrase>Extended Synonym
  Dictionary</foreignphrase>, autrement dit le dictionnaire étendu de
  synonymes) est un exemple d'un modèle de dictionnaire pour la recherche
  plein texte. Ce type de dictionnaire remplace des mots avec un ensemble
  de synonymes, ce qui rend possible la recherche d'un mot en utilisant
  tous ses synonymes.
 </para>

 <sect2>
  <title>Configuration</title>
  <para>
   Un dictionnaire <literal>dict_xsyn</literal> accepte les options
   suivantes&nbsp;:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     si <literal>keeporig</literal> vaut <literal>true</literal> (la valeur
     par défaut), le mot original est inclus dans la recherche. Dans le cas
     contraire, seuls les synonymes sont pris en compte.
    </para>
   </listitem>
   <listitem>
    <para>
     <literal>rules</literal> est le nom de base du fichier contenant la liste
     des synonymes. Ce fichier doit être stocké dans
     <filename>$SHAREDIR/tsearch_data/</filename> (où <literal>$SHAREDIR</literal> est le répertoire des données partagées de
     la distribution <productname>PostgreSQL</productname>).
     Son nom doit se terminer en <literal>.rules</literal> (cette extension
     n'est pas à inclure dans le paramètre <literal>rules</literal>).
    </para>
   </listitem>
  </itemizedlist>
  <para>
   Le fichier rules a le format suivant&nbsp;:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     Chaque ligne représente une groupe de synonymes pour un mot simple qui
     est donné en premier sur la ligne. Les synonymes sont séparés par
     un espace blanc&nbsp;:
    </para>
    <programlisting>
mot syn1 syn2 syn3
    </programlisting>
   </listitem>
   <listitem>
    <para>
     Un signe dièse (<literal>#</literal>) est un délimiteur de commentaires. Il peut
     apparaître dans la ligne. Le reste de la ligne est ignoré.
    </para>
   </listitem>
  </itemizedlist>

  <para>
   Cherchez dans <filename>xsyn_sample.rules</filename> qui est installé dans
   <filename>$SHAREDIR/tsearch_data/</filename> pour un exemple.
  </para>
 </sect2>

 <sect2>
  <title>Utilisation</title>

  <para>
   L'exécution du script d'installation crée un modèle
   <literal>xsyn_template</literal> de recherche plein texte et un dictionnaire
   <literal>xsyn</literal> basé sur le modèle, avec des paramètres par défaut.
   Vous pouvez modifier les paramètres, par exemple&nbsp;:

<programlisting>
mydb# ALTER TEXT SEARCH DICTIONARY xsyn (RULES='my_rules', KEEPORIG=false);
ALTER TEXT SEARCH DICTIONARY
</programlisting>

   ou créer de nouveaux dictionnaires basés sur le modèle.
  </para>

  <para>
   Pour tester le dictionnaire, vous pouvez essayer&nbsp;:

<programlisting>
mydb=# SELECT ts_lexize('xsyn', 'word');
      ts_lexize
-----------------------
 {word,syn1,syn2,syn3}
</programlisting>

   mais une utilisation réelle impliquera son ajout dans une configuration de
   recherche plein texte comme décrit dans <xref linkend="textsearch"/>. Cela
   pourrait ressembler à ceci&nbsp;:

<programlisting>
ALTER TEXT SEARCH CONFIGURATION english
    ALTER MAPPING FOR word, asciiword WITH xsyn, english_stem;
</programlisting>

  </para>
 </sect2>

</sect1>
