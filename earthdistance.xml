<sect1 id="earthdistance">
 <title>earthdistance</title>
 
 <indexterm zone="earthdistance">
  <primary>earthdistance</primary>
 </indexterm>

 <para>
  Ce module contient deux approches différentes dans le calcul
  de distances sur la surface de la Terre. La première dépend du module
  contrib cube (qui doit être installé avant earthdistance). La seconde
  est basée sur le type de données point et utilise latitude et longitude
  pour les coordonnées. Le script d'installation rend les fonctions
  définies exécutables par tout le monde.
 </para>
 <para>
  Un modèle sphérique de la Terre est utilisé.
 </para>
 <para>
  Les données sont stockées dans des cubes (dont les coins se touchent) en
  utilisant trois coordonnées représentant la distance à partir du centre de
  la Terre.
 </para>
 <para>
  Le radius de la Terre est obtenu à partir de la fonction earth(). Il est
  donné en mètre. Vous pouvez la modifier pour qu'elle utilise d'autres
  unités ou pour utiliser une valeur différente du radius que vous trouvez
  plus appropriée.
 </para>
 <para>
  Ce package a aussi des applications avec les bases de données astronomiques.
  Les astronautes voudront probablement modifier earth() pour qu'elle
  renvoie un radius de 180/pi() de façon à ce que les distances soient en
  degrés.
 </para>
 <para>
  Les fonctions sont fournies pour permettre en saisie en latitude et
  longitude (en degrés), en affichage en latitude et longitude, pour calculer
  la distance en cercle entre deux points et pour spécifier facilement une
  boîte intégrante pour les recherches d'index.
 </para>
 <para>
  Les fonctions sont toutes des fonctions SQL. Si vous voulez que ces
  fonctions soient exécutables par d'autres personnes, vous devrez aussi
  rendre les fonctions cube référencées exécutables par ces personnes.
  cube(text), cube(float8), cube(cube,float8), cube_distance(cube,cube),
  cube_ll_coord(cube,int) et cube_enlarge(cube,float8,int) sont utilisées
  indirectement par les fonctions EarthDistance. is_point(cube) et
  cube_dim(cube) sont utilisées dans les contraintes pour les données du
  domaine earth. cube_ur_coord(cube,int) est utilisé dans les tests de
  régression et pourrait être utile pour rechercher les coordonnées d'une
  boîte englobante dans les applications utilisateur.
 </para>
 <para>
  Un domaine du type cube nommé earth est défini. Des contraintes sont
  définies pour s'assurer que le cube est un point, qu'il n'a pas plus de
  trois dimensions et qu'il est très proche de la surface d'une sphère
  centrée sur l'origine avec le radius de la Terre.
 </para>
 <para> 
  Les fonctions suivantes sont fournies&nbsp;:
 </para>

 <table id="earthdistance-functions">
  <title>Fonctions EarthDistance</title>
  <tgroup cols="2">
   <tbody>
    <row>
     <entry><literal>earth()</literal></entry>
     <entry>renvoie le radius de la Terre en mètres.</entry>
    </row>
    <row>
     <entry><literal>sec_to_gc(float8)</literal></entry>
     <entry>convertie la distance en ligne directe normale (secant) entre
      deux points sur la surface de la Terre par le grand cercle entre eux
      deux.
     </entry>
    </row>
    <row>
     <entry><literal>gc_to_sec(float8)</literal></entry>
     <entry>convertie la distance entre deux points sur la surface de
      la Terre en une ligne directe normale entre eux deux (secant).
     </entry>
    </row>
    <row>
     <entry><literal>ll_to_earth(float8, float8)</literal></entry>
     <entry>renvoie l'emplacement d'un point sur la surface de la Terre
      suivant sa latitude (argument 1) et sa longitude (argument 2) en degrés.
     </entry>
    </row>
    <row>
     <entry><literal>latitude(earth)</literal></entry>
     <entry>renvoie la latitude en degrés d'un point sur la surface de la
      Terre.
     </entry>
    </row>
    <row>
     <entry><literal>longitude(earth)</literal></entry>
     <entry>renvoie la longitude en degrés d'un point sur la surface de la
      Terre.
     </entry>
    </row>
    <row>
     <entry><literal>earth_distance(earth, earth)</literal></entry>
     <entry>renvoie la distance entre deux points sur la surface de la
      Terre.
     </entry>
    </row>
    <row>
     <entry><literal>earth_box(earth, float8)</literal></entry>
     <entry>renvoie une boîte convenable pour une recherche par index
      en utilisant l'opérateur cube @> pour les points à l'intérieur d'une
      distance en cercle d'un emplacement. Certains points de cette boîte
      sont plus loins que la distance spécifiée à partir d'un emplacement donc
      un deuxième test utilisant earth_distance doit être fait au même
      moment.
     </entry>
    </row>
    <row>
     <entry><literal><![CDATA[<@>]]></literal> operator</entry>
     <entry>donne la distance en <quote>statute miles</quote> entre deux points
      sur la surface de la Terre. Les coordonnées sont en degrés. Les points
      sont pris en (longitude, latitude) et pas vice-versa car la longitude
      est plus proche.
     </entry>
    </row>
   </tbody>
  </tgroup>
 </table>
 <para>
  One advantage of using cube representation over a point using latitude and
  longitude for coordinates, is that you don't have to worry about special
  conditions at +/- 180 degrees of longitude or near the poles.
 </para>
</sect1>

