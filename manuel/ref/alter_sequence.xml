<?xml version="1.0" encoding="UTF-8"?>
<!--
$Header: /var/lib/cvs/pgsql-fr/sgml/ref/alter_sequence.sgml,v 1.9 2005/09/22 18:34:45 guillaume Exp $
PostgreSQL documentation
-->
<!-- SAS 20060616 -->

<refentry id="sql-altersequence">
 <refmeta>
  <refentrytitle id="sql-altersequence-title">ALTER SEQUENCE</refentrytitle>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>
   ALTER SEQUENCE
  </refname>
  <refpurpose>
   Modifier la définition d'un générateur de séquence
  </refpurpose>
 </refnamediv> 

 <refsynopsisdiv>
  <synopsis>ALTER SEQUENCE <replaceable class="parameter">nom</replaceable> [ INCREMENT [ BY ] <replaceable class="parameter">increment</replaceable> ]
    [ MINVALUE <replaceable class="parameter">valeurmin</replaceable> | NO MINVALUE ] [ MAXVALUE <replaceable class="parameter">valeurmax</replaceable> | NO MAXVALUE ]
    [ RESTART [ WITH ] <replaceable class="parameter">debut</replaceable> ] [ CACHE <replaceable class="parameter">cache</replaceable> ] [ [ NO ] CYCLE ]
ALTER SEQUENCE <replaceable class="parameter">nom</replaceable> SET SCHEMA <replaceable class="parameter">nouveau_schema</replaceable>
  </synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>
  <indexterm zone="sql-altersequence">
   <primary>ALTER SEQUENCE</primary>
  </indexterm>

  <para>
   <command>ALTER SEQUENCE</command> modifie les paramètres d'un générateur de
   séquence. Tout paramètre non précisé dans la commande <command>ALTER SEQUENCE</command>
   conserve sa valeur précédente.
  </para>

  <para>
   Seul le propriétaire de la séquence peut utiliser 
   <command>ALTER SEQUENCE</command>. Pour modifier le schéma de la séquence, il faut posséder
   le droit <literal>CREATE</literal> sur le nouveau schéma.
  </para>
 </refsect1>

 <refsect1>
  <title>Paramètres</title>

   <para>
    <variablelist>
     <varlistentry>
      <term><replaceable class="parameter">nom</replaceable></term>
      <listitem>
       <para>
        Le nom de la séquence à modifier (éventuellement qualifié du nom du schéma).
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">increment</replaceable></term>
      <listitem>
       <para>
        La clause <literal>INCREMENT BY <replaceable class="parameter">increment</replaceable></literal>
	est optionnelle. Une
        valeur positive crée une séquence croissante, une valeur négative une
        séquence décroissante. Lorsque cette clause n'est pas spécifiée, la valeur de l'ancien incrément
        est conservée.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">valeurmin</replaceable></term>
      <term><literal>NO MINVALUE</literal></term>
      <listitem>
       <para>
        La clause optionnelle <literal>MINVALUE <replaceable class="parameter">valeurmin</replaceable></literal>,
	détermine la valeur minimale de la séquence. Si <literal>NO MINVALUE</literal>
	est utilisé, les valeurs par défaut,
        1 et -2<superscript>63</superscript>-1 sont utilisées respectivement pour les séquences croissantes et
        decroissantes. Si aucune option n'est précisée, la valeur
        minimale courante est conservée.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">valeurmax</replaceable></term>
      <term><literal>NO MAXVALUE</literal></term>
      <listitem>
       <para>
        La clause optionnelle <literal>MAXVALUE <replaceable class="parameter">valeurmax</replaceable></literal>
	détermine la valeur maximale de la séquence. Si <literal>NO MAXVALUE</literal> est utilisé,
	les valeurs par défaut
        2<superscript>63</superscript>-1 et -1 sont utilisées respectivement pour les séquences
        croissantes et décroissantes. Si aucune option n'est
        précisée, la valeur maximale courante est conservée.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">debut</replaceable></term>
      <listitem>
       <para>
        La clause optionnelle <literal>RESTART WITH <replaceable class="parameter">start</replaceable></literal> modifie la
        valeur courante de la séquence.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">cache</replaceable></term>
      <listitem>
       <para>
        La clause <literal>CACHE <replaceable class="parameter">cache</replaceable></literal> active la préallocation
        des numéros de séquences et leur stockage en mémoire pour en accélerer l'accès. 1 est la valeur minimale
	(une seule valeur est engendrée à la
        fois, soit pas de cache). Lorsque la clause n'est pas spécifiée, l'ancienne valeur est conservée.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>CYCLE</literal></term>
      <listitem>
       <para>
        Le mot clé optionnel <literal>CYCLE</literal> est utilisé
        pour autoriser la séquence à boucler lorsque <replaceable class="parameter">valeurmax</replaceable>
	ou <replaceable class="parameter">valeurmin</replaceable> est atteint par,
        respectivement, une séquence croissante ou décroissante. Lorsque la limite est
        atteinte, le prochain numéro engendré est, respectivement,
	<replaceable class="parameter">valeurmin</replaceable> ou
	<replaceable class="parameter">valeurmax</replaceable>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>NO CYCLE</literal></term>
      <listitem>
       <para>
        Si le mot clé optionnel <literal>NO CYCLE</literal> est spécifié, tout
        appel à <function>nextval</function> alors que la séquence a atteint
	<!-- SAS 20060502 : Petite précision -->
        sa valeur maximale, dans le cas d'une séquence croissante, ou sa valeur minimale dans
	le cas contraire, retourne une erreur. Lorsque ni <literal>CYCLE</literal> ni
        <literal>NO CYCLE</literal> ne sont spécifiés, l'ancien comportement est préservé.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">nouveau_schema</replaceable></term>
      <listitem>
       <para>
        Le nouveau schéma de la séquence.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </para>
  </refsect1>

 <refsect1>
  <title>Exemples</title>

  <para>
   Redémarrer la séquence appelée <literal>serie</literal> à 105&nbsp;:
<programlisting>ALTER SEQUENCE serie RESTART WITH 105;
</programlisting>
  </para>
 </refsect1>

 <refsect1>
  <title>Notes</title>

  <para>
   Pour éviter de bloquer des transactions concurrentes lors de la demande de
   numéros issus de la même séquence, <command>ALTER SEQUENCE</command> n'est jamais
   annulé&nbsp;; les modifications prennent effet immédiatement et ne sont pas
   réversibles.
  </para>

  <para>
   <command>ALTER SEQUENCE</command> n'affecte pas immédiatement les
   résultats de <function>nextval</function> pour les sessions, à l'exception
   de la session courante, qui ont préalloué (caché) des valeurs de la séquence.
   Elles épuisent les valeurs en cache avant de prendre en compte les
   modifications sur les paramètres de la séquence. La session à l'origine de la
   commande est, quant à elle, immédiatement affectée.
  </para>

  <para>
   Certaines variantes d'<command>ALTER TABLE</command> peuvent aussi être
   utilisées avec les séquences. Ainsi, pour renommer une séquence, on peut utiliser
   <command>ALTER TABLE RENAME</command>.
  </para>
 </refsect1>


 <refsect1>
  <title>Compatibilité</title>

   <para>
    <command>ALTER SEQUENCE</command> est conforme au standard
    <acronym>SQL</acronym>, à l'exception de la variante <literal>SET SCHEMA</literal>
    qui est une extension <productname>PostgreSQL</productname>.
   </para>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:"/usr/lib/sgml/catalog"
sgml-local-ecat-files:nil
End:
-->
