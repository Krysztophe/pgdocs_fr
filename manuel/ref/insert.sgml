<!--
$Header: /var/lib/cvs/pgsql-fr/sgml/ref/insert.sgml,v 1.9 2005/06/07 20:38:00 guillaume Exp $
PostgreSQL documentation
-->

<refentry id="SQL-INSERT">
 <refmeta>
  <refentrytitle id="SQL-INSERT-TITLE">INSERT</refentrytitle>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>INSERT</refname>
  <refpurpose>insère de nouvelles lignes dans une table</refpurpose>
 </refnamediv>

 <indexterm zone="sql-insert">
  <primary>INSERT</primary>
 </indexterm>

 <refsynopsisdiv>
<synopsis>
INSERT INTO <replaceable class="PARAMETER">table</replaceable> [ ( <replaceable
class="PARAMETER">colonne</replaceable> [, ...] ) ]
    { DEFAULT VALUES | VALUES ( { <replaceable
class="PARAMETER">expression</replaceable> | DEFAULT } [, ...] ) | <replaceable
class="PARAMETER">requête</replaceable> }
</synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>

  <para>
   <command>INSERT</command> insère de nouvelles lignes dans une
   table. Il est possible d'insérer une ligne spécifiée par des 
   valeurs ou plusieurs lignes comme résultat d'une requête.
  </para>

  <para>
   Les noms des colonnes cibles peuvent être donnés dans un ordre quelconque. Si
   aucune liste de noms de colonnes n'est donnée, la valeur par défaut est
   toutes les colonnes de la table dans leur ordre de déclaration&nbsp;; ou les
   <replaceable>N</> premiers noms de colonnes si seulement <replaceable>N</>
   valeurs de colonnes sont fournies dans la clause <literal>VALUES</> ou dans
   la <replaceable>requête</>. Les valeurs fournies par la clause
   <literal>VALUES</> ou par la <replaceable>requête</> sont associées à la
   liste explicite ou implicite des colonnes de gauche à droite.
  </para>

  <para>
   Chaque colonne absente dans la liste de colonnes explicite ou implicite est
   remplie avec sa valeur par défaut déclarée s'il y en a une ou avec NULL s'il
   n'en a pas.
  </para>

  <para>
   Si l'expression pour chaque colonne n'est pas du bon type de données, une
   conversion automatique de type est tentée.
  </para>

  <para>
   Vous devez avoir le droit <literal>INSERT</literal> sur une table pour
   pouvoir y insérer des lignes. Si vous utilisez la clause <replaceable
   class="PARAMETER">requête</replaceable> pour insérer des lignes à partir
   d'une requête, vous avez aussi besoin d'avoir un droit
   <literal>SELECT</literal> sur toute table utilisée dans la requête.
  </para>
 </refsect1>

 <refsect1>
  <title>Paramètres</title>

  <variablelist>
   <varlistentry>
    <term><replaceable class="PARAMETER">table</replaceable></term>
    <listitem>
     <para>
      Le nom d'une table existante (pouvant être qualifié du nom du schéma).
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="PARAMETER">colonne</replaceable></term>
    <listitem>
     <para>
      Le nom d'une colonne dans <replaceable
      class="PARAMETER">table</replaceable>.
      Le nom de la colonne peut être qualifié avec un nom de sous-champ ou un
      indice de tableau, si nécessaire. (N'insérer que certains champs d'une
      colonne composite laisse les autres champs à NULL.)
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><literal>DEFAULT VALUES</literal></term>
    <listitem>
     <para>
      Toutes les colonnes auront leurs valeurs par défaut.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="PARAMETER">expression</replaceable></term>
    <listitem>
     <para>
      Une expression ou une valeur à affecter à la <replaceable
      class="PARAMETER">colonne</replaceable> correspondante.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><literal>DEFAULT</literal></term>
    <listitem>
     <para>
      La <replaceable class="PARAMETER">colonne</replaceable> correspondante
      sera remplie avec sa valeur par défaut.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="PARAMETER">requête</replaceable></term>
    <listitem>
     <para>
      Une requête (instruction <command>SELECT</command>) fournissant les
      lignes à insérer. Référez-vous à l'instruction <command>SELECT</command>
      pour une description de la syntaxe.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>

 <refsect1>
  <title>Sorties</title>

  <para>
   En cas de succès, une commande <command>INSERT</> renvoie un code de la forme
<screen>
INSERT <replaceable>oid</replaceable> 
 <replaceable class="parameter">nombre</replaceable>
</screen>
   Le <replaceable class="parameter">nombre</replaceable> correspond au nombre
   de lignes insérées. Si <replaceable class="parameter">nombre</replaceable>
   vaut exactement un et que la table cible contient des OID, alors <replaceable
   class="parameter">oid</replaceable> est l'<acronym>OID</acronym> affecté à la
   ligne insérée. Sinon, <replaceable class="parameter">oid</replaceable> vaut
   zéro.
  </para>
 </refsect1>

 <refsect1>
  <title>Exemples</title>

  <para>
   Insérer une seule ligne dans la table <literal>films</literal>&nbsp;:

<programlisting>
INSERT INTO films VALUES
    ('UA502', 'Bananas', 105, '1971-07-13', 'Comédie', '82 minutes');
</programlisting>
  </para>

  <para>
   Dans cet exemple, la colonne <literal>longueur</literal> est omise et, du
   coup, elle prend la valeur par défaut&nbsp;:

<programlisting>
INSERT INTO films (code, titre, did, date_prod, genre)
    VALUES ('T_601', 'Yojimbo', 106, '1961-06-16', 'Drame');
</programlisting>
  </para>

  <para>
   Cet exemple utilise la clause <literal>DEFAULT</literal> pour les
   colonnes date plutôt que de spécifier une valeur&nbsp;:

<programlisting>
INSERT INTO films VALUES
    ('UA502', 'Bananas', 105, DEFAULT, 'Comédie', '82 minutes');
INSERT INTO films (code, title, did, date_prod, kind)
    VALUES ('T_601', 'Yojimbo', 106, DEFAULT, 'Drame');
</programlisting>
  </para>

  <para>
   Pour insérer une ligne consistant uniquement en des valeurs par défaut&nbsp;:

<programlisting>
INSERT INTO films DEFAULT VALUES;
</programlisting>
  </para>

  <para>
   Cet exemple insère quelques lignes dans la table <literal>films</literal> à
   partir de la table <literal>tmp_films</literal> avec le même emplacement des
   colonnes&nbsp;:

<programlisting>
INSERT INTO films SELECT * FROM tmp_films WHERE date_prod &lt; '2004-05-07';
</programlisting>
  </para>

  <para>
   Cet exemple insére dans des colonnes de type tableau&nbsp;:

<programlisting>
-- Create an empty 3x3 gameboard for noughts-and-crosses
-- (these commands create the same board)
INSERT INTO tictactoe (game, board[1:3][1:3])
    VALUES (1,'{{"","",""},{"","",""},{"","",""}}');
INSERT INTO tictactoe (game, board)
    VALUES (2,'{{,,},{,,},{,,}}');
</programlisting>
  </para>
 </refsect1>

 <refsect1>
  <title>Compatibilité</title>

  <para>
   <command>INSERT</command> est totalement compatible avec le standard SQL. Le
   cas où une liste de noms de colonnes est omise, mais où toutes les colonnes
   ne sont pas remplies à partir des valeurs de la clause <literal>VALUES</> ou
   à partir de la <replaceable>requête</>, est interdit par le standard.
  </para>

  <para>
   Les limitations possibles de la clause <replaceable
   class="PARAMETER">requête</replaceable> sont documentées sous <xref
   linkend="sql-select" endterm="sql-select-title">.
  </para>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:"/usr/lib/sgml/catalog"
sgml-local-ecat-files:nil
End:
-->
