<?xml version="1.0" encoding="UTF-8"?>
<!--
$Header: /var/lib/cvs/pgsql-fr/sgml/ref/insert.sgml,v 1.9 2005/06/07 20:38:00 guillaume Exp $
PostgreSQL documentation
-->
<!-- SAS 20060622 : Relecture initiale -->

<refentry id="sql-insert">
 <refmeta>
  <refentrytitle id="sql-insert-title">INSERT</refentrytitle>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>INSERT</refname>
  <refpurpose>Insérer de nouvelles lignes dans une table</refpurpose>
 </refnamediv>

 <refsynopsisdiv>
<synopsis>INSERT INTO <replaceable class="parameter">table</replaceable> [ ( <replaceable
class="parameter">colonne</replaceable> [, ...] ) ]
    { DEFAULT VALUES | VALUES ( { <replaceable
class="parameter">expression</replaceable> | DEFAULT } [, ...] ) | <replaceable
class="parameter">requête</replaceable> }
</synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>
  <indexterm zone="sql-insert">
   <primary>INSERT</primary>
  </indexterm>


  <para>
   <command>INSERT</command> insère de nouvelles lignes dans une
   table. Il est possible d'insérer une ligne en précisant les valeurs
   des colonnes ou plusieurs lignes issues d'une requête.
  </para>

  <para>
   L'ordre des noms des colonnes n'a pas d'importance. Si
   aucune liste de noms de colonnes n'est donnée, 
   toutes les colonnes de la table sont utilisée dans l'ordre de leur déclaration (les
   <replaceable>N</replaceable> premiers noms de colonnes si seules <replaceable>N</replaceable>
   valeurs de colonnes sont fournies dans la clause <literal>VALUES</literal> ou dans
   la <replaceable>requête</replaceable>). Les valeurs fournies par la clause
   <literal>VALUES</literal> ou par la <replaceable>requête</replaceable> sont associées à la
   liste explicite ou implicite des colonnes de gauche à droite.
  </para>

  <para>
   Chaque colonne absente de la liste, implicite ou explicite, des colonnes se voit
   attribuer sa valeur par défaut, s'il y en a une, ou NULL dans le cas contraire.
  </para>

  <para>
   Un transtypage automatique est entrepris lorsque l'expression d'une colonne ne correspond
   pas au type de donnée déclaré.
  </para>

  <para>
   Le droit <literal>INSERT</literal> sur une table est requis pour
   pouvoir y insérer des lignes. Si la clause <replaceable class="parameter">requête</replaceable>
   est utilisée pour insérer des lignes, le droit <literal>SELECT</literal> sur toute table
   utilisée dans la requête est également requis.
  </para>
 </refsect1>

 <refsect1>
  <title>Paramètres</title>

  <variablelist>
   <varlistentry>
    <term><replaceable class="parameter">table</replaceable></term>
    <listitem>
     <para>
      Le nom de la table (éventuellement qualifié du nom du schéma).
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="parameter">colonne</replaceable></term>
    <listitem>
     <para>
      Le nom d'une colonne de <replaceable class="parameter">table</replaceable>.
      Le nom de la colonne peut être qualifié avec un nom de sous-champ ou un
      indice de tableau, si nécessaire. (N'insérer que certains champs d'une
      colonne composite laisse les autres champs à NULL.)
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><literal>DEFAULT VALUES</literal></term>
    <listitem>
     <para>
      Toutes les colonnes se voient attribuer leur valeur par défaut.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="parameter">expression</replaceable></term>
    <listitem>
     <para>
      Une expression ou une valeur à affecter à la
	  <replaceable class="parameter">colonne</replaceable> correspondante.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><literal>DEFAULT</literal></term>
    <listitem>
     <para>
      La <replaceable class="parameter">colonne</replaceable> correspondante
      se voit attribuer sa valeur par défaut.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="parameter">requête</replaceable></term>
    <listitem>
     <para>
      Une requête (instruction <command>SELECT</command>) dont le résultat fournit les
      lignes à insérer. La syntaxe complète de la commande est décrite dans la documentation de
	  l'instruction <command>SELECT</command>.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>

 <refsect1>
  <title>Sorties</title>

  <para>
   En cas de succès, la commande <command>INSERT</command> renvoie un code de la forme
<screen>INSERT <replaceable>oid</replaceable> <replaceable class="parameter">nombre</replaceable>
</screen>
   <replaceable class="parameter">nombre</replaceable> correspond au nombre
   de lignes insérées. Si <replaceable class="parameter">nombre</replaceable>
   vaut exactement un et que la table cible contient des OID, alors
   <replaceable class="parameter">oid</replaceable> est l'<acronym>OID</acronym> affecté à la
   ligne insérée. Sinon, <replaceable class="parameter">oid</replaceable> vaut
   zéro.
  </para>
 </refsect1>

 <refsect1>
  <title>Exemples</title>

  <para>
   Insérer une ligne dans la table <literal>films</literal>&nbsp;:

<programlisting>INSERT INTO films 
	VALUES ('UA502', 'Bananas', 105, '1971-07-13', 'Comédie', '82 minutes');
</programlisting>
  </para>

  <para>
   Dans l'exemple suivant, la colonne <literal>longueur</literal> est omise et
   prend donc sa valeur par défaut&nbsp;:

<programlisting>INSERT INTO films (code, titre, did, date_prod, genre)
    VALUES ('T_601', 'Yojimbo', 106, '1961-06-16', 'Drame');
</programlisting>
  </para>

  <para>
   L'exemple suivant utilise la clause <literal>DEFAULT</literal> pour les
   colonnes date plutôt qu'une valeur précise&nbsp;:

<programlisting>INSERT INTO films VALUES
    ('UA502', 'Bananas', 105, DEFAULT, 'Comédie', '82 minutes');
INSERT INTO films (code, title, did, date_prod, kind)
    VALUES ('T_601', 'Yojimbo', 106, DEFAULT, 'Drame');
</programlisting>
  </para>

  <para>
   Insérer une ligne constituée uniquement de valeurs par défaut&nbsp;:

<programlisting>INSERT INTO films DEFAULT VALUES;
</programlisting>
  </para>

  <para>
   Insérer dans la table <literal>films</literal> des lignes extraites de la table
   <literal>tmp_films</literal> (la disposition des colonnes est identique dans les deux tables)&nbsp;:

<programlisting>INSERT INTO films SELECT * FROM tmp_films WHERE date_prod &lt; '2004-05-07';
</programlisting>
  </para>

  <para>
   Insérer dans des colonnes de type tableau&nbsp;:

<programlisting>-- Create an empty 3x3 gameboard for noughts-and-crosses
-- (these commands create the same board)
INSERT INTO tictactoe (game, board[1:3][1:3])
    VALUES (1,'{{"","",""},{"","",""},{"","",""}}');
INSERT INTO tictactoe (game, board)
    VALUES (2,'{{,,},{,,},{,,}}');
</programlisting>
  </para>
 </refsect1>

 <refsect1>
  <title>Compatibilité</title>

  <para>
   <command>INSERT</command> est conforme au standard SQL. 
   Le standard n'autorise toutefois pas l'omission de la liste des noms de colonnes alors
   qu'une valeur n'est pas affectée à chaque colonne, que ce soit à l'aide de la clause 
   <literal>VALUES</literal> ou à partir de la <replaceable>requête</replaceable>.
  </para>

  <para>
   Les limitations possibles de la clause <replaceable class="parameter">requête</replaceable>
   sont documentées sous <xref linkend="sql-select" endterm="sql-select-title"/>.
  </para>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:"/usr/lib/sgml/catalog"
sgml-local-ecat-files:nil
End:
-->
