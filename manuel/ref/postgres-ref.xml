<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
$PostgreSQL: pgsql/doc/src/sgml/ref/postgres-ref.sgml,v 1.47 2006/06/18 15:38:36 petere Exp $
PostgreSQL documentation
-->

<refentry id="app-postgres">
 <refmeta>
  <refentrytitle><application>postgres</application></refentrytitle>
  <manvolnum>1</manvolnum>
  <refmiscinfo>Application</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>postgres</refname>
  <refpurpose>Serveur de bases de données <productname>PostgreSQL</productname></refpurpose>
 </refnamediv>

 <indexterm zone="app-postgres">
  <primary>postgres</primary>
 </indexterm>

 <refsynopsisdiv>
  <cmdsynopsis>
   <command>postgres</command>
   <arg rep="repeat"><replaceable>option</replaceable></arg>
  </cmdsynopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>

  <para>
   <command>postgres</command> est le serveur de bases de données
   <productname>PostgreSQL</productname>. Pour qu'une application cliente puisse
   accéder à une base de données, elle se connecte (soit via le réseau soit
   localement) à un processus <command>postgres</command> en cours d'exécution.
   L'instance <command>postgres</command> démarre ensuite un processus serveur
   séparé pour gérer la connexion.
  </para>

  <para>
   Une instance <command>postgres</command> gère toujours les données d'un
   seul cluster. Un cluster est un ensemble de bases de données stocké à un même
   emplacement dans le système de fichiers (le <quote>répertoire des
   données</quote>).
   Plus d'un processus <command>postgres</command> peut être en cours
   d'exécution sur un système à un moment donné, s'ils utilisent des répertoires
   différents et des ports de communication différents (voir ci-dessous). Quand
   <command>postgres</command> se lance, il a besoin de connaître l'emplacement
   du répertoire des données. Cet emplacement doit être indiquée par l'option
   <option>-D</option> ou par la variable d'environnement <envar>PGDATA</envar>&nbsp;;
   il n'y a pas de valeur par défaut. Typiquement, <option>-D</option> ou
   <envar>PGDATA</envar> pointe directement vers le répertoire des données créé
   par <application>initdb</application>. D'autres dispositions de fichiers
   possibles sont discutés dans <xref linkend="runtime-config-file-locations"/>.
   Un répertoire de données est créé avec <xref linkend="app-initdb"/>.
  </para>

  <para>
   Par défaut, <command>postgres</command> s'exécute en avant-plan et affiche
   ses messages dans le flux standard des erreurs. En pratique,
   <command>postgres</command> devrait être exécuté en tant que processus en
   arrière-plan, par exemple au lancement.
  </para>

  <para>
   La commande <command>postgres</command> peut aussi être appelé en mode
   mono-utilisateur. L'utilisation principal de ce mode est lors du
   <quote>bootstrap</quote> utilisé par <xref linkend="app-initdb"/>.
   Quelque fois, il est utilisé pour du débogage et de la récupération suite à
   un problème. Quand il est appelé en mode interactif à partir du shell,
   l'utilisateur peut saisir des requêtes et le résultat sera affiché à l'écran
   mais dans une forme qui est plus utile aux développeurs qu'aux utilisateurs.
   Mais noter qu'exécuter un serveur en mode mono-utilisateur n'est pas
   vraiment convenable pour déboguer le serveur car aucune communication
   inter-processus réaliste et aucun verrouillage n'interviennent. Quand vous
   exécutez un serveur en mode mono-utilisateur, la session ouverte par
   l'utilisateur sera configuré avec l'utilisateur d'identifiant 1. Cet
   utilisateur n'existe pas, donc un serveur en mode mono-utilisateur
   peut être utilisé pour récupérer manuellement après certains types
   de dommages accidentels dans les catalogues systèmes. Les pouvoirs
   implicites du superutilisateur son donnés à l'utilisateur d'ID 1
   dans le mode mono-utilisateurs.
  </para>
 </refsect1>

 <refsect1 id="app-postgres-options">
  <title>Options</title>

   <para>
    <command>postgres</command> accepte les arguments suivants en ligne de
    commande. Pour une discussion détaillée des options, consultez <xref
    linkend="runtime-config"/>. Vous pouvez éviter de saisir la plupart
    de ces options en les initialisant dans le fichier de configuration.
    Certaines options (sûres) peuvent aussi être configurées à partir du
    client en cours de connexion d'une façon dépendante de l'application,
    configuration qui ne sera appliquée qu'à cette session. Par exemple
    si la variable d'environnement <envar>PGOPTIONS</envar> est
    configurée, alors les clients basés sur <application>libpq</application>
    passeront cette chaîne au serveur qui les interprétera comme les options
    en ligne de commande de <command>postgres</command>.
   </para>

   <refsect2>
    <title>Général</title>
    
    <variablelist>
     <varlistentry>
      <term><option>-A 0|1</option></term>
      <listitem>
       <para>
        Active les vérifications d'assertion à l'exécution, donc une aide
	au débogage pour détecter les erreurs de programmation. Cette option est
	seulement disponible si les assertions on été activées lors de la
	compilation de <productname>PostgreSQL</productname>. Dans ce cas, la
	valeur par défaut est <quote>on</quote>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-B <replaceable class="parameter">ntampons</replaceable></option></term>
      <listitem>
       <para>
	Configure le nombre de tampons partagés utilisés par les processus
	serveur. La valeur par défaut de ce paramètre est choisi automatiquement
	par <application>initdb</application>&nbsp;; référez-vous à <xref
	linkend="runtime-config-resource-memory"/> pour plus d'informations.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-c <replaceable>nom</replaceable>=<replaceable>valeur</replaceable></option></term>
      <listitem>
       <para>
        Configure un parammètre d'exécution nommé. Les paramètres de configuration
	supportés par <productname>PostgreSQL</productname> sont décrits dans
        <xref linkend="runtime-config"/>. La plupart des autres options en ligne
	de commande sont en fait des formes courtes d'une affectation de
	paramères. <option>-c</option> peut apparaître plusieurs fois pour
	configurer différents paramètres.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-d <replaceable>niveau-débogage</replaceable></option></term>
      <listitem>
       <para>
        Configure le niveau de débogage. Plus haute est sa valeur, plus importante
	seront les traces écrites dans les journaux. Les valeurs vont de 1 à 5.
	Il est aussi possible de passer <literal>-d 0</literal> pour une session
	spécifique qui empêchera le niveau des traces serveur de
	<command>postgres</command> d'être propagé jusqu'à cette session.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-D <replaceable class="parameter">repdonnées</replaceable></option></term>
      <listitem>
       <para>
        Indique le répertoire des données ou des fichier(s) de configuration.
	Voir <xref linkend="runtime-config-file-locations"/> pour les détails.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-e</option></term>
      <listitem>
       <para>
        Configure le style de date par défaut à <quote>European</quote>,
	c'est-à-dire l'ordre <literal>DMY</literal> pour les champs en entrée.
	Ceci cause aussi l'affichage de la date avant le mois dans certains
	formats de sortie de date. Voir <xref linkend="datatype-datetime"/> pour
	plus d'informations.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-F</option></term>
      <listitem>
       <para>
        Désactive les appels <function>fsync</function> pour améliorer les
	performances au risque de corrompre des données dans l'idée d'un
	arrêt brutal du système. Spécifier cette option est équivalent à
	désactiver le paramètre de configuration <xref
	linkend="guc-fsync"/>. Lisez la documentation détaillée avant d'utiliser
	ceci&nbsp;!
       </para>

       <para>
        <option>--fsync=true</option> a l'effet contraire de cette option.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-h <replaceable class="parameter">hôte</replaceable></option></term>
      <listitem>
       <para>
        Indique le nom d'hôte ou l'adresse IP sur lequel
        <command>postgres</command> attend les connexions TCP/IP d'applications
        clientes. La valeur peut aussi être une liste d'adresses séparées par
	des virgules ou <literal>*</literal> pour indiquer l'attente sur toutes
	les interfaces disponibles. Une valeur vide indique qu'il n'attend
	sur aucune adresse IP, auquel cas seuls les sockets de domaine Unix
	peuvent être utilisés pour se connecter à
        <command>postgres</command>. Par défaut, attend les connexions seulement
        sur <systemitem class="systemname">localhost</systemitem>. Spécifier
	cette option est équivalent à la configurer dans le paramètre <xref
        linkend="guc-listen-addresses"/>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-i</option></term>
      <listitem>
       <para>
        Autorise les clients distants à se connecter via TCP/IP (domaine
	Internet). Sans cette option, seules les connexions locales sont
	autorisées. Cette option est équivalent à la configuration du
        paramètre <varname>listen_addresses</varname> à <literal>*</literal>
        dans <filename>postgresql.conf</filename> ou via <option>-h</option>.
       </para>
       <para>
        Cette option est obsolète car il ne permet plus l'accès à toutes les
	fonctionnalités de <xref linkend="guc-listen-addresses"/>. Il est
	généralement mieux de configurer directement
        <varname>listen_addresses</varname>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-k <replaceable class="parameter">directory</replaceable></option></term>
      <listitem>
       <para>
	Indique le répertoire de la socket de domaine Unix sur laquelle
	<command>postgres</command> est en attente des connexions des
	applications clients. La valeur par défaut est habituellement
	<filename>/tmp</filename> mais cela peut se changer au moment de la
	construction.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-l</option></term>
      <listitem>
       <para>
	Active les connexions sécurisées utilisant <acronym>SSL</acronym>.
	<productname>PostgreSQL</productname> doit avoir été compilé avec
	<acronym>SSL</acronym> pour que cette option soit disponible.
	Pour plus d'informations sur <acronym>SSL</acronym>, référez-vous à
	<xref linkend="ssl-tcp"/>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-N <replaceable class="parameter">max-connections</replaceable></option></term>
      <listitem>
       <para>
	Initialise le nombre maximum de connexions clientes que ce
	<command>postgres</command> acceptera. Par défaut, la valeur est 32 mais
	elle peut vakiur autant que le système peut supporter. (Notez que
	<option>-B</option> doit valoir au moins deux fois
	<option>-N</option>. Voir <xref linkend="kernel-resources"/> pour une
	discussion des besoins en ressources système pour un gros nombre de
	connexions clientes. Indiquer cette option est équivalent à la configurer
	abec le paramètre <xref linkend="guc-max-connections"/>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-o <replaceable class="parameter">extra-options</replaceable></option></term>
      <listitem>
       <para>
	Les options en ligne de commande indiquées dans <replaceable
	class="parameter">extra-options</replaceable> sont passées à tous les
	processus serveur exécutés par ce <command>postgres</command>. Si la
	chaîne d'option contient des espaces, la chaîne entière doit être entre
	guillemets.
       </para>

       <para>
        Cette option est obsolète&nbsp;; toutes les options en ligne de commande
	des processus serveur peuvent être spécifiées directement sur la ligne
	de commande de <command>postgres</command>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-p <replaceable class="parameter">port</replaceable></option></term>
      <listitem>
       <para>
	Indique le port TCP/IP ou l'extension du fichier socket de domaine Unix
	sur lequel <command>postgres</command> attend les connexions des
	applications clientes. Par défaut, la valeur de la variable
	d'environnement <envar>PGPORT</envar> environment ou, si cette variable
	n'est pas configurer, la valeur connue à la compilation (habituellement
	5432). Si vous indiquez un port autre que celui par défaut, alors toutes
	les applications clientes doivent indiquer le même numéro de port soit
	dans les options en ligne de commande soit avec <envar>PGPORT</envar>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-s</option></term>
      <listitem>
       <para>
	Affiche une information de temps et d'autres statistiques à la fin de
	chaque commande. Ceci est utile pour créer des rapports de performance
	ou pour configurer finement le nombre de tampons.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-S</option></term>
      <listitem>
       <para>
	Indique que le processus <command>postgres</command> doit s'exécuter
	en mode silencieux. C'est-à-dire qu'il sera dissocié du terminal de
	contrôle de l'utilisateur, lancera son propre groupe de processus et
	redirigera la sortie standard et celle des erreurs dans
	<filename>/dev/null</filename>.
       </para>
       <para>
        Utiliser cette option annule toute sortie des traces, ce qui n'est
	probablement pas ce que vous voulez car cela rend très difficile
	la résolution de problèmes. Voir ci-dessous pour une meilleure façon
	de lancer un <command>postgres</command> en tâche de fond.
       </para>
       <para>
        <option>--silent-mode=false</option> a l'effet contraire de cette
        option.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--<replaceable>nom</replaceable>=<replaceable>valeur</replaceable></option></term>
      <listitem>
       <para>
        Configure un paramètre à l'exécution&nbsp;; c'est une version courte de
        <option>-c</option>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--describe-config</option></term>
      <listitem>
       <para>
        Cette option affiche les variables de configuration internes du serveur,
	leurs descriptions et leurs valeurs par défaut dans un format
	<command>COPY</command> délimité par des tabulations. Elle est conçue
	principalement pour les outils d'administration.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </refsect2>

   <refsect2>
    <title>Options semi-internes</title>

    <para>
     Il existe plusieurs autres options, utilisées principalement dans un but
     de débogage et pouvant quelque fois aider à la récupération de bases de
     données très endommagées/ Il n'y a aucune raison pour les utiliser dans
     la configuration d'un système en production. Elles sont listées ici à
     l'intention des développeurs <productname>PostgreSQL</productname>. De
     plus, une de ces options pourrait disparaître ou changer dans le futur
     sans avertissement.
    </para>

    <variablelist>
     <varlistentry>
      <term><option>-f</option> <literal>{ s | i | m | n | h }</literal></term>
      <listitem>
       <para>
	Interdit l'utilisation de parcours et de méthode de jointure
	particulières. <literal>s</literal> and <literal>i</literal>
	désactivent respectivement les parcours séquentiels et d'index alors
	que <literal>n</literal>, <literal>m</literal> et <literal>h</literal>
	désactivent respectivement les jointures de boucles imbriquées,
	jointures d'assemblage et hash.
       </para>
	
       <para>
        Ni les parcours séquentiels ni les jointures de boucles imbriquées ne
	peuvent être désactivés complètement&nbsp;; les options
	<literal>-fs</literal> et <literal>-fn</literal> ne font que décourager
	l'optimiseur d'utiliser ce type de plans.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-n</option></term>
      <listitem>
       <para>
        Cette option est présente pour les problèmes de débogage du genre
	mort brutal d'un processus serveur. La stratégie habituelle dans cette
	situation est de notifier tous les autres processus serveur qu'ils
	doivent se terminer, puis réinitialiser la mémoire partagée et les
	sémaphores. Tout ceci parce qu'un processus serveur errant peut avoir
	corrompu certains états partagés avant de terminer. Cette option
	spécifie seulement que <command>postgres</command> ne réinitialisera
	pas les structures de données partagées. Un développeur système avec
	quelques connaissances peut utiliser un débogueur pour examiner l'état
	de la mémoire partagée et des sémaphores.
       </para>
     </listitem>
    </varlistentry>

     <varlistentry>
      <term><option>-O</option></term>
      <listitem>
       <para>
	Autorise la modification de la structure des tables système. C'est
	utilisé par <command>initdb</command>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-P</option></term>
      <listitem>
       <para>
	Ignore les index système lors de la lecture des tables système (mais
	les met à jour lors de la modification des tables). Ceci est utile
	lors de la récupération d'index système endommagés.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-t</option> <literal>pa[rser] | pl[anner] | e[xecutor]</literal></term>
      <listitem>
       <para>
	Affiche les statistiques en temps pour chaque requête en relation avec
	un des modules majeurs du système. Cette option ne peut pas être utilisée
	avec l'option <option>-s</option>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-T</option></term>
      <listitem>
       <para>
        Cette option est présente pour les problèmes de débogage du genre
	mort brutal d'un processus serveur. La stratégie habituelle dans cette
	situation est de notifier tous les autres processus serveur qu'ils
	doivent se terminer, puis réinitialiser la mémoire partagée et les
	sémaphores. Tout ceci parce qu'un processus serveur errant peut avoir
	corrompu certains états partagés avant de terminer. Cette option
	spécifie seulement que <command>postgres</command> arrêtera tous les
	autres processus serveur en leur envoyant le signal
	<literal>SIGSTOP</literal> mais ne les arrêtera pas. Ceci permet aux
	développeurs système de récupérer manuellement des <quote>core dumps</quote>
	de tous les processus serveur.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-v</option> <replaceable class="parameter">protocole</replaceable></term>
      <listitem>
       <para>
	Indique le numéro de version utilisé par le protocole interface/moteur
	pour une session particulière. Cette option est uniquement utilisée en
	interne.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-W</option> <replaceable class="parameter">secondes</replaceable></term>
      <listitem>
       <para>
        Un délai de ce nombre de secondes survient quand un nouveau processus
	serveur est lancé, une fois la procédure d'authentification terminée.
	Ceci a pour but de permettre au développeur d'attacher un débogueur au
	processus serveur.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-y</option> <replaceable class="parameter">base</replaceable></term>
      <listitem>
       <para>
	Indique qu'il est un sous-processus exécuté par
	<command>postgres</command> et indique la base à utiliser. Cette option
	est uniquement à usage interne.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </refsect2>

   <refsect2>
    <title>Options en mode mono-utilisateur</title>

    <para>
     Les options suivantes s'appliquent uniquement en mode mono-utilisateur.
    </para>

    <variablelist>
     <varlistentry>
      <term><option>--single</option></term>
      <listitem>
       <para>
	Sélectionne le mode mono-utilisateur. Cette option doit être la première
	sur la ligne de commande.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">base</replaceable></term>
      <listitem>
       <para>
	Indique le nom de la base à accèder. Si elle est omise, le nom de
	l'utilisateur est utilisé par défaut.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-E</option></term>
      <listitem>
       <para>
	Affiche toutes les commandes.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-j</option></term>
      <listitem>
       <para>
	Désactive l'utilisation du retour chariot comme délimiteur d'instruction.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-r</option> <replaceable class="parameter">fichier</replaceable></term>
      <listitem>
       <para>
	Envoie toute la sortie des traces du serveur dans <replaceable
	class="parameter">fichier</replaceable>. Dans le mode normal, cette
	option est ignorée et <systemitem>stderr</systemitem> est utilisé par
	tous les processus.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </refsect2>
 </refsect1>

 <refsect1>
  <title>Environnement</title>

  <variablelist>
   <varlistentry>
    <term><envar>PGCLIENTENCODING</envar></term>

    <listitem>
     <para>
      Jeu de caractères utilisé par défaut par tous les clients. (Les clients
      peuvent surcharger ce paramètre individuellement.) Cette valeur est aussi
      configurable dans le fichier de configuration.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><envar>PGDATA</envar></term>

    <listitem>
     <para>
      Emplacement du répertoire des données par défaut
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><envar>PGDATESTYLE</envar></term>

    <listitem>
     <para>
      Valeur par défaut du paramètre en exécution <xref linkend="guc-datestyle"/>.
      (Cette variable d'environnement est obsolète.)
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><envar>PGPORT</envar></term>

    <listitem>
     <para>
      Port par défaut (à configurer de préférence dans le fichier de configuration)
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><envar>TZ</envar></term>

    <listitem>
     <para>
      Fuseau horaire du serveur
     </para>
    </listitem>
   </varlistentry>

  </variablelist>
 </refsect1>

 <refsect1>
   <title>Diagnostiques</title>

   <para>
    Un message d'erreur mentionnant <literal>semget</literal> ou
    <literal>shmget</literal> indique probablement que vous devez configurer
    votre noyau pour fournir la mémoire partagée et les sémaphores adéquates.
    Pour plus de discussion, voir <xref linkend="kernel-resources"/>. Vous
    pouvez aussi repousser la configuration du noyau en diminuant <xref
    linkend="guc-shared-buffers"/> pour réduire la consommation de la
    mémoire partagée utilisée par <productname>PostgreSQL</productname>, et/ou
    en diminuant <xref linkend="guc-max-connections"/> pour réduire la
    consommation de sémaphores.
   </para>

   <para>
    Un message d'erreur suggérant qu'un autre serveur est déjà en cours
    d'exécution devra vous demander une vérification attentive, par
    exemple en utilisant la commande ps
    should be checked carefully, for example by using the command
<screen><prompt>$</prompt> <userinput>ps ax | grep postgres</userinput>
</screen>
        ou
<screen><prompt>$</prompt> <userinput>ps -ef | grep postgres</userinput>
</screen>
    suivant votre système. Si vous êtes certain qu'il n'y a aucun serveur
    en conflit, vous pouvez supprimer le fichier verrou mentionné dans le
    message et tenter de nouveau.
   </para>

   <para>
    Un message d'erreur indiquant une incapacité à se lier à un port indique
    que ce port est déjà utilisé par des processus autres que
    <productname>PostgreSQL</productname>. Vous pouvez aussi obtenir cette
    erreur si vous quittez <command>postgres</command> et le relancez
    immédiatement en utilisant le même port&nbsp;; dans ce cas, vous
    devez tout simplement attendre quelques secondes pour que le système
    d'exploitation ferme bien le port avant de tenter de nouveau. Enfin,
    vous pouvez obtenir cette erreur si vous indiquez un numéro de port
    que le système considère comme réservé. Par exemple, beaucoup de
    versions d'Unix considèrent les numéros de port sous 1024 comme
    de <quote>confiance</quote> et permettent seulement leur accès par le
    superutilisateur Unix.
   </para>

 </refsect1>

 <refsect1>
  <title>Notes</title>
  
  <para>
   Si possible, <emphasis>ne pas</emphasis> utiliser
   <literal>SIGKILL</literal> pour tuer le serveur
   <command>postgres</command> principal. Le fait empêchera
   <command>postgres</command> de libérer les ressources système
   (c'est-à-dire mémoire partagée et sémaphores) qu'il détient avant de
   s'arrêter. Ceci peut poser problèmes lors du lancement d'un
   <command>postgres</command> frais.
  </para>

  <para>
   Pour terminer le serveur <command>postgres</command> normalement, les signaux
   <literal>SIGTERM</literal>, <literal>SIGINT</literal> ou
   <literal>SIGQUIT</literal> peuvent être utilisés. Le premier attendra que
   tous les clients terminent avant de quitter, le second forcera la déconnexion
   de tous les clients et le troisième quittera immédiatement sans arrêt propre.
   Ce dernier amènera une récupération lors du redémarrage. Le signal
   <literal>SIGHUP</literal> rechargera les fichiers de configuration du
   serveur. Il est aussi possible d'envoyer <literal>SIGHUP</literal> à un
   processus serveur individuel mais ce n'est pas perceptible.
  </para>

  <para>
   L'outil <xref linkend="app-pg-ctl"/> peut être utilisé pour lancer et
   arrêter le serveur <command>postgres</command> d'une façon simple et sûre.
  </para>

  <para>
   Pour annuler une requête en cours d'exécution, envoyez le signal
   <literal>SIGINT</literal> au processus exécutant cette commande.
  </para>

  <para>
   Le serveur <command>postgres</command> utilise <literal>SIGTERM</literal>
   pour indiquer aux processus serveur de quitter normalement et
   <literal>SIGQUIT</literal> pour terminer sans le nettoyage habituel.
   Ces signaux <emphasis>ne devraient pas</emphasis> être utilisés par les
   utilisateurs. Il est aussi déconseillé d'envoyer <literal>SIGKILL</literal>
   à un processus serveur &mdash; le serveur <command>postgres</command>
   principal interprétera ceci comme un arrêt brutal et forcera tous les
   autres processus serveur à quitter dans le cas d'une procédure standard
   de récupération après arrêt brutal.
  </para>
 </refsect1>

 <refsect1 id="app-postgres-bugs">
  <title>Bogues</title>
  <para>
   Les options <option>--</option> ne fonctionneront pas sous <systemitem
   class="osname">FreeBSD</systemitem> et <systemitem class="osname">OpenBSD</systemitem>.
   Utilisez <option>-c</option> à la place. C'est un bogue dans les systèmes
   d'exploitation affectés&nbsp;; une prochaine version de
   <productname>PostgreSQL</productname> fournira un contournement si ce n'est
   pas corrigé.
  </para>
 </refsect1>

 <refsect1>
  <title>Utilisation</title>

   <para>
    Pour démarrer un serveur en mode mono-utilisateur, utilisez une commande
    comme
<screen><userinput>postgres --single -D /usr/local/pgsql/data <replaceable>autres-options</replaceable> ma_base</userinput>
</screen>
    Fournissez le bon chemin vers le répertoire des bases avec l'option
    <option>-D</option> ou assurez-vous que la variable d'environnement
    <envar>PGDATA</envar> est configurée. De plus, spécifiez le nom de la base
    particulière avec laquelle vous souhaitez travailler.
   </para>

   <para>
    Habituellement, le serveur en mode mono-utilisateur traite le retour chariot
    comme le terminateur d'une commande&nbsp;; il n'y a pas le concept du
    point-virgule contraitement à <application>psql</application>. Pour saisir
    une commande sur plusieurs lignes, vous devez saisir un antislash juste avant
    un retour chariot, sauf pour le dernier.
   </para>

   <para>
    Mais si vous utilisez l'option <option>-j</option>, alors le retour chariot
    ne termine pas une commande. Dans ce cas, le serveur lira l'entrée standard
    jusqu'à une marque de fin de fichier (<acronym>EOF</acronym>), puis il
    traitera la saisie comme une seule chaîne de commande. Les retours chariot
    avec antislash ne sont pas traités spécialement dans ce cas.
   </para>

   <para>
    Pour quitter la session, saisissez <acronym>EOF</acronym>
    (habituellement, <keycombo action="simul"><keycap>Control</keycap><keycap>D</keycap></keycombo>).
    Si vous avez utilisé l'option <option>-j</option>, deux <acronym>EOF</acronym>
    consécutifs sont nécessaires pour quitter.
   </para>

   <para>
    Notez que le serveur en mode mono-utilisateur ne fournit pas de fonctionnalités
    avancées sur l'édition de lignes (par exemple, pas d'historique des commandes).
   </para>
 </refsect1>

 <refsect1 id="app-postgres-examples">
  <title>Exemples</title>

  <para>
   Pour lancer <command>postgres</command> en tâche de fond avec les valeurs
   par défaut, saisissez&nbsp;:

<screen>
<prompt>$</prompt> <userinput>nohup postgres &gt;logfile 2&gt;&amp;1 &lt;/dev/null &amp;</userinput>
</screen>
  </para>

  <para>
   Pour lancer <command>postgres</command> avec un port spécifique&nbsp;:
<screen>
<prompt>$</prompt> <userinput>postgres -p 1234</userinput>
</screen>
   Cette commande exécutera un <command>postgres</command> qui communiquera sur
   le port 1234. Pour se connecter à <command>postgres</command> en utilisant
   <application>psql</application>, vous aurez besoin de saisir&nbsp;:
<screen>
<prompt>$</prompt> <userinput>psql -p 1234</userinput>
</screen>
   ou de configurer la variable d'environnement <envar>PGPORT</envar>&nbsp;:
<screen>
<prompt>$</prompt> <userinput>export PGPORT=1234</userinput>
<prompt>$</prompt> <userinput>psql</userinput>
</screen>
  </para>

  <para>
   Les paramètres nommés peuvent être configurés suivant deux façons&nbsp;:
<screen>
<prompt>$</prompt> <userinput>postgres -c work_mem=1234</userinput>
<prompt>$</prompt> <userinput>postgres --work-mem=1234</userinput>
</screen>
   Ces deux formes surchargent le paramétrage qui pourrait exister pour
   <varname>work_mem</varname> dans <filename>postgresql.conf</filename>. Notez
   que les tirets bas dans les noms de paramètres sont écrits avec soir des
   tirets bas soit des tirets sur la ligne de commande. Sauf pour les expériences
   à court terme, il est probablement mieux de modifier le paramétrage dans
   <filename>postgresql.conf</filename> que de se baser sur une option en ligne
   de commande.
  </para>
 </refsect1>

 <refsect1>
  <title>Voir aussi</title>

  <para>
   <xref linkend="app-initdb"/>,
   <xref linkend="app-pg-ctl"/>
  </para>
 </refsect1>
</refentry>
