<!-- $Header: /var/lib/cvs/pgsql-fr/sgml/ref/set_transaction.sgml,v 1.7.2.1 2005/03/14 06:03:03 guillaume Exp $ -->
<refentry id="SQL-SET-TRANSACTION">
 <refmeta>
  <refentrytitle id="SQL-SET-TRANSACTION-TITLE">SET TRANSACTION</refentrytitle>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>SET TRANSACTION</refname>
  <refpurpose>initialise les caractéristiques de la transaction
   actuelle</refpurpose>
 </refnamediv>

 <indexterm zone="sql-set-transaction">
  <primary>SET TRANSACTION</primary>
 </indexterm>

 <refsynopsisdiv>
<synopsis>
SET TRANSACTION
    [ ISOLATION LEVEL { READ COMMITTED | SERIALIZABLE } ] [ READ WRITE | READ ONLY ]
SET SESSION CHARACTERISTICS AS TRANSACTION
    [ ISOLATION LEVEL { READ COMMITTED | SERIALIZABLE } ] [ READ WRITE | READ ONLY ]
</synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>

  <para>
   La commande <command>SET TRANSACTION</command> initialise les
   caractéristiques de la transaction actuelle. Il n'a aucun effet sur les
   transactions suivantes. <command>SET SESSION CHARACTERISTICS</command>
   initialise les caractéristiques de la transaction par défaut pour chaque
   transaction d'une session. <command>SET TRANSACTION</command> peut le
   surcharger pour une transaction individuelle.
  </para>

  <para>
   Les caractéristiques disponibles de la transaction sont le niveau
   d'isolation de la transaction et le mode d'accès de la transaction
   (lecture/écriture ou lecture seule).
  </para>

  <para>
   Le niveau d'isolation d'une transaction détermine les données que la
   transaction peut voir quand d'autres transactions fonctionnent en même temps.

   <variablelist>
    <varlistentry>
     <term><literal>READ COMMITTED</literal></term>
     <listitem>
      <para>
       Une instruction peut seulement voir les lignes validées avant qu'elle ne
       commence. C'est la valeur par défaut.
      </para>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term><literal>SERIALIZABLE</literal></term>
     <listitem>
      <para>
       La transaction en cours peut seulement voir les lignes validées avant
       que la première requête ou la première instruction de modification de
       données ait été exécutée dans cette transaction.
      </para>
      <tip>
       <para>
        Intuitivement, sérialisable signifie que deux transactions concurrentes
        laisseront la base de données dans le même état que si les deux
        avaient été lancées strictement l'une après l'autre quelque soit
        l'ordre.
       </para>
      </tip>
     </listitem>
    </varlistentry>
   </variablelist>

   Le niveau d'isolation de la transaction ne peut pas être initialisé après que
   la première requête ou la première instruction de modification de données
   (<command>SELECT</command>, <command>INSERT</command>,
   <command>DELETE</command>, <command>UPDATE</command>,
   <command>FETCH</command>, <command>COPY</command>) d'une transaction ait été
   exécutée. Voir <xref linkend="mvcc"> pour plus d'informations sur
   l'isolation de la transaction et le contrôle de concurrence.
  </para>

  <para>
   Le mode d'accès de la transaction détermine si la transaction est en
   lecture/écriture ou en lecture seule. Lecture/écriture est la valeur par
   défaut. Quand une transaction est en lecture seule, les commandes SQL
   suivantes sont interdites&nbsp;: <literal>INSERT</literal>,
   <literal>UPDATE</literal>, <literal>DELETE</literal> et <literal>COPY
   FROM</literal> si la table qu'elles modifieraient n'est pas une table
   temporaire&nbsp;; toutes les commandes <literal>CREATE</literal>,
   <literal>ALTER</literal> et <literal>DROP</literal>&nbsp;;
   <literal>COMMENT</literal>, <literal>GRANT</literal>,
   <literal>REVOKE</literal>, <literal>TRUNCATE</literal>&nbsp;;
   <literal>EXPLAIN ANALYZE</literal> et <literal>EXECUTE</literal> si la
   commande qu'ils exécuteraient est parmi celles listées. Ceci est une notion
   de haut niveau de lecture seule qui n'empêche pas les écritures sur disque.
  </para>
 </refsect1>

 <refsect1>
  <title>Notes</title>

  <para>
   Le niveau d'isolation par défaut de la session peut aussi être initialisé
   avec la commande
<programlisting>
SET default_transaction_isolation = '<replaceable>valeur</replaceable>'
</programlisting>
   et dans le fichier de configuration. Consultez <xref
   linkend="runtime-config"> pour plus d'informations.
  </para>
 </refsect1>

 <refsect1 id="R1-SQL-SET-TRANSACTION-3">
  <title>Compatibilité</title>

  <para>
   Les deux commandes sont définies dans le standard <acronym>SQL</acronym>.
   <literal>SERIALIZABLE</literal> est le niveau d'isolation par défaut de la
   transaction dans le standard&nbsp;; dans
   <productname>PostgreSQL</productname>, la valeur par défaut est
   habituellement <literal>READ COMMITTED</literal>, mais vous pouvez la
   modifier comme décrit ci-dessus. <productname>PostgreSQL</productname> ne
   fournit pas de niveaux d'isolation <literal>READ UNCOMMITTED</literal> et
   <literal>REPEATABLE READ</literal>. À cause du contrôle concurrent
   de multiversion, le niveau <literal>SERIALIZABLE</literal> n'est pas vraiment
   sérialisable. Voir <xref linkend="mvcc"> pour plus de détails.
  </para>

  <para>
   Dans le standard SQL, il existe une autre caractéristique de transaction
   pouvant être configurée avec ces commandes&nbsp;: la taille de l'aire de
   diagnostique. Ce concept est seulement à utiliser en SQL embarqué.
  </para>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode:sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:("/usr/lib/sgml/catalog")
sgml-local-ecat-files:nil
End:
-->
