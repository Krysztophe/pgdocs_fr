<?xml version="1.0" encoding="ISO-8859-15"?>
<!-- Dernière modification
     le       $Date$
     par      $Author$
     révision $Revision$ -->
<!-- SAS 20060616 -->

<refentry id="sql-alterdatabase">
 <refmeta>
  <refentrytitle id="sql-alterdatabase-title">ALTER DATABASE</refentrytitle>
  <manvolnum>7</manvolnum>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>ALTER DATABASE</refname>
  <refpurpose>Modifier une base de données</refpurpose>
 </refnamediv>

 <refsynopsisdiv>
<synopsis>ALTER DATABASE <replaceable class="parameter">nom</replaceable> [ [ WITH ] <replaceable class="parameter">option</replaceable> [ ... ] ]

où <replaceable class="parameter">option</replaceable> peut être&nbsp;:

    CONNECTION LIMIT <replaceable class="parameter">limite_connexion</replaceable>

ALTER DATABASE <replaceable class="parameter">nom</replaceable> RENAME TO <replaceable>nouveau_nom</replaceable>
ALTER DATABASE <replaceable class="parameter">nom</replaceable> OWNER TO <replaceable>nouveau_propriétaire</replaceable>

ALTER DATABASE <replaceable class="PARAMETER">nom</replaceable> SET TABLESPACE <replaceable class="PARAMETER">nouveau_tablespace</replaceable>

ALTER DATABASE <replaceable class="parameter">nom</replaceable> SET <replaceable>paramètre</replaceable> { TO | = } { <replaceable>valeur</replaceable> | DEFAULT }
ALTER DATABASE <replaceable class="parameter">nom</replaceable> SET <replaceable>paramètre</replaceable> FROM CURRENT
ALTER DATABASE <replaceable class="parameter">nom</replaceable> RESET <replaceable>paramètre</replaceable>
ALTER DATABASE <replaceable class="parameter">nom</replaceable> RESET ALL
</synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>
  <indexterm zone="sql-alterdatabase">
   <primary>ALTER DATABASE</primary>
  </indexterm>


  <para>
   <command>ALTER DATABASE</command> modifie les attributs d'une base de
   données.
  </para>

  <para>
   La première forme modifie certains paramètres d'une base de données (voir
   ci-dessous pour les détails). Seul le propriétaire de la base de données ou
   un superutilisateur peut modifier ces paramètres.
  </para> 

  <para>
   La deuxième forme permet de renommer la base. Seul le propriétaire ou un
   superutilisateur peut renommer une base. Un propriétaire qui n'est pas superutilisateur
   doit en outre posséder le droit <literal>CREATEDB</literal>. La base en cours
   d'utilisation ne peut pas être renommée (on se connectera à une base différente
   pour réaliser cette opération).
  </para>

  <para>
   La troisième forme change le propriétaire de la base de données.
   Pour changer le propriétaire, il faut être propriétaire de la base
   de données et membre direct ou indirect du nouveau rôle
   propriétaire. Le droit <literal>CREATEDB</literal> est également requis
   (les superutilisateurs ont automatiquement tous ces droits).
  </para>

  <para>
   La quatrième forme change le tablespace par défaut de la base de données.
   Seuls le propriétaire de la base de données et un superutilisateur peuvent
   le faire&nbsp;; vous devez aussi avoir le droit CREATE pour le nouveau
   tablespace. Cette commande déplace physiquement toutes tables et index
   actuellement dans l'ancien tablespace par défaut de la base de données vers
   le nouveau tablespace. Notez que les tables et index placés dans d'autres
   tablespaces ne sont pas affectés.
  </para>

  <para>
   Les formes restantes modifient la valeur par défaut d'un paramètre de
   configuration pour une base <productname>PostgreSQL</productname>. Par la
   suite, à chaque fois qu'une nouvelle session est lancée, la valeur
   spécifique devient la valeur par défaut de la session. Les valeurs par
   défaut de la base deviennent les valeurs par défaut de la session. En fait,
   elles surchargent tout paramètre présent dans
   <filename>postgresql.conf</filename> ou indiqué sur la ligne de commande de
   <command>postgres</command>. Seul le propriétaire de la base de données ou
   un superutilisateur peut modifier les valeurs par défaut de la session pour
   une base. Certaines variables ne peuvent pas être configurées de cette
   façon pour une base de données ou peuvent seulement être configurées par un
   superutilisateur.
  </para>
 </refsect1>

 <refsect1>
  <title>Paramètres</title>

    <variablelist>
     <varlistentry>
      <term><replaceable class="parameter">nom</replaceable></term>
      <listitem>
       <para>
        Le nom de la base dont les attributs sont à modifier.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">limite_connexion</replaceable></term>
      <listitem>
       <para>
        Le nombre de connexions concurrentes sur la base de données. -1 signifie aucune limite.
       </para>
      </listitem>
     </varlistentry> 

     <varlistentry>
      <term><replaceable>nouveau_nom</replaceable></term>
      <listitem>
       <para>
        Le nouveau nom de la base.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">nouveau_propriétaire</replaceable></term>
      <listitem>
       <para>
         Le nouveau propriétaire de la base.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">nouveau_tablespace</replaceable></term>
      <listitem>
       <para>
         Le nouveau tablespace par défaut de la base de données.
       </para>
      </listitem>
     </varlistentry> 

     <varlistentry>
      <term><replaceable>paramètre</replaceable></term>
      <term><replaceable>valeur</replaceable></term>
      <listitem>
       <para>
        Configure cette valeur comme valeur par défaut de la base pour le
	paramètre de configuration précisée. Si
        <replaceable>valeur</replaceable> indique <literal>DEFAULT</literal>
        ou, de façon équivalente, si <literal>RESET</literal> est utilisé, le
	paramètrage en cours pour cette base est supprimée, donc la valeur
	système est utilisée pour les nouvelles sessions. Utiliser <literal>RESET
        ALL</literal> permet de supprimer tous les paramètres spécifiques de
        cette base. <literal>SET FROM CURRENT</literal> sauvegarde la valeur actuelle
	du paramètre en tant que valeur spécifique de la base.
       </para>

       <para>
        Voir <xref linkend="sql-set" endterm="sql-set-title"/> et <xref linkend="runtime-config"/> pour plus d'informations sur les noms
	de paramètres et valeurs autorisées.
       </para>
      </listitem>
     </varlistentry>
  </variablelist>
 </refsect1>

 <refsect1>
  <title>Notes</title>

  <para>
   Il est possible de lier une valeur de session par défaut à un rôle plutôt qu'à
   une base. Voir <xref linkend="sql-alterrole" endterm="sql-alterrole-title"/>
   à ce propos. En cas de conflit, les configurations spécifiques au rôle
   l'emportent sur celles spécifiques à la base.
  </para>
 </refsect1>

 <refsect1>
  <title>Exemples</title>

  <para>
   Désactiver les parcours d'index par défaut de la base
   <literal>test</literal> :

<programlisting>ALTER DATABASE test SET enable_indexscan TO off;
</programlisting>
  </para>
 </refsect1>

 <refsect1>
  <title>Compatibilité</title>
    
  <para>
   La commande <command>ALTER DATABASE</command> est une extension 
   <productname>PostgreSQL</productname>.
  </para>
 </refsect1>

 <refsect1>
  <title>Voir aussi</title>

  <simplelist type="inline">
   <member><xref linkend="sql-createdatabase" endterm="sql-createdatabase-title"/></member>
   <member><xref linkend="sql-dropdatabase" endterm="sql-dropdatabase-title"/></member>
   <member><xref linkend="sql-set" endterm="sql-set-title"/></member>
   <member><xref linkend="sql-createtablespace" endterm="sql-createtablespace-title"/></member>
  </simplelist>
 </refsect1>
</refentry>
