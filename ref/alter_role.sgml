<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
$PostgreSQL: pgsql/doc/src/sgml/ref/alter_role.sgml,v 1.2 2005/07/31 17:19:17 tgl Exp $
PostgreSQL documentation
-->

<refentry id="sql-alterrole">
 <refmeta>
  <refentrytitle id="sql-alterrole-title">ALTER ROLE</refentrytitle>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>ALTER ROLE</refname>
  <refpurpose>modifie un rôle de la base de données</refpurpose>
 </refnamediv>

 <indexterm zone="sql-alterrole">
  <primary>ALTER ROLE</primary>
 </indexterm>

 <refsynopsisdiv>
<synopsis>
ALTER ROLE <replaceable class="parameter">nom</replaceable> [ [ WITH ] <replaceable class="parameter">option</replaceable> [ ... ] ]

où <replaceable class="parameter">option</replaceable> fait partie de&nbsp;:
    
      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | CREATEUSER | NOCREATEUSER
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | CONNECTION LIMIT <replaceable class="parameter">limiteconnexion</replaceable>
    | [ ENCRYPTED | UNENCRYPTED ] PASSWORD '<replaceable class="parameter">motdepasse</replaceable>'
    | VALID UNTIL '<replaceable class="parameter">dateheure</replaceable>' 

ALTER ROLE <replaceable class="parameter">nom</replaceable> RENAME TO <replaceable>nouveaunom</replaceable>

ALTER ROLE <replaceable class="parameter">nom</replaceable> SET <replaceable>parametre</replaceable> { TO | = } { <replaceable>valeur</replaceable> | DEFAULT }
ALTER ROLE <replaceable class="parameter">nom</replaceable> RESET <replaceable>parametre</replaceable>
</synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>

  <para>
   <command>ALTER ROLE</command> modifie les attributs d'un rôle
   <productname>PostgreSQL</productname>.
  </para>

  <para>
   La première variante de cette commande, listée dans le synopsis, peut
   modifier beaucoup d'attributs d'un rôle s'ils sont été spécifiés dans la
   commande <xref linkend="sql-createrole" endterm="sql-createrole-title"/> (à
   lire pour plus de détails). (Tous les attributs possibles sont couverts
   sauf qu'il n'y a pas d'option pour ajouter ou supprimer des
   appartenances&nbsp;; utilisez <xref linkend="sql-grant"
   endterm="sql-grant-title"/> et <xref linkend="sql-revoke"
   endterm="sql-revoke-title"/> pour cela.) Les attributs non mentionnés dans
   la commande conservent leur paramètrage précédent. Les superutilisateurs de
   la base de données peuvent modifier n'importe lequel de leurs paramètre pour
   tout rôle. Les rôles possédant le droit <literal>CREATEROLE</literal> peuvent
   modifier tout paramètre, mais seulement pour les rôles ne concernant pas
   les superutilisateurs. Les rôles ordinaires peuvent seulement modifier leur
   propre mot de passe.
  </para>

  <para>
   La deuxième variante modifier le nom du rôle. Les superutilisateurs peuvent
   renommer n'importe quel rôle. Les rôles disposant du droit 
   <literal>CREATEROLE</literal> peuvent renommer tout rôle ne concernant pas les
   superutilisateurs. L'utilisateur de la session en cours ne peut pas être
   renommé. (Connectez-vous en tant qu'un autre utilisateur si vous avez besoin
   de faire cela.) Comme les mots de passes cryptés via <literal>MD5</literal>
   utilisent le nom du rôle comme grain cryptographique, renommer un rôle efface
   son mot de passe si ce dernier est crypté avec <literal>MD5</literal>.
  </para>

  <para>
   La troisième et quatrième variante modifie la valeur par défaut d'une
   variable de configuration spécifiée pour la session d'un rôle. Quand le rôle
   lance une nouvelle session après coup, la valeur spécifiée devient la valeur
   par défaut de la session, surchargeant tout paramètrage présent dans
   <filename>postgresql.conf</filename> ou tout paramètrage provenant de la ligne de
   commande de <command>postmaster</command>. (Pour un rôle sans droit
   <literal>LOGIN</literal>, les valeurs par défaut de la session n'ont aucun effet.)
   Les rôles ordinaires peuvent changer leur propre valeurs par défaut de leur
   session. Les superutilisateurs peuvent modifier les valeurs de session de
   chaque utilisateur. Les rôles disposant du droit <literal>CREATEROLE</literal>
   peuvent modifier les valeurs par défaut pour les rôles ordinaires (non
   superutilisateurs). Certaines variables ne peuvent être configurées de cette
   façon ou peuvent seulement être configurées si un superutilisateur lance la
   commande.
  </para>
 </refsect1>

 <refsect1>
  <title>Paramètres</title>

    <variablelist>
     <varlistentry>
      <term><replaceable class="parameter">nom</replaceable></term>
      <listitem>
       <para>
        Le nom du rôle dont les attributs vont être modifiés.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>SUPERUSER</literal></term>
      <term><literal>NOSUPERUSER</literal></term>
      <term><literal>CREATEDB</literal></term>
      <term><literal>NOCREATEDB</literal></term>
      <term><literal>CREATEROLE</literal></term>
      <term><literal>NOCREATEROLE</literal></term>
      <term><literal>CREATEUSER</literal></term>
      <term><literal>NOCREATEUSER</literal></term>
      <term><literal>INHERIT</literal></term>
      <term><literal>NOINHERIT</literal></term>
      <term><literal>LOGIN</literal></term>
      <term><literal>NOLOGIN</literal></term>
      <term><literal>CONNECTION LIMIT</literal> <replaceable class="parameter">limite_connexion</replaceable></term>
      <term><literal>PASSWORD</literal> <replaceable class="parameter">motdepasse</replaceable></term>
      <term><literal>ENCRYPTED</literal></term>
      <term><literal>UNENCRYPTED</literal></term>
      <term><literal>VALID UNTIL</literal> '<replaceable class="parameter">dateheure</replaceable>'</term>
      <listitem>
       <para>
        Ces clauses modifient les attributs originellement configurés pour
        <xref linkend="sql-createrole" endterm="sql-createrole-title"/> (à
        lire pour plus d'informations).
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable>nouveaunom</replaceable></term>
      <listitem>
       <para>
        Le nouveau nom d'un rôle.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable>paramètre</replaceable></term>
      <term><replaceable>valeur</replaceable></term>
      <listitem>
       <para>
        Configure une valeur de session par défaut pour le paramètre de
        configuration spécifiée à la valeur donnée. Si
        <replaceable>valeur</replaceable> est <literal>DEFAULT</literal> ou,
        de façon équivalente, si <literal>RESET</literal> est utilisé, le
        paramètre de la variable spécifique au rôle est supprimé, de façon à ce
        que le rôle hérite de la valeur par défaut du système pour les nouvelles
        sessions. Utilisez <literal>RESET ALL</literal> pour supprimer tous les
        paramètrages spécifiques au rôle courant.
       </para>

       <para>
        Voir <xref linkend="sql-set" endterm="sql-set-title"/> et <xref
        linkend="runtime-config"/> pour plus d'informations sur les noms des
        paramètres autorisés et leurs valeurs.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
 </refsect1>

 <refsect1>
  <title>Notes</title>

  <para>
   Utilisez <xref linkend="sql-createrole" endterm="sql-createrole-title"/> pour
   ajouter de nouveaux rôles et <xref linkend="sql-droprole"
   endterm="sql-droprole-title"/> pour supprimer un rôle.
  </para>

  <para>
   <command>ALTER ROLE</command> ne peut pas modifier les membres d'un rôle.
   Utilisez <xref linkend="sql-grant" endterm="sql-grant-title"/> et
   <xref linkend="sql-revoke" endterm="sql-revoke-title"/> pour cela.
  </para>

  <para>
   Il est aussi possible de lier une valeur par défaut pour une session pour
   une base de données spécifique plutôt que pour un rôle&nbsp;; voir
   <xref linkend="sql-alterdatabase" endterm="sql-alterdatabase-title"/>. Les
   valeurs de paramètres spécifiques aux rôles surchargent celles spécifiques à
   une base de données lorsqu'il y a conflit.
  </para>
 </refsect1>

 <refsect1>
  <title>Exemples</title>

  <para>
   Modifier le mot de passe d'un rôle&nbsp;:

<programlisting>
ALTER ROLE davide WITH PASSWORD 'hu8jmn3';
</programlisting>
  </para>

  <para>
   Modifier la date d'expiration d'un mot de passe, en spécifiant que le mot de 
   passe doit expirer à midi le 4 mai 2015 en utilisant le fuseau horaire
   qui se trouve en avance d'une heure sur <acronym>UTC</acronym>&nbsp;:
<programlisting>
ALTER ROLE chris VALID UNTIL 'May 4 12:00:00 2015 +1';
</programlisting>
  </para>

  <para>
   Créer un mot de passe toujours valide&nbsp;:
<programlisting>
ALTER ROLE fred VALID UNTIL 'infinity';
</programlisting>
  </para>

  <para>
   Donner à un rôle la capacité de créer d'autres rôles et de nouvelles bases
   de données&nbsp;:

<programlisting>
ALTER ROLE miriam CREATEROLE CREATEDB;
</programlisting>
  </para>

  <para>
   Donner à un rôle une valeur différente de celle par défaut pour le paramètre
   <xref linkend="guc-maintenance-work-mem"/>&nbsp;:

<programlisting>
ALTER ROLE worker_bee SET maintenance_work_mem = 100000;
</programlisting>
  </para>
 </refsect1>

 <refsect1>
  <title>Compatibilité</title>
    
  <para>
   L'instruction <command>ALTER ROLE</command> est une extension de
   <productname>PostgreSQL</productname>.
  </para>
 </refsect1>

 <refsect1>
  <title>Voir aussi</title>

  <simplelist type="inline">
   <member><xref linkend="sql-createrole" endterm="sql-createrole-title"/></member>
   <member><xref linkend="sql-droprole" endterm="sql-droprole-title"/></member>
   <member><xref linkend="sql-set" endterm="sql-set-title"/></member>
  </simplelist>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:"/usr/lib/sgml/catalog"
sgml-local-ecat-files:nil
End:
-->
