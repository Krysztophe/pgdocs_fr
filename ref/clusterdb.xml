<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
$Header: /var/lib/cvs/pgsql-fr/sgml/ref/clusterdb.sgml,v 1.8 2005/09/15 07:03:25 guillaume Exp $
PostgreSQL documentation
-->
<!-- SAS 20060616 -->

<refentry id="app-clusterdb">
 <refmeta>
  <refentrytitle id="app-clusterdb-title"><application>clusterdb</application></refentrytitle>
  <manvolnum>1</manvolnum>
  <refmiscinfo>Application</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname id="clusterdb">clusterdb</refname>
  <refpurpose>Grouper une base de données
   <productname>PostgreSQL</productname></refpurpose>
 </refnamediv>

 <refsynopsisdiv>
  <cmdsynopsis>
   <command>clusterdb</command>
   <arg rep="repeat"><replaceable>options_connexion</replaceable></arg>
   <arg>--table | -t <replaceable>table</replaceable> </arg>
   <arg><replaceable>nom_bd</replaceable></arg>
   <sbr/>
   <command>clusterdb</command>
   <arg rep="repeat"><replaceable>options_connexion</replaceable></arg>
   <group><arg>--all</arg><arg>-a</arg></group>
  </cmdsynopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>
  <indexterm zone="app-clusterdb">
   <primary>clusterdb</primary>
  </indexterm>

  <para>
   <application>clusterdb</application> est un outil de regroupage
   de tables au sein d'une base de données <productname>PostgreSQL</productname>.
   Il trouve les
   tables précédemment groupées et les groupe à nouveau sur
   l'index utilisé lors du groupement initial. Les tables qui n'ont jamais
   été groupées ne sont pas affectées.
  </para>

  <para>
   <application>clusterdb</application> est un enrobage de la commande
   SQL <xref linkend="sql-cluster" endterm="sql-cluster-title"/>. Il n'y a pas
   de différence réelle entre le groupage de bases par cet outil ou par
   d'autres méthodes d'accès au serveur.
  </para>

 </refsect1>


 <refsect1>
  <title>Options</title>

   <para>
    <application>clusterdb</application> accepte les arguments suivants en
    ligne de commande&nbsp;:
    
    <variablelist>
     <varlistentry>
      <term><option>-a</option></term>
      <term><option>--all</option></term>
      <listitem>
       <para>
		Grouper toutes les bases de données.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option><optional>-d</optional> <replaceable class="parameter">nom_bd</replaceable></option></term>
      <term><option><optional>--dbname</optional> <replaceable class="parameter">nom_bd</replaceable></option></term>
      <listitem>
       <para>
		Le nom de la base de données à grouper. Si ni ce nom, ni
		l'option <option>-a</option> (ou <option>--all</option>) ne sont précisés,
		le nom de la base de données est lu à partir de la variable
		d'environnement <envar>PGDATABASE</envar>. Si cette dernière n'est pas initialisée,
		le nom de l'utilisateur spécifié pour la connexion est utilisé.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-e</option></term>
      <term><option>--echo</option></term>
      <listitem>
       <para>
        Les commandes engendrées par <application>clusterdb</application>
		et envoyées au serveur sont affichées.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-q</option></term>
      <term><option>--quiet</option></term>
      <listitem>
       <para>
        Aucune réponse n'est affichée.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-t <replaceable class="parameter">table</replaceable></option></term>
      <term><option>--table <replaceable class="parameter">table</replaceable></option></term>
      <listitem>
       <para>
		Seule la table <replaceable class="parameter">table</replaceable> est groupée.
       </para>
      </listitem>
     </varlistentry>

    </variablelist>
   </para>

   <para>
    <application>clusterdb</application> accepte aussi les arguments suivants en
    ligne de commande pour les paramètres de connexion&nbsp;:
    
   <variablelist>
     <varlistentry>
      <term><option>-h <replaceable class="parameter">hôte</replaceable></option></term>
      <term><option>--host <replaceable class="parameter">hôte</replaceable></option></term>
      <listitem>
       <para>
		Le nom de la machine hôte sur laquelle le serveur
        fonctionne. Si la valeur commence par une barre oblique (slash), elle est utilisée comme
        répertoire du socket de domaine Unix.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-p <replaceable class="parameter">port</replaceable></option></term>
      <term><option>--port <replaceable class="parameter">port</replaceable></option></term>
      <listitem>
       <para>
		Le port TCP ou l'extension du fichier du socket local de
        domaine Unix sur lequel le serveur attend les connexions.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-U <replaceable class="parameter">nomutilisateur</replaceable></option></term>
      <term><option>--username <replaceable class="parameter">nomutilisateur</replaceable></option></term>
      <listitem>
       <para>
        Le nom de l'utilisateur utilisé pour la connexion.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-W</option></term>
      <term><option>--password</option></term>
      <listitem>
       <para>
        Un mot de passe est demandé.
       </para>
      </listitem>
     </varlistentry>
   </variablelist>
  </para>
 </refsect1>


 <refsect1>
  <title>Environnement</title>

  <variablelist>
   <varlistentry>
    <term><envar>PGDATABASE</envar></term>
    <term><envar>PGHOST</envar></term>
    <term><envar>PGPORT</envar></term>
    <term><envar>PGUSER</envar></term>

    <listitem>
     <para>
      Paramètres de connexion par défaut.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>


 <refsect1>
  <title>Diagnostiques</title>

  <para>
   En cas de difficulté, voir
   <xref linkend="sql-cluster" endterm="sql-cluster-title"/> et <xref linkend="app-psql"/>
   qui présentent les problèmes et messages d'erreur éventuels. Le serveur de
   bases de données doit fonctionner sur l'hôte cible. De plus,
   toutes les configurations de connexion par défaut et variables
   d'environnement utilisées par la bibliothèque client
   <application>libpq</application> s'appliquent.
  </para>

 </refsect1>


 <refsect1>
  <title>Exemples</title>

   <para>
    Grouper la base de données <literal>test</literal>&nbsp;:
<screen><prompt>$ </prompt><userinput>clusterdb test</userinput>
</screen>
   </para>

   <para>
    Grouper la seule table <literal>foo</literal> de la base de données
    nommée <literal>xyzzy</literal>&nbsp;:
<screen><prompt>$ </prompt><userinput>clusterdb --table foo xyzzy</userinput>
</screen>
   </para>

 </refsect1>

 <refsect1>
  <title>Voir aussi</title>

  <simplelist type="inline">
   <member><xref linkend="sql-cluster" endterm="sql-cluster-title"/></member>
   <member>Variables d'environnement (<xref linkend="libpq-envars"/>)</member>
  </simplelist>
 </refsect1>

</refentry>
