<?xml version="1.0" encoding="UTF-8"?>
<!-- Dernière modification
     le       $Date$
     par      $Author$
     révision $Revision$ -->
<!-- SAS 20060616 -->

<refentry id="sql-createconstraint">
 <refmeta>
  <refentrytitle id="sql-createconstraint-title">CREATE CONSTRAINT TRIGGER</refentrytitle>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>CREATE CONSTRAINT TRIGGER</refname>
  <refpurpose>Définir un nouveau déclencheur sur contrainte</refpurpose>
 </refnamediv>

 <refsynopsisdiv>

 <indexterm zone="sql-createconstraint">
  <primary>CREATE CONSTRAINT TRIGGER</primary>
 </indexterm> 
 
<synopsis>CREATE CONSTRAINT TRIGGER <replaceable class="parameter">nom</replaceable>
    AFTER <replaceable class="parameter">événement</replaceable> [ OR ... ]
    ON <replaceable class="parameter">table</replaceable>
    [ FROM <replaceable class="parameter">table_référencée</replaceable> ]
    { NOT DEFERRABLE | [ DEFERRABLE ] { INITIALLY IMMEDIATE | INITIALLY DEFERRED } }
    FOR EACH ROW
    EXECUTE PROCEDURE <replaceable class="parameter">fonction</replaceable> ( <replaceable class="parameter">arguments</replaceable> )
</synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>
  <indexterm zone="sql-createconstraint">
   <primary>CREATE CONSTRAINT</primary>
  </indexterm>

  <para>
   <command>CREATE CONSTRAINT TRIGGER</command> crée un
   <firstterm>trigger de contrainte</firstterm>. C'est identique à un trigger
   standard sauf que le moment de l'exécution du trigger est ajustable en
   utilisant <xref linkend="sql-set-constraints" endterm="sql-set-constraints-title"/>.
   Les triggers de contraintes doivent être des triggers <literal>AFTER
   ROW</literal>. Ils peuvent être déclenchés soit à la fin de l'instruction
   l'ayant déclenché soit à la fin de la transaction le contenant&nbsp;; dans
   ce dernier cas, ils sont dit déferrés (<firstterm>deferred</firstterm>). Le
   déclenchement d'un tigger déferré en attente peut voir son exécution forcée
   en utilisant <command>SET CONSTRAINTS</command>.
  </para>
 </refsect1>

 <refsect1>
   <title>Paramètres</title>
		
    <variablelist>
     <varlistentry>
      <term><replaceable class="parameter">nom</replaceable></term>
      <listitem>
       <para>
        Le nom du trigger de contrainte. C'est aussi le nom à utiliser pour
	modifier le comportement du trigger en utilisant <command>SET
	CONSTRAINTS</command>. Le nom ne peut pas être qualifié du schéma
	&mdash; le trigger hérite du schéma de sa table.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">événement</replaceable></term>
      <listitem>
       <para>
        Une valeur parmi <literal>INSERT</literal>, <literal>UPDATE</literal>
        ou <literal>DELETE</literal>&nbsp;; ceci indique l'événement qui
        sera la cause de l'exécution du déclencheur. Plusieurs événements
        peuvent être indiqués en utilisant le mot clé <literal>OR</literal>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">table</replaceable></term>
      <listitem>
       <para>
	    Le nom (éventuellement qualifié du nom du schéma) de la table dans laquelle
        se déroulent les événements déclenchant.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">table_référencée</replaceable></term>
      <listitem>
       <para>
        Le nom d'une autre table (parfois qualifié du nom du schéma) référencée
	par la contrainte. Cette option est utilisée pour les contraintes de
	type clé étrangère et n'est pas recommandée pour un usage général.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>DEFERRABLE</literal></term>
      <term><literal>NOT DEFERRABLE</literal></term>
      <term><literal>INITIALLY IMMEDIATE</literal></term>
      <term><literal>INITIALLY DEFERRED</literal></term>
      <listitem>
       <para>
	Le moment d'exécution par défaut du trigger.
        Voir la documentation de <xref linkend="sql-createtable"
        endterm="sql-createtable-title"/> pour les détails sur ces options de
        contraintes.
       </para>
      </listitem>
     </varlistentry>

   <varlistentry>
    <term><replaceable class="parameter">nom_fonction</replaceable></term>
    <listitem>
     <para>
      La fonction à appeler quand le trigger est déclenché. Voir <xref
      linkend="sql-createtrigger" endterm="sql-createtrigger-title"/> pour
      les détails.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="parameter">arguments</replaceable></term>
    <listitem>
     <para>
      Chaînes optionnelles d'argument à passer à la fonction trigger. Voir <xref
      linkend="sql-createtrigger" endterm="sql-createtrigger-title"/> pour plus
      de détails.
     </para>
    </listitem>
   </varlistentry>
    </variablelist>
  </refsect1>

  <refsect1>
   <title>Compatibilité</title>
   <para>
    <command>CREATE CONSTRAINT TRIGGER</command> est une extension
    <productname>PostgreSQL</productname> du standard <acronym>SQL</acronym>.
   </para>
  </refsect1>

 <refsect1>
  <title>Voir aussi</title>

  <simplelist type="inline">
   <member><xref linkend="sql-createtrigger" endterm="sql-createtrigger-title"/></member>
   <member><xref linkend="sql-droptrigger" endterm="sql-droptrigger-title"/></member>
   <member><xref linkend="sql-set-constraints" endterm="sql-set-constraints-title"/></member>
  </simplelist>
 </refsect1>
</refentry>
