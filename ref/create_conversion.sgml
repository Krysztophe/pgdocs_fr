<!-- $Header: /var/lib/cvs/pgsql-fr/sgml/ref/create_conversion.sgml,v 1.9 2005/09/15 07:03:26 guillaume Exp $ -->

<refentry id="SQL-CREATECONVERSION">
 <refmeta>
  <refentrytitle id="SQL-CREATECONVERSION-TITLE">CREATE CONVERSION</refentrytitle>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>CREATE CONVERSION</refname>
  <refpurpose>définir une nouvelle conversion de codage</refpurpose>
 </refnamediv>

 <indexterm zone="sql-createconversion">
  <primary>CREATE CONVERSION</primary>
 </indexterm>

 <refsynopsisdiv>
<synopsis>
CREATE [DEFAULT] CONVERSION <replaceable>nom</replaceable>
    FOR <replaceable>codage_source</replaceable> TO
<replaceable>codage_dest</replaceable> FROM
<replaceable>fonction</replaceable>
</synopsis>
 </refsynopsisdiv>
  
 <refsect1 id="sql-createconversion-description">
  <title>Description</title>

  <para>
   <command>CREATE CONVERSION</command> définit une nouvelle conversion entre
   les codages d'ensembles de caractères. Les noms de conversion pourront être
   utilisés dans la fonction <function>convert</function> pour spécifier une
   conversion de codage particulière. De plus, les conversions marquées
   <literal>DEFAULT</> peuvent être utilisées pour une conversion de codage
   automatique entre le client et le serveur. Pour y arriver, deux conversions,
   du codage A à B <emphasis>et</emphasis> du codage B à A, doivent être définies.
 </para>

  <para>
   Pour être capable de créer conversion, vous devez avoir le droit
   <literal>EXECUTE</literal> sur la fonction et le droit
   <literal>CREATE</literal> sur le schéma de destination.
  </para>
 </refsect1>


 <refsect1>
  <title>Paramètres</title>

   <variablelist>
    <varlistentry>
     <term><literal>DEFAULT</literal></term>

     <listitem>
      <para>
       La clause <literal>DEFAULT</> indique que cette conversion est celle par
       défaut pour un codage de cette source vers cette destination. Il ne doit
       y avoir qu'un codage par défaut dans un schéma pour une paire de codage.
      </para>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term><replaceable>nom</replaceable></term>

     <listitem>
      <para>
       Le nom de la conversion. Ce nom pourrait être qualifié avec le nom du
       schéma. Si ce n'est pas le cas, la conversion est définie dans le schéma
       actuel. Le nom de la conversion doit être unique dans un schéma.
      </para>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term><replaceable>codage_source</replaceable></term>

     <listitem>
      <para>
       Le nom du codage source.
      </para>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term><replaceable>codage_dest</replaceable></term>

     <listitem>
      <para>
       Le nom du codage destination.
      </para>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term><replaceable>fonction</replaceable></term>

     <listitem>
      <para>
       La fonction utilisée pour réaliser la conversion. Le nom de la fonction
       pourrait être qualifié avec le nom du schéma. Si ce n'est pas le cas, la
       fonction sera cherchée dans le chemin.
      </para>

      <para>
       La fonction doit avoir la signature suivante&nbsp;:

<programlisting>
conv_proc(
    integer,  -- ID codage source
    integer,  -- ID codage destination
    cstring,  -- chaîne source (chaîne C terminée par un caractère nul)
    internal, -- destination (remplie avec une chaîne C terminée par un caractère nul)
    integer   -- longueur de la chaîne source
) RETURNS void;
</programlisting>
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
 </refsect1>

 <refsect1 id="sql-createconversion-notes">
  <title>Notes</title>

  <para>
   Utilisez <command>DROP CONVERSION</command> pour supprimer une conversion
   définie par l'utilisateur.
  </para>

  <para>
   Les droits requis pour créer une conversion pourraient être modifiées dans
une version ultérieure.
  </para>
 </refsect1>

 <refsect1 id="sql-createconversion-examples">
  <title>Exemples</title>

  <para>
   Pour créer une conversion du codage <literal>UTF8</literal> vers le codage
   <literal>LATIN1</literal> en utilisant <function>mafonc</>&nbsp;:
<programlisting>
CREATE CONVERSION maconv FOR 'UTF8' TO 'LATIN1' FROM mafonc;
</programlisting>
  </para>
 </refsect1>

 
 <refsect1 id="sql-createconversion-compat">
  <title>Compatibilité</title>

  <para>
    <command>CREATE CONVERSION</command> est une extension
    <productname>PostgreSQL</productname>. Il n'existe pas d'instruction
    <command>CREATE CONVERSION</command> dans le standard SQL.
  </para>
 </refsect1>


 <refsect1 id="sql-createconversion-seealso">
  <title>Voir aussi</title>

  <simplelist type="inline">
   <member><xref linkend="sql-alterconversion" endterm="sql-alterconversion-title"></member>
   <member><xref linkend="sql-createfunction" endterm="sql-createfunction-title"></member>
   <member><xref linkend="sql-dropconversion" endterm="sql-dropconversion-title"></member>
  </simplelist>
 </refsect1>

</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode:sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:("/usr/lib/sgml/catalog")
sgml-local-ecat-files:nil
End:
-->
