<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
$Header: /var/lib/cvs/pgsql-fr/sgml/ref/create_database.sgml,v 1.9 2005/09/15 07:03:26 guillaume Exp $
PostgreSQL documentation
-->
<!-- SAS 20060618 pour la relecture -->

<refentry id="sql-createdatabase">
 <refmeta>
  <refentrytitle id="sql-createdatabase-title">CREATE DATABASE</refentrytitle>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>CREATE DATABASE</refname>
  <refpurpose>Créer une nouvelle base de données</refpurpose>
 </refnamediv>

 <refsynopsisdiv>
<synopsis>CREATE DATABASE <replaceable class="parameter">nom</replaceable>
    [ [ WITH ] [ OWNER [=] <replaceable class="parameter">propriétaire</replaceable> ]
               [ TEMPLATE [=] <replaceable class="parameter">modèle</replaceable> ]
               [ ENCODING [=] <replaceable class="parameter">codage</replaceable> ]
               [ TABLESPACE [=] <replaceable class="parameter">tablespace</replaceable> ]
	       [ CONNECTION LIMIT [=] <replaceable class="parameter">limite_connexion</replaceable> ] ]
</synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>
  <indexterm zone="sql-createdatabase">
   <primary>CREATE DATABASE</primary>
  </indexterm>

  <para>
   <command>CREATE DATABASE</command> crée une nouvelle
   base de données.
  </para>

  <para>
   Pour créer une base de données, il faut être superutilisateur
   ou avoir le droit spécial <literal>CREATEDB</literal>.
   Voir à ce sujet <xref linkend="sql-createuser" endterm="sql-createuser-title"/>.
  </para>

  <para>
   En fonctionnement normal, le créateur devient le propriétaire de la nouvelle base.
   Les superutilisateurs peuvent créer des bases et en donner la propriété à
   un autre utilisateur à l'aide de la clause <literal>OWNER</literal>. Ils peuvent ainsi
   créer des bases qui appartiennent à des utilisateurs sans
   droit particulier. Les utilisateurs qui possèdent le privilège <literal>CREATEDB</literal>
   mais ne sont pas superutilisateur ne peuvent
   créer que des bases de données dont ils sont propriétaires.
  </para>

  <para>
   Par défaut, la nouvelle base de données est créée en clonant la base
   système standard <literal>template1</literal>.  Un modèle différent peut
   être utilisé en écrivant
   <literal>TEMPLATE <replaceable class="parameter">nom</replaceable></literal>.  En particulier,
   la clause <literal>TEMPLATE template0</literal> permet de créer une base de
   données vierge qui ne contient que les objets standards pré-définis dans
   la version de <productname>PostgreSQL</productname> utilisée. C'est utile 
   pour ne pas copier les objets locaux ajoutés à <literal>template1</literal>.
  </para>
 </refsect1>

 <refsect1>
  <title>Paramètres</title>

    <variablelist>
     <varlistentry>
      <term><replaceable class="parameter">nom</replaceable></term>
      <listitem>
       <para>
        Le nom de la base de données à créer.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable class="parameter">propriétaire</replaceable></term>
      <listitem>
       <para>
        Le nom de l'utilisateur propriétaire de la
        nouvelle base de données ou <literal>DEFAULT</literal> pour 
        l'option par défaut (c'est-à-dire le nom de l'utilisateur qui
        exécute la commande).
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable class="parameter">modèle</replaceable></term>
      <listitem>
       <para>
        Le nom du modèle squelette de la nouvelle base de données ou
        <literal>DEFAULT</literal> pour le modèle par défaut
	(<literal>template1</literal>).
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable class="parameter">codage</replaceable></term>
      <listitem>
       <para>
        Le jeu de caractères de la nouvelle base de données.
	Peut-être une chaîne (par exemple <literal>'SQL_ASCII'</literal>), un
	nombre de jeu de caractères de type entier ou <literal>DEFAULT</literal>
	pour le jeu de caractères par défaut (en fait, celui de la base
	modèle).
	Les jeux de caractères supportés par le serveur
	<productname>PostgreSQL</productname> sont décrits dans <xref
	linkend="multibyte-charset-supported"/>.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable class="parameter">tablespace</replaceable></term>
      <listitem>
       <para>
        Le nom du tablespace associé à la nouvelle base de
        données ou <literal>DEFAULT</literal> pour le tablespace de
        la base de données modèle. Ce tablespace est celui par
        défaut pour les objets créés dans cette base de données. Voir
        <xref linkend="sql-createtablespace" endterm="sql-createtablespace-title"/>
	pour plus d'informations.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">limite_connexion</replaceable></term>
      <listitem>
       <para>
        Le nombre de connexions concurrentes à la base
	de données. -1 (valeur par défaut) signifie qu'il n'y a pas de
	limite.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>

  <para>
   L'ordre des paramètres optionnels n'a aucune importance.
  </para>
 </refsect1>

 <refsect1>
  <title>Notes</title>

   <para>
    La commande <command>CREATE DATABASE</command> ne peut pas être exécutée à l'intérieur d'un
    bloc de transactions.
   </para>

   <para>
    Les erreurs sur la ligne <quote>ne peut initialiser le répertoire de la base de données</quote>
    (<quote>could not initialize database directory</quote> dans la version originale) sont le plus
    souvent dues à des droits insuffisants sur le répertoire de données, à
    un disque plein ou à un autre problème relatif au système de fichiers.
   </para>

   <para>
    L'instruction
    <xref linkend="sql-dropdatabase" endterm="sql-dropdatabase-title"/>
    est utilisée pour supprimer la base de données.
   </para>

   <para>
    Le programme <xref linkend="app-createdb" endterm="app-createdb-title"/> est
    un enrobage de cette commande fourni par commodité.
   </para>

  <para>
   Bien qu'il soit possible de copier une base de données autre que
   <literal>template1</literal> en spécifiant son nom comme modèle, cela n'est pas
   (encore) prévu comme une fonctionnalité
   <quote><command>COPY DATABASE</command></quote> d'usage général.
   La limitation principale est qu'aucune autre session ne peut être connectée
   à la base modèle pendant sa copie. <command>CREATE DATABASE</command>
   échouera s'il y a une autre connexion au moment de son exécution&nbsp;;
   sinon, les nouveaux connexions à la base modèle seront verrouillées jusqu'à
   la fin de la commande <command>CREATE DATABASE</command>.
   La <xref linkend="manage-ag-templatedbs"/> fournit plus d'informations à ce
   sujet.
  </para>

  <para>
   L'option <literal>CONNECTION LIMIT</literal> n'est qu'approximativement contraignante&nbsp;;
   si deux nouvelles sessions commencent sensiblement en même
   temps alors qu'un seul <quote>connecteur</quote> à la base est disponible,
   il est possible que les deux échouent. De plus, les superutilisateurs ne sont pas
   soumis à cette limite.
  </para>
 </refsect1>

 <refsect1>
  <title>Exemples</title>

  <para>
   Créer une nouvelle base de données&nbsp;:

<programlisting>CREATE DATABASE lusiadas;
</programlisting>
  </para>

  <para>
   Créer une base de données <literal>ventes</literal> possédée par l'utilisateur
   <literal>app_ventes</literal> utilisant le tablespace <literal>espace_ventes</literal> 
   comme espace par défaut&nbsp;:

<programlisting>CREATE DATABASE ventes OWNER app_ventes TABLESPACE espace_ventes;
</programlisting>
  </para>

  <para>
   Créer une base de données <literal>musique</literal> qui supporte le jeu
   de caractères ISO-8859-1&nbsp;:

<programlisting>CREATE DATABASE musique ENCODING 'LATIN1';
</programlisting>
  </para>
 </refsect1>

 <refsect1>
  <title>Compatibilité</title>

  <para>
   Il n'existe pas d'instruction <command>CREATE DATABASE</command>
   dans le standard SQL. Les bases de données sont équivalentes aux
   catalogues, dont la création est définie par l'implantation.
  </para>
 </refsect1>

 <refsect1>
  <title>Voir aussi</title>

  <simplelist type="inline">
   <member><xref linkend="sql-alterdatabase" endterm="sql-alterdatabase-title"/></member>
   <member><xref linkend="sql-dropdatabase" endterm="sql-dropdatabase-title"/></member>
  </simplelist>
 </refsect1>

</refentry>
