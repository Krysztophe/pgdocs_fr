<?xml version="1.0" encoding="UTF-8"?>
<!-- Dernière modification
     le       $Date: 2009-04-13 17:20:17 +0200 (lun 13 avr 2009) $
     par      $Author: gleu $
     révision $Revision: 1293 $ -->

<refentry id="sql-createforeigndatawrapper">
 <refmeta>
  <refentrytitle id="sql-createforeigndatawrapper-title">CREATE FOREIGN DATA WRAPPER</refentrytitle>
  <manvolnum>7</manvolnum>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>CREATE FOREIGN DATA WRAPPER</refname>
  <refpurpose>définit un nouveau wrapper de données
      distantes</refpurpose>
 </refnamediv>

 <indexterm zone="sql-createforeigndatawrapper">
  <primary>CREATE FOREIGN DATA WRAPPER</primary>
 </indexterm>

 <refsynopsisdiv>
<synopsis>
CREATE FOREIGN DATA WRAPPER <replaceable class="parameter">nom</replaceable>
    [ VALIDATOR <replaceable class="parameter">fonction_validation</replaceable> | NO VALIDATOR ]
    [ OPTIONS ( <replaceable class="PARAMETER">option</replaceable> '<replaceable class="PARAMETER">valeur</replaceable>' [, ... ] ) ]
</synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>

  <para>
   <command>CREATE FOREIGN DATA WRAPPER</command> crée un nouveau wrapper de
   données distantes. L'utilisateur qui définit un wrapper de données distantes
   devient son propriétaire.
  </para>

  <para>
   Le nom du wrapper de données distantes doit être unique dans la base de
   données.
  </para>

  <para>
   Seuls les super-utilisateurs peuvent créer des wrappers de données distantes.
  </para>
 </refsect1>

 <refsect1>
  <title>Paramètres</title>

  <variablelist>
   <varlistentry>
    <term><replaceable class="parameter">nom</replaceable></term>
    <listitem>
     <para>
      Le nom du wrapper de données distantes à créer.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><literal>VALIDATOR <replaceable class="parameter">fonction_validation</replaceable></literal></term>
    <listitem>
     <para>
      <replaceable class="parameter">fonction_validation</replaceable> est le
      nom d'une fonction déjà enregistrée qui sera appelée pour vérifier les
      options génériques passées au wrapper de données distantes, au serveur
      distant et aux correspondances d'utilisateurs (<foreignphrase>user
      mappings</foreignphrase>) utilisant le wrapper de données distantes.
      Si aucune fonction de validation n'est spécifiée ou si <literal>NO
      VALIDATOR</literal> est spécifié, alors les options ne seront pas
      vérifiées au moment de la création. (Il est possible que les wrappers
      de données distantes ignorent ou rejettent des spécifications d'options
      invalides à l'exécution, en fonction de l'implémentation) La fonction de
      validation doit prendre deux arguments&nbsp;: l'un du type
      <type>text[]</type>, qui contiendra le tableau d'options, tel qu'il est
      stocké dans les catalogues systèmes, et l'autre de type <type>oid</type>,
      qui sera l'OID du catalogue système contenant les options. Le type de
      retour est inconnu&nbsp;; la fonction devrait indiquer les options
      invalides grâce à la fonction <function>ereport()</function>.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><literal>OPTIONS ( <replaceable class="PARAMETER">option</replaceable> '<replaceable class="PARAMETER">valeur</replaceable>' [, ... ] )</literal></term>
    <listitem>
     <para>
      Cette clause spécifie les options pour le nouveau wrapper de données
      distantes. Les noms et valeurs d'options autorisés sont spécifiques à
      chaque wrapper de données distantes. Ils sont validés par la
      bibliothèque du wrapper de données distantes. Les noms d'options doivent
      être uniques.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>

 <refsect1>
  <title>Notes</title>

  <para>
   Pour le moment, la fonctionnalité de wrapper de données distantes est très
   rudimentaire. Le but des wrappers de données distantes, des serveurs
   distants et des correspondances d'utilisateurs est de stocker cette
   information de manière standard, afin qu'elle puisse être interrogée par
   les applications intéressées. Une application utilisant cette fonctionnalité
   est <application>dblink</application>&nbsp;; voir <xref linkend="dblink"/>.
   La fonctionnalité permettant d'exécuter une requête sur des données distantes
   via une bibliothèque de wrapper de données distantes n'existe pas encore.
  </para>

  <para>
   Actuellement, une fonction de validation de wrapper de données distantes est
   disponible&nbsp;: <filename>postgresql_fdw_validator</filename>, qui accepte
   les options correspondant aux paramètres de connexion de
   <application>libpq</application>.
  </para>
 </refsect1>

 <refsect1>
  <title>Exemples</title>

  <para>
   Créer un wrapper de données distantes <literal>bidon</literal>&nbsp;:
<programlisting>
CREATE FOREIGN DATA WRAPPER bidon;
</programlisting>
  </para>

  <para>
   Créer un wrapper de données distantes <literal>postgresql</literal> avec
   la fonction de validation
   <literal>postgresql_fdw_validator</literal>&nbsp;:
<programlisting>
CREATE FOREIGN DATA WRAPPER postgresql VALIDATOR postgresql_fdw_validator;
</programlisting>
  </para>

  <para>
   Créer un wrapper de données distantes <literal>monwrapper</literal> avec des
   options&nbsp;:
<programlisting>
CREATE FOREIGN DATA WRAPPER monwrapper
    OPTIONS (debug 'true');
</programlisting>
  </para>
 </refsect1>

 <refsect1>
  <title>Compatibilité</title>

  <para>
   <command>CREATE FOREIGN DATA WRAPPER</command> est conforme à la norme
   ISO/IEC 9075-9 (SQL/MED), à l'exception de la clause
   <literal>VALIDATOR</literal> qui est une extension, et des clauses
   <literal>LIBRARY</literal> et <literal>LANGUAGE</literal> qui ne sont pas
   encore implémentées dans PostgreSQL.
  </para>

  <para>
   Notez, cependant, que la fonctionnalité SQL/MED n'est pas encore conforme
   dans son ensemble.
  </para>
 </refsect1>

 <refsect1>
  <title>Voir aussi</title>

  <simplelist type="inline">
   <member><xref linkend="sql-alterforeigndatawrapper" endterm="sql-alterforeigndatawrapper-title"/></member>
   <member><xref linkend="sql-dropforeigndatawrapper" endterm="sql-dropforeigndatawrapper-title"/></member>
   <member><xref linkend="sql-createserver" endterm="sql-createserver-title"/></member>
   <member><xref linkend="sql-createusermapping" endterm="sql-createusermapping-title"/></member>
  </simplelist>
 </refsect1>

</refentry>
