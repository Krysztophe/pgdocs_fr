<!--
$Header: /var/lib/cvs/pgsql-fr/sgml/ref/initdb.sgml,v 1.10 2005/09/15 07:03:27 guillaume Exp $
PostgreSQL documentation
-->

<refentry id="APP-INITDB">
 <refmeta>
  <refentrytitle id="APP-INITDB-TITLE">initdb</refentrytitle>
  <manvolnum>1</manvolnum>
  <refmiscinfo>Application</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>initdb</refname>
  <refpurpose>crée un nouveau groupe de bases de données
   <productname>PostgreSQL</productname></refpurpose>
 </refnamediv>

 <indexterm zone="app-initdb">
  <primary>initdb</primary>
 </indexterm>

 <refsynopsisdiv>
  <cmdsynopsis>
   <command>initdb</command>
   <arg rep="repeat"><replaceable>option</></arg>
   <group choice="plain">
    <arg>--pgdata </arg>
    <arg>-D </arg>
    <replaceable>répertoire</replaceable>
   </group>
  </cmdsynopsis>
 </refsynopsisdiv>

 <refsect1 id="R1-APP-INITDB-1">
  <title>
   Description
  </title>
  <para>
   <command>initdb</command> crée un nouveau groupe de bases de données
   <productname>PostgreSQL</productname>. Un groupe de bases de données est un
   ensemble de bases de données gérées par une seule instance du serveur.
  </para>

  <para>
   Créer un groupe de bases de données consiste en la création des répertoires
   dans lesquels sont stockées les données de la base de données, en la
   génération des tables partagées du catalogue (tables appartenant à tout le
   groupe plutôt qu'à une base de données particulière) et en la création des
   bases de données <literal>template1</literal> et <literal>postgres</literal>.
   Lorsque vous créerez plus tard une nouvelle base de données, tout ce qui se
   trouve dans la base de données <literal>template1</literal> est copié. (Du
   coup, tout ce qui est installé dans <literal>template1</literal> est
   automatiquement copié dans chaque base de données créée après.) La base de
   données <literal>postgres</literal> est une base de données par défaut
   utilisable par les utilisateurs, les outils et les applications externes.
  </para>

  <para>
   Bien qu'<command>initdb</command> tentera de créer le répertoire de données
   spécifié, il pourrait ne pas en avoir le droit si le répertoire parent du
   répertoire de données désiré appartient à root. Pour initialiser dans une
   telle configuration, créer un répertoire de données vide en tant que root,
   puis utilisez <command>chown</command> pour modifier son propriétaire avec
   le compte de l'utilisateur de la base de données. Enfin, utilisez
   <command>su</command> pour devenir l'utilisateur de la base de données et
   pouvoir ainsi exécuter <command>initdb</command>.
  </para>

  <para>
   <command>initdb</command> doit être exécuté en tant que l'utilisateur
   possédant le processus serveur parce que le serveur a besoin d'avoir accès
   aux fichiers et répertoires qu'<command>initdb</command> crée. Comme le
   serveur ne peut pas être exécuté en tant que root, vous ne devez pas non plus
   lancer <command>initdb</command> en tant que root. (En fait, il refuse de
   le faire.)
  </para>

  <para>
   <command>initdb</command> initialise la locale et le codage de l'ensemble
   de caractères par défaut du groupe de bases de données. L'ordre de tri
   (<literal>LC_COLLATE</>) et les classes d'ensembles de caractères
   (<literal>LC_CTYPE</>, c'est-à-dire upper (majuscule), lower (minuscule),
   digit (chiffres)) sont fixes pour toutes les bases de données et ne peuvent
   pas être modifiées. Les ordres de tri autres que <literal>C</> ou
   <literal>POSIX</> sont aussi moins performantes. Pour ces
   raisons, il est important de choisir la bonne locale lors de l'exécution
   d'<command>initdb</command>. Les catégories de locale restantes peuvent
   être modifiées plus tard lors du lancement du serveur. Toutes les valeurs
   de locales (<literal>lc_*</>) peuvent être affichées via <command>SHOW ALL</>.
   Vous trouverez plus de détails dans <xref linkend="locale">.
  </para>

  <para>
   L'encodage du jeu de caractères peut être configuré séparément pour
   une base de données lors de sa création. <command>initdb</command> détermine
   le codage pour la base de données <literal>template1</literal>, qui sert de
   valeur par défaut pour les autres bases de données. Pour modifier le codage par
   défaut, utilisez l'option <option>--encoding</option>. Plus de détails est
   disponible dans <xref linkend="multibyte">.
  </para>

 </refsect1>

 <refsect1>
  <title>Options</title>

   <para>
    <variablelist>
     <varlistentry>
      <term><option>-A <replaceable
	class="parameter">méthode_auth</replaceable></option></term>
      <term><option>--auth=<replaceable
	class="parameter">méthode_auth</replaceable></option></term>
      <listitem>
       <para>
        Cette option spécifie la méthode d'authentification pour les utilisateurs
	locaux dans <filename>pg_hba.conf</>. Ne pas utiliser <literal>trust</>
	sauf si vous avez confiance dans tous les utilisateurs locaux de votre
	système. <literal>Trust</> est la valeur par défaut pour faciliter
	l'installation.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-D <replaceable
	class="parameter">répertoire</replaceable></option></term>
      <term><option>--pgdata=<replaceable
	class="parameter">répertoire</replaceable></option></term>
      <listitem>
       <para>
        Cette option spécifie le répertoire où le groupe de bases 
        de données doit
	être stocké. Ceci est la seule information requise par
	<command>initdb</command> mais vous pouvez éviter de l'écrire en
	configurant la variable d'environnement <envar>PGDATA</envar>,
	proposition plus intéressante car le serveur de la base de données
	(<command>postmaster</command>) peut ensuite trouver le répertoire par
	cette même variable.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-E <replaceable
	class="parameter">codage</replaceable></option></term>
      <term><option>--encoding=<replaceable
	class="parameter">codage</replaceable></option></term>
      <listitem>
       <para>
        Sélectionne le codage de la base de données template. Ceci est aussi
	considéré comme le codage par défaut de toutes les bases de données
	créées ultérieurement sauf si vous le surchargez. La valeur par défaut
	est dérivée de la locale ou est <literal>SQL_ASCII</literal> si l'autre
	possibilité ne fonctionne pas. Les ensembles de caractères supportés
	par le serveur <productname>PostgreSQL</productname> sont décrits dans
	<xref linkend="multibyte-charset-supported">.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--locale=<replaceable>locale</replaceable></option></term>
      <listitem>
       <para>
        Configure la locale par défaut pour le groupe de bases de données. Si
	cette option n'est pas spécifiée, la locale est héritée de
	l'environnement d'exécution d'<command>initdb</command>. Le support des
	locales est décrit dans <xref linkend="locale">.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--lc-collate=<replaceable>locale</replaceable></option></term>
      <term><option>--lc-ctype=<replaceable>locale</replaceable></option></term>
      <term><option>--lc-messages=<replaceable>locale</replaceable></option></term>
      <term><option>--lc-monetary=<replaceable>locale</replaceable></option></term>
      <term><option>--lc-numeric=<replaceable>locale</replaceable></option></term>
      <term><option>--lc-time=<replaceable>locale</replaceable></option></term>

      <listitem>
       <para>
        Comme <option>--locale</option>, mais configure uniquement la locale
	dans la catégorie spécifiée.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-U <replaceable
	class="parameter">nomutilisateur</replaceable></option></term>
      <term><option>--username=<replaceable
	class="parameter">nomutilisateur</replaceable></option></term>
      <listitem>
       <para>
        Sélectionne le nom de l'utilisateur qui sera le superutilisateur de la
	base de données. Il a par défaut le nom de l'utilisateur lançant
	<command>initdb</command>. Le nom du superutilisateur n'est pas vraiment
	important mais vous pourriez souhaiter conserver le nom de
	<systemitem>postgres</systemitem> même si le nom de l'utilisateur du
	système est différent.
       </para>
      </listitem>
     </varlistentry>
 
     <varlistentry>
      <term><option>-W</option></term>
      <term><option>--pwprompt</option></term>
      <listitem>
       <para>
        Force <command>initdb</command> à demander un mot de passe pour le
	superutilisateur de la base de données. Si vous ne pensez pas
	utiliser d'authentification par mot de passe, ceci n'est pas important.
	Sinon, vous ne pourrez pas utiliser l'authentification par mot
	de passe tant que vous n'aurez pas configuré un mot de passe pour le
        surperutilisateur.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--pwfile=<replaceable>nomfichier</></option></term>
      <listitem>
       <para>
        Fait en sorte qu'<command>initdb</command> lise le mot de passe du
	superutilisateur à partir d'un fichier. La première ligne du ficher est
	le mot de passe.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </para>

   <para>
    D'autres paramètres, moins utilisés, sont disponibles&nbsp;:

    <variablelist>
     <varlistentry>
      <term><option>-d</option></term>
      <term><option>--debug</option></term>
      <listitem>
       <para>
	Affiche les informations de débogage du serveur de démarrage et 
	quelques autres messages de moindre intérêt pour le public général. Le
	serveur de démarrage est le programme qu'<command>initdb</command> lance
	pour créer les tables catalogues. Cette option génère une quantité
	énorme de messages ennuyeux.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-L <replaceable
	class="parameter">répertoire</replaceable></option></term>
      <listitem>
       <para>
        Spécifie où <command>initdb</command> doit trouver les fichiers
	d'entrée pour initialiser le groupe de données. Ceci n'est normalement
	pas nécessaire. Vous serez prévenu si vous avez besoin de spécifier leur
	emplacement de façon explicite.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-n</option></term>
      <term><option>--noclean</option></term>
      <listitem>
       <para>
	Par défaut, quand <command>initdb</command> détermine qu'une erreur
	l'empêche de créer complètement le groupe de bases de données, il
	supprime tous les fichiers qu'il a créés avant de se rendre
	compte qu'il ne peut pas finir son travail. Cette option désactive le
	nettoyage et est donc utile pour le débogage.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </para>

 </refsect1>

 <refsect1>
  <title>Environnement</title>

  <variablelist>
   <varlistentry>
    <term><envar>PGDATA</envar></term>

    <listitem>
     <para>
      Spécifie le répertoire où le groupe de bases de données doit être
      stocké&nbsp;; peut être surchargé en utilisant l'option
      <option>-D</option>.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>

 <refsect1>
  <title>Voir aussi</title>

  <simplelist type="inline">
   <member><xref linkend="app-postgres"></member>
   <member><xref linkend="app-postmaster"></member>
  </simplelist>
 </refsect1>

</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:"/usr/lib/sgml/catalog"
sgml-local-ecat-files:nil
End:
-->
