<?xml version="1.0" encoding="ISO-8859-15"?>
<!-- Dernière modification
     le       $Date$
     par      $Author$
     révision $Revision$ -->
<!-- SAS 20060622 -->

<refentry id="app-ipcclean">
 <refmeta>
  <refentrytitle id="app-ipcclean-title"><application>ipcclean</application></refentrytitle>
  <manvolnum>1</manvolnum>
  <refmiscinfo>Application</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>ipcclean</refname>
  <refpurpose>Supprimer la mémoire partagée et les sémaphores d'un serveur
  <productname>PostgreSQL</productname> victime d'un arrêt brutal</refpurpose>
 </refnamediv>

 <refsynopsisdiv>
  <cmdsynopsis>
   <command>ipcclean</command>
  </cmdsynopsis>
 </refsynopsisdiv>

 <refsect1 id="r1-app-ipcclean-1">
  <title>Description</title>
  <indexterm zone="app-ipcclean">
   <primary>ipcclean</primary>
  </indexterm>

  <para>
   <command>ipcclean</command> supprime tous les segments de mémoire partagée
   et les ensembles de sémaphores détenus par l'utilisateur courant. Cette commande
   permet de nettoyer le système après l'arrêt brutal d'un serveur
   <productname>PostgreSQL</productname> (<xref linkend="app-postgres"/>).
  </para>
  <para>
   Comme le redémarrage immédiat du serveur nettoie également la mémoire partagée et les sémaphores,
   cette commande n'a réellement que peu d'utilité.
  </para>

  <para>
   Seul l'administrateur de base de données peut exécuter ce
   programme. En effet, s'il est lancé en exécution multi-utilisateur,
   il peut être la cause d'un comportement bizarre du serveur (des plantages
   brutaux, par exemple). S'il est exécuté alors que le serveur est en cours d'exécution, la
   mémoire partagée et les sémaphores alloués par ce serveur sont supprimés,
   ce qui peut engendrer de graves conséquences pour le serveur.
  </para>
 </refsect1>

 <refsect1>
  <title>Notes</title>

  <para>
   Ce script est une astuce assez sale mais, depuis qu'il a été écrit (il y
   a bien longtemps), personne n'a proposé une solution aussi efficace et
   portable. Comme, dorénavant, le <command>postgres</command> effectue
   lui-même ce nettoyage, il est peu probable que <command>ipcclean</command> soit
   amélioré dans le futur.
  </para>

  <para>
   Le script fait des suppositions sur le format de sortie de l'outil 
   <command>ipcs</command>. Suppositions qui peuvent s'avérer erronées en fonction du système
   d'exploitation. Il est, de ce fait, possible qu'il ne fonctionne pas sur un système particulier.
   Il est toujours conseillé de lire le script avant de l'essayer.
  </para>
 </refsect1>

</refentry>
