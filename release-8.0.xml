<?xml version="1.0" encoding="UTF-8"?>
<!-- Dernière modification
     le       $Date: 2009-05-03 13:57:02 +0200 (dim. 03 mai 2009) $
     par      $Author: gleu $
     révision $Revision: 1317 $ -->

 <sect1 id="release-8-0-25">
  <title>Release 8.0.25</title>

  <note>
  <title>Release date</title>
  <simpara>2010-05-17</simpara>
  </note>

  <para>
   This release contains a variety of fixes from 8.0.24.
   For information about new features in the 8.0 major release, see
   <xref linkend="release-8-0"/>.
  </para>

  <para>
   The <productname>PostgreSQL</productname> community will stop releasing updates
   for the 8.0.X release series in July 2010.
   Users are encouraged to update to a newer release branch soon.
  </para>

  <sect2>
   <title>Migration to Version 8.0.25</title>

   <para>
    A dump/restore is not required for those running 8.0.X.
    However, if you are upgrading from a version earlier than 8.0.22,
    see the release notes for 8.0.22.
   </para>

  </sect2>

  <sect2>
   <title>Changes</title>

   <itemizedlist>

    <listitem>
     <para>
      Enforce restrictions in <literal>plperl</literal> using an opmask applied to
      the whole interpreter, instead of using <filename>Safe.pm</filename>
      (Tim Bunce, Andrew Dunstan)
     </para>

     <para>
      Recent developments have convinced us that <filename>Safe.pm</filename> is too
      insecure to rely on for making <literal>plperl</literal> trustable.  This
      change removes use of <filename>Safe.pm</filename> altogether, in favor of using
      a separate interpreter with an opcode mask that is always applied.
      Pleasant side effects of the change include that it is now possible to
      use Perl's <literal>strict</literal> pragma in a natural way in
      <literal>plperl</literal>, and that Perl's <literal>$a</literal> and <literal>$b</literal>
      variables work as expected in sort routines, and that function
      compilation is significantly faster.  (CVE-2010-1169)
     </para>
    </listitem>

    <listitem>
     <para>
      Prevent PL/Tcl from executing untrustworthy code from
      <structname>pltcl_modules</structname> (Tom)
     </para>

     <para>
      PL/Tcl's feature for autoloading Tcl code from a database table
      could be exploited for trojan-horse attacks, because there was no
      restriction on who could create or insert into that table.  This change
      disables the feature unless <structname>pltcl_modules</structname> is owned by a
      superuser.  (However, the permissions on the table are not checked, so
      installations that really need a less-than-secure modules table can
      still grant suitable privileges to trusted non-superusers.)  Also,
      prevent loading code into the unrestricted <quote>normal</quote> Tcl
      interpreter unless we are really going to execute a <literal>pltclu</literal>
      function.  (CVE-2010-1170)
     </para>
    </listitem>

    <listitem>
     <para>
      Do not allow an unprivileged user to reset superuser-only parameter
      settings (Alvaro)
     </para>

     <para>
      Previously, if an unprivileged user ran <literal>ALTER USER ... RESET
      ALL</literal> for himself, or <literal>ALTER DATABASE ... RESET ALL</literal> for
      a database he owns, this would remove all special parameter settings
      for the user or database, even ones that are only supposed to be
      changeable by a superuser.  Now, the <command>ALTER</command> will only
      remove the parameters that the user has permission to change.
     </para>
    </listitem>

    <listitem>
     <para>
      Avoid possible crash during backend shutdown if shutdown occurs
      when a <literal>CONTEXT</literal> addition would be made to log entries (Tom)
     </para>

     <para>
      In some cases the context-printing function would fail because the
      current transaction had already been rolled back when it came time
      to print a log message.
     </para>
    </listitem>

    <listitem>
     <para>
      Update pl/perl's <filename>ppport.h</filename> for modern Perl versions
      (Andrew)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix assorted memory leaks in pl/python (Andreas Freund, Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Prevent infinite recursion in <application>psql</application> when expanding
      a variable that refers to itself (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Ensure that <filename>contrib/pgstattuple</filename> functions respond to cancel
      interrupts promptly (Tatsuhito Kasahara)
     </para>
    </listitem>

    <listitem>
     <para>
      Make server startup deal properly with the case that
      <function>shmget()</function> returns <literal>EINVAL</literal> for an existing
      shared memory segment (Tom)
     </para>

     <para>
      This behavior has been observed on BSD-derived kernels including OS X.
      It resulted in an entirely-misleading startup failure complaining that
      the shared memory request size was too large.
     </para>
    </listitem>

    <listitem>
     <para>
      Update time zone data files to <application>tzdata</application> release 2010j
      for DST law changes in Argentina, Australian Antarctic, Bangladesh,
      Mexico, Morocco, Pakistan, Palestine, Russia, Syria, Tunisia;
      also historical corrections for Taiwan.
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-0-24">
  <title>Release 8.0.24</title>

  <note>
  <title>Release date</title>
  <simpara>2010-03-15</simpara>
  </note>

  <para>
   This release contains a variety of fixes from 8.0.23.
   For information about new features in the 8.0 major release, see
   <xref linkend="release-8-0"/>.
  </para>

  <para>
   The <productname>PostgreSQL</productname> community will stop releasing updates
   for the 8.0.X release series in July 2010.
   Users are encouraged to update to a newer release branch soon.
  </para>

  <sect2>
   <title>Migration to Version 8.0.24</title>

   <para>
    A dump/restore is not required for those running 8.0.X.
    However, if you are upgrading from a version earlier than 8.0.22,
    see the release notes for 8.0.22.
   </para>

  </sect2>

  <sect2>
   <title>Changes</title>

   <itemizedlist>

    <listitem>
     <para>
      Add new configuration parameter <varname>ssl_renegotiation_limit</varname> to
      control how often we do session key renegotiation for an SSL connection
      (Magnus)
     </para>

     <para>
      This can be set to zero to disable renegotiation completely, which may
      be required if a broken SSL library is used.  In particular, some
      vendors are shipping stopgap patches for CVE-2009-3555 that cause
      renegotiation attempts to fail.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix possible crashes when trying to recover from a failure in
      subtransaction start (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix server memory leak associated with use of savepoints and a client
      encoding different from server's encoding (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Make <function>substring()</function> for <type>bit</type> types treat any negative
      length as meaning <quote>all the rest of the string</quote> (Tom)
     </para>

     <para>
      The previous coding treated only -1 that way, and would produce an
      invalid result value for other negative values, possibly leading to
      a crash (CVE-2010-0442).
     </para>
    </listitem>

    <listitem>
     <para>
      Fix integer-to-bit-string conversions to handle the first fractional
      byte correctly when the output bit width is wider than the given
      integer by something other than a multiple of 8 bits (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix some cases of pathologically slow regular expression matching (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix the <literal>STOP WAL LOCATION</literal> entry in backup history files to
      report the next WAL segment's name when the end location is exactly at a
      segment boundary (Itagaki Takahiro)
     </para>
    </listitem>

    <listitem>
     <para>
      When reading <filename>pg_hba.conf</filename> and related files, do not treat
      <literal>@something</literal> as a file inclusion request if the <literal>@</literal>
      appears inside quote marks; also, never treat <literal>@</literal> by itself
      as a file inclusion request (Tom)
     </para>

     <para>
      This prevents erratic behavior if a role or database name starts with
      <literal>@</literal>.  If you need to include a file whose path name
      contains spaces, you can still do so, but you must write
      <literal>@"/path to/file"</literal> rather than putting the quotes around
      the whole construct.
     </para>
    </listitem>

    <listitem>
     <para>
      Prevent infinite loop on some platforms if a directory is named as
      an inclusion target in <filename>pg_hba.conf</filename> and related files
      (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix plpgsql failure in one case where a composite column is set to NULL
      (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Add <literal>volatile</literal> markings in PL/Python to avoid possible
      compiler-specific misbehavior (Zdenek Kotala)
     </para>
    </listitem>

    <listitem>
     <para>
      Ensure PL/Tcl initializes the Tcl interpreter fully (Tom)
     </para>

     <para>
      The only known symptom of this oversight is that the Tcl
      <literal>clock</literal> command misbehaves if using Tcl 8.5 or later.
     </para>
    </listitem>

    <listitem>
     <para>
      Prevent crash in <filename>contrib/dblink</filename> when too many key
      columns are specified to a <function>dblink_build_sql_*</function> function
      (Rushabh Lathia, Joe Conway)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix assorted crashes in <filename>contrib/xml2</filename> caused by sloppy
      memory management (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Update time zone data files to <application>tzdata</application> release 2010e
      for DST law changes in Bangladesh, Chile, Fiji, Mexico, Paraguay, Samoa.
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-0-23">
  <title>Release 8.0.23</title>

  <note>
  <title>Release date</title>
  <simpara>2009-12-14</simpara>
  </note>

  <para>
   This release contains a variety of fixes from 8.0.22.
   For information about new features in the 8.0 major release, see
   <xref linkend="release-8-0"/>.
  </para>

  <sect2>
   <title>Migration to Version 8.0.23</title>

   <para>
    A dump/restore is not required for those running 8.0.X.
    However, if you are upgrading from a version earlier than 8.0.22,
    see the release notes for 8.0.22.
   </para>

  </sect2>

  <sect2>
   <title>Changes</title>

   <itemizedlist>

    <listitem>
     <para>
      Protect against indirect security threats caused by index functions
      changing session-local state (Gurjeet Singh, Tom)
     </para>

     <para>
      This change prevents allegedly-immutable index functions from possibly
      subverting a superuser's session (CVE-2009-4136).
     </para>
    </listitem>

    <listitem>
     <para>
      Reject SSL certificates containing an embedded null byte in the common
      name (CN) field (Magnus)
     </para>

     <para>
      This prevents unintended matching of a certificate to a server or client
      name during SSL validation (CVE-2009-4034).
     </para>
    </listitem>

    <listitem>
     <para>
      Fix possible crash during backend-startup-time cache initialization (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Prevent signals from interrupting <literal>VACUUM</literal> at unsafe times
      (Alvaro)
     </para>

     <para>
      This fix prevents a PANIC if a <literal>VACUUM FULL</literal> is cancelled
      after it's already committed its tuple movements, as well as transient
      errors if a plain <literal>VACUUM</literal> is interrupted after having
      truncated the table.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix possible crash due to integer overflow in hash table size
      calculation (Tom)
     </para>

     <para>
      This could occur with extremely large planner estimates for the size of
      a hashjoin's result.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix very rare crash in <type>inet</type>/<type>cidr</type> comparisons (Chris
      Mikkelson)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix premature drop of temporary files used for a cursor that is accessed
      within a subtransaction (Heikki)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix PAM password processing to be more robust (Tom)
     </para>

     <para>
      The previous code is known to fail with the combination of the Linux
      <literal>pam_krb5</literal> PAM module with Microsoft Active Directory as the
      domain controller.  It might have problems elsewhere too, since it was
      making unjustified assumptions about what arguments the PAM stack would
      pass to it.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix rare crash in exception processing in PL/Python (Peter)
     </para>
    </listitem>

    <listitem>
     <para>
      Ensure <application>psql</application>'s flex module is compiled with the correct
      system header definitions (Tom)
     </para>

     <para>
      This fixes build failures on platforms where
      <literal>--enable-largefile</literal> causes incompatible changes in the
      generated code.
     </para>
    </listitem>

    <listitem>
     <para>
      Make the postmaster ignore any <literal>application_name</literal> parameter in
      connection request packets, to improve compatibility with future libpq
      versions (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Update time zone data files to <application>tzdata</application> release 2009s
      for DST law changes in Antarctica, Argentina, Bangladesh, Fiji,
      Novokuznetsk, Pakistan, Palestine, Samoa, Syria; also historical
      corrections for Hong Kong.
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-0-22">
  <title>Release 8.0.22</title>

  <note>
  <title>Release date</title>
  <simpara>2009-09-09</simpara>
  </note>

  <para>
   This release contains a variety of fixes from 8.0.21.
   For information about new features in the 8.0 major release, see
   <xref linkend="release-8-0"/>.
  </para>

  <sect2>
   <title>Migration to Version 8.0.22</title>

   <para>
    A dump/restore is not required for those running 8.0.X.
    However, if you have any hash indexes on <type>interval</type> columns,
    you must <command>REINDEX</command> them after updating to 8.0.22.
    Also, if you are upgrading from a version earlier than 8.0.6,
    see the release notes for 8.0.6.
   </para>

  </sect2>

  <sect2>
   <title>Changes</title>

   <itemizedlist>

    <listitem>
     <para>
      Disallow <command>RESET ROLE</command> and <command>RESET SESSION
      AUTHORIZATION</command> inside security-definer functions (Tom, Heikki)
     </para>

     <para>
      This covers a case that was missed in the previous patch that
      disallowed <command>SET ROLE</command> and <command>SET SESSION
      AUTHORIZATION</command> inside security-definer functions.
      (See CVE-2007-6600)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix handling of sub-SELECTs appearing in the arguments of
      an outer-level aggregate function (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix hash calculation for data type <type>interval</type> (Tom)
     </para>

     <para>
      This corrects wrong results for hash joins on interval values.
      It also changes the contents of hash indexes on interval columns.
      If you have any such indexes, you must <command>REINDEX</command> them
      after updating.
     </para>
    </listitem>

    <listitem>
     <para>
      Treat <function>to_char(..., 'TH')</function> as an uppercase ordinal
      suffix with <literal>'HH'</literal>/<literal>'HH12'</literal> (Heikki)
     </para>

     <para>
      It was previously handled as <literal>'th'</literal> (lowercase).
     </para>
    </listitem>

    <listitem>
     <para>
      Fix overflow for <literal>INTERVAL '<replaceable>x</replaceable> ms'</literal>
      when <replaceable>x</replaceable> is more than 2 million and integer
      datetimes are in use (Alex Hunsaker)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix calculation of distance between a point and a line segment (Tom)
     </para>

     <para>
      This led to incorrect results from a number of geometric operators.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <type>money</type> data type to work in locales where currency
      amounts have no fractional digits, e.g. Japan (Itagaki Takahiro)
     </para>
    </listitem>

    <listitem>
     <para>
      Properly round datetime input like
      <literal>00:12:57.9999999999999999999999999999</literal> (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix poor choice of page split point in GiST R-tree operator classes
      (Teodor)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix portability issues in plperl initialization (Andrew Dunstan)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <application>pg_ctl</application> to not go into an infinite loop if
      <filename>postgresql.conf</filename> is empty (Jeff Davis)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <filename>contrib/xml2</filename>'s <function>xslt_process()</function> to
      properly handle the maximum number of parameters (twenty) (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Improve robustness of <application>libpq</application>'s code to recover
      from errors during <command>COPY FROM STDIN</command> (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Avoid including conflicting readline and editline header files
      when both libraries are installed (Zdenek Kotala)
     </para>
    </listitem>

    <listitem>
     <para>
      Update time zone data files to <application>tzdata</application> release 2009l
      for DST law changes in Bangladesh, Egypt, Jordan, Pakistan,
      Argentina/San_Luis, Cuba, Jordan (historical correction only),
      Mauritius, Morocco, Palestine, Syria, Tunisia.
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-0-21">
  <title>Version 8.0.21</title>

  <note>
  <title>Date de version</title>
  <simpara>2009-03-16</simpara>
  </note>

  <para>
   Cette version contient des corrections de la version 8.0.20.
   Pour plus d'informations sur les nouvelles fonctionnalités de la
   version majeure 8.0, voir <xref linkend="release-8-0"/>.
  </para>

  <sect2>
   <title>Migration vers la version 8.0.21</title>

   <para>
    Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
    version 8.0.X. Néanmoins, si vous mettez à jour à partir d'une version
    antérieure à la 8.0.6, voir les notes de sortie de la 8.0.6.
   </para>

  </sect2>

  <sect2>
   <title>Modifications</title>

   <itemizedlist>

    <listitem>
     <para>
      Correction de crashs suite à des récursions erronées dûes à l'échec d'une
      conversion d'encodage (Tom)
     </para>

     <para>
      Cette modification étend les corrections réalisées lors des deux
      précédentes versions mineures pour les même scénarios. Les corrections
      déjà réalisées étaient ciblées sur les problèmes rencontrés, mais nous
      nous apercevons maintenant que <emphasis>toute</emphasis> erreur renvoyée
      par une fonction de conversion d'encodage pouvait entraîner une récursion
      infinie pour indiquer l'erreur. La solution est donc de désactiver toute
      traduction et conversion d'encodage. Le message d'erreur est renvoyé en
      ASCII simple si nous découvrons que nous sommes dans une situation
      susceptible d'entraîner une récursion infinie.
      (CVE-2009-0922)
     </para>
    </listitem>

    <listitem>
     <para>
      N'autorise plus <command>CREATE CONVERSION</command> avec les mauvais
      encodages pour la fonction de conversion spécifiée (Heikki)
     </para>

     <para>
      Ceci permet de prévenir un scénario possible pour un échec de conversion
      d'encodage. Le changement précédent permet de se protéger contre les
      autres échecs du même type.
     </para>
    </listitem>

    <listitem>
     <para>
      Correction d'un crash lorsque <function>to_char()</function> a pour
      argument des codes de format inappropriés pour la donnée en argument
      (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Ajout de <literal>MUST</literal> (Mauritius Island Summer Time) dans la
      liste par défaut des abréviations connues de fuseau horaire (Xavier
      Bugaud)
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-0-20">
  <title>Version 8.0.20</title>

  <note>
  <title>Date de version</title>
  <simpara>2009-02-02</simpara>
  </note>

  <para>
   Cette version contient des corrections de la version 8.0.19.
   Pour plus d'informations sur les nouvelles fonctionnalités de la
   version majeure 8.0, voir <xref linkend="release-8-0"/>.
  </para>

  <sect2>
   <title>Migration vers la version 8.0.20</title>

   <para>
    Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
    version 8.0.X. Néanmoins, si vous mettez à jour à partir d'une version
    antérieure à la 8.0.6, voir les notes de sortie de la 8.0.6.
   </para>

  </sect2>

  <sect2>
   <title>Modifications</title>

   <itemizedlist>

    <listitem>
     <para>
      Amélioration de la gestion des URL dans la fonction
      <function>headline()</function> (Teodor)
     </para>
    </listitem>

    <listitem>
     <para>
      Amélioration de la gestion des lignes trop longues dans la fonction
      <function>headline()</function> (Teodor)
     </para>
    </listitem>

    <listitem>
     <para>
      Empêche des échecs ou des mauvaises conversions avec Assert si une
      conversion d'encodage est créé avec la mauvaise fonction de conversion
      pour la paire spécifiée des encodages (Tom, Heikki)
     </para>
    </listitem>

    <listitem>
     <para>
      Évite un verrou inutile des petites tables dans <command>VACUUM</command>
      (Heikki)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction de variables non initialisées dans la fonction
      <function>get_covers()</function> de <filename>contrib/tsearch2</filename>
      (Teodor)
     </para>
    </listitem>

    <listitem>
     <para>
      Toute la documentation référence maintenant <literal>pgsql-bugs</literal>
      et/ou <literal>pgsql-hackers</literal>, au lieu des listes obsolètes comme
      <literal>pgsql-ports</literal> et <literal>pgsql-patches</literal> (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Mise à jour des fichiers de fuseaux horaires avec la version 2009a de
      <application>tzdata</application> (pour le Kathmandou et des corrections
      historiques de DST en Switzerland et à Cuba)
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-0-19">
  <title>Version 8.0.19</title>

  <note>
  <title>Date de sortie</title>
  <simpara>2008-11-03</simpara>
  </note>

  <para>
   Cette version contient des corrections de la version 8.0.18.
   Pour plus d'informations sur les nouvelles fonctionnalités de la
   version majeure 8.0, voir <xref linkend="release-8-0"/>.
  </para>

  <sect2>
   <title>Migration vers la version 8.0.19</title>

   <para>
    Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
    version 8.0.X. Néanmoins, si vous mettez à jour à partir d'une version
    antérieure à la 8.0.6, voir les notes de sortie de la 8.0.6.
   </para>

  </sect2>

  <sect2>
   <title>Modifications</title>

   <itemizedlist>

    <listitem>
     <para>
      Correction d'un crash du serveur lorsque l'encodage client ne peut pas
      représenter une version convertie du message d'erreur (Tom)
     </para>

     <para>
      Nous avons déjà corrigé des problèmes identiques dans le passé, mais le
      problème est toujours d'actualité si le message <quote>le caratère n'a
      pas d'équivalent</quote> ne peut pas être converti. La correction revient à
      désactiver la transformation et à renvoyer le message d'erreur en ASCII
      brut quand nous détectons cette situation.
     </para>
    </listitem>

    <listitem>
     <para>
      Correction d'un crash possible lorsque des fonctions profondément
      imbriquées sont appelées à partir d'un trigger (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      S'assure qu'une erreur est renvoyée quand une fonction trigger PL/pgsql
      nouvellement définie est appelée comme une fonction normale (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction de la génération du résumé (« headline ») par tsearch2 quand
      l'élément de la requête correspond au premier mot d'un texte (Sushant
      Sinha)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction de l'affichage de secondes fractionnées dans des valeurs
      d'intervalle lors de l'utilisation d'un style de date non ISO dans une
      construction ayant utilisé l'option <option>--enable-integer-datetimes</option>
      (Ron Mayer)
     </para>
    </listitem>

    <listitem>
     <para>
      S'assure que <function>SPI_getvalue</function> et <function>SPI_getbinval</function>
      fonctionnent correctement lorsque la ligne et le descripteur de ligne
      passés ont un nombre de colonnes différent (Tom)
     </para>

     <para>
      Cette situation est normale quand une table se voit ajouter ou supprimer
      des colonnes, mais ces deux fonctions ne le géraient pas correctement.
      La seule conséquence probable est l'envoi d'un message d'erreur erroné.
     </para>
    </listitem>

    <listitem>
     <para>
      Correction de l'analyse de <command>CREATE USER</command> par
      <application>ecpg</application> (Michael)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction d'une régression récente de <literal>pg_ctl restart</literal> (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Mise à jour des fichiers de données de fuseaux horaires vers la version
      2008i de <application>tzdata</application> (pour les modifications légales de DST en
      Argentine, au Brésil, à l'Île Maurice et en Syrie)
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-0-18">
  <title>Version 8.0.18</title>

  <note>
  <title>Date de sortie</title>
  <simpara>2008-09-22</simpara>
  </note>

  <para>
   This release contains a variety of fixes from 8.0.17.
   Pour plus d'informations sur les nouvelles fonctionnalités de la
   version majeure 8.0, voir <xref linkend="release-8-0"/>.
  </para>

  <sect2>
   <title>Migration vers la version 8.0.18</title>

   <para>
    Une sauvegarde/restauration n'est pas nécessaire aux utilisateurs de la version 8.0.X.
    However, if you are upgrading from a version earlier than 8.0.6,
    see the release notes for 8.0.6.
   </para>

  </sect2>

  <sect2>
   <title>Modifications</title>

   <itemizedlist>

    <listitem>
     <para>
      Widen local lock counters from 32 to 64 bits (Tom)
     </para>

     <para>
      This responds to reports that the counters could overflow in
      sufficiently long transactions, leading to unexpected <quote>lock is
      already held</quote> errors.
     </para>
    </listitem>

    <listitem>
     <para>
      Add checks in executor startup to ensure that the tuples produced by an
      <command>INSERT</command> or <command>UPDATE</command> will match the target table's
      current rowtype (Tom)
     </para>

     <para>
      <command>ALTER COLUMN TYPE</command>, followed by re-use of a previously
      cached plan, could produce this type of situation.  The check protects
      against data corruption and/or crashes that could ensue.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix datetime input functions to correctly detect integer overflow when
      running on a 64-bit platform (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Improve performance of writing very long log messages to syslog (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix bug in backwards scanning of a cursor on a <literal>SELECT DISTINCT
      ON</literal> query (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix planner to estimate that <literal>GROUP BY</literal> expressions yielding
      boolean results always result in two groups, regardless of the
      expressions' contents (Tom)
     </para>

     <para>
      This is very substantially more accurate than the regular <literal>GROUP
      BY</literal> estimate for certain boolean tests like <replaceable>col</replaceable>
      <literal>IS NULL</literal>.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix PL/Tcl to behave correctly with Tcl 8.5, and to be more careful
      about the encoding of data sent to or from Tcl (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix PL/Python to work with Python 2.5
     </para>

     <para>
      This is a back-port of fixes made during the 8.2 development cycle.
     </para>
    </listitem>

    <listitem>
     <para>
      Improve <application>pg_dump</application> and <application>pg_restore</application>'s
      error reporting after failure to send a SQL command (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <application>pg_ctl</application> to properly preserve postmaster
      command-line arguments across a <literal>restart</literal> (Bruce)
     </para>
    </listitem>

    <listitem>
     <para>
      Update time zone data files to <application>tzdata</application> release 2008f (for
      DST law changes in Argentina, Bahamas, Brazil, Mauritius, Morocco,
      Pakistan, Palestine, and Paraguay)
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-0-17">
  <title>Version 8.0.17</title>

  <note>
  <title>Date de sortie</title>
  <simpara>2008-06-12</simpara>
  </note>

  <para>
   This release contains one serious bug fix over 8.0.16.
   Pour plus d'informations sur les nouvelles fonctionnalités de la
   version majeure 8.0, voir <xref linkend="release-8-0"/>.
  </para>

  <sect2>
   <title>Migration vers la version 8.0.17</title>

   <para>
    Une sauvegarde/restauration n'est pas nécessaire aux utilisateurs de la version 8.0.X.
    However, if you are upgrading from a version earlier than 8.0.6,
    see the release notes for 8.0.6.
   </para>

  </sect2>

  <sect2>
   <title>Modifications</title>

   <itemizedlist>

    <listitem>
     <para>
      Make <function>pg_get_ruledef()</function> parenthesize negative constants (Tom)
     </para>

     <para>
      Before this fix, a negative constant in a view or rule might be dumped
      as, say, <literal>-42::integer</literal>, which is subtly incorrect: it should
      be <literal>(-42)::integer</literal> due to operator precedence rules.
      Usually this would make little difference, but it could interact with
      another recent patch to cause
      <productname>PostgreSQL</productname> to reject what had been a valid
      <command>SELECT DISTINCT</command> view query.  Since this could result in
      <application>pg_dump</application> output failing to reload, it is being treated
      as a high-priority fix.  The only released versions in which dump
      output is actually incorrect are 8.3.1 and 8.2.7.
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-0-16">
  <title>Version 8.0.16</title>

  <note>
  <title>Date de sortie</title>
  <simpara>never released</simpara>
  </note>

  <para>
   This release contains a variety of fixes from 8.0.15.
   Pour plus d'informations sur les nouvelles fonctionnalités de la
   version majeure 8.0, voir <xref linkend="release-8-0"/>.
  </para>

  <sect2>
   <title>Migration vers la version 8.0.16</title>

   <para>
    Une sauvegarde/restauration n'est pas nécessaire aux utilisateurs de la version 8.0.X.
    However, if you are upgrading from a version earlier than 8.0.6,
    see the release notes for 8.0.6.
   </para>

  </sect2>

  <sect2>
   <title>Modifications</title>

   <itemizedlist>

    <listitem>
     <para>
      Fix <command>ALTER TABLE ADD COLUMN ... PRIMARY KEY</command> so that the new
      column is correctly checked to see if it's been initialized to all
      non-nulls (Brendan Jurd)
     </para>

     <para>
      Previous versions neglected to check this requirement at all.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix possible <command>CREATE TABLE</command> failure when inheriting the
      <quote>same</quote> constraint from multiple parent relations that
      inherited that constraint from a common ancestor (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix conversions between ISO-8859-5 and other encodings to handle
      Cyrillic <quote>Yo</quote> characters (<literal>e</literal> and <literal>E</literal> with
      two dots) (Sergey Burladyan)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix a few datatype input functions
      that were allowing unused bytes in their results to contain
      uninitialized, unpredictable values (Tom)
     </para>

     <para>
      This could lead to failures in which two apparently identical literal
      values were not seen as equal, resulting in the parser complaining
      about unmatched <literal>ORDER BY</literal> and <literal>DISTINCT</literal>
      expressions.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix a corner case in regular-expression substring matching
      (<literal>substring(<replaceable>string</replaceable> from
      <replaceable>pattern</replaceable>)</literal>) (Tom)
     </para>

     <para>
      The problem occurs when there is a match to the pattern overall but
      the user has specified a parenthesized subexpression and that
      subexpression hasn't got a match.  An example is
      <literal>substring('foo' from 'foo(bar)?')</literal>.
      This should return NULL, since <literal>(bar)</literal> isn't matched, but
      it was mistakenly returning the whole-pattern match instead (ie,
      <literal>foo</literal>).
     </para>
    </listitem>

    <listitem>
     <para>
      Update time zone data files to <application>tzdata</application> release 2008c (for
      DST law changes in Morocco, Iraq, Choibalsan, Pakistan, Syria, Cuba,
      Argentina/San_Luis, and Chile)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix incorrect result from <application>ecpg</application>'s
      <function>PGTYPEStimestamp_sub()</function> function (Michael)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix core dump in <filename>contrib/xml2</filename>'s
      <function>xpath_table()</function> function when the input query returns a
      NULL value (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <filename>contrib/xml2</filename>'s makefile to not override
      <literal>CFLAGS</literal> (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <literal>DatumGetBool</literal> macro to not fail with <application>gcc</application>
      4.3 (Tom)
     </para>

     <para>
      This problem affects <quote>old style</quote> (V0) C functions that
      return boolean.  The fix is already in 8.3, but the need to
      back-patch it was not realized at the time.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix longstanding <command>LISTEN</command>/<command>NOTIFY</command>
      race condition (Tom)
     </para>

     <para>
      In rare cases a session that had just executed a
      <command>LISTEN</command> might not get a notification, even though
      one would be expected because the concurrent transaction executing
      <command>NOTIFY</command> was observed to commit later.
     </para>

     <para>
      A side effect of the fix is that a transaction that has executed
      a not-yet-committed <command>LISTEN</command> command will not see any
      row in <structname>pg_listener</structname> for the <command>LISTEN</command>,
      should it choose to look; formerly it would have.  This behavior
      was never documented one way or the other, but it is possible that
      some applications depend on the old behavior.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix rare crash when an error occurs during a query using a hash index
      (Heikki)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix input of datetime values for February 29 in years BC (Tom)
     </para>

     <para>
      The former coding was mistaken about which years were leap years.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <quote>unrecognized node type</quote> error in some variants of
      <command>ALTER OWNER</command> (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <application>pg_ctl</application> to correctly extract the postmaster's port
      number from command-line options (Itagaki Takahiro, Tom)
     </para>

     <para>
      Previously, <literal>pg_ctl start -w</literal> could try to contact the
      postmaster on the wrong port, leading to bogus reports of startup
      failure.
     </para>
    </listitem>

    <listitem>
     <para>
      Use <option>-fwrapv</option> to defend against possible misoptimization
      in recent <application>gcc</application> versions (Tom)
     </para>

     <para>
      This is known to be necessary when building <productname>PostgreSQL</productname>
      with <application>gcc</application> 4.3 or later.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix display of constant expressions in <literal>ORDER BY</literal>
      and <literal>GROUP BY</literal> (Tom)
     </para>

     <para>
      An explictly casted constant would be shown incorrectly.  This could
      for example lead to corruption of a view definition during
      dump and reload.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <application>libpq</application> to handle NOTICE messages correctly
      during COPY OUT (Tom)
     </para>

     <para>
      This failure has only been observed to occur when a user-defined
      datatype's output routine issues a NOTICE, but there is no
      guarantee it couldn't happen due to other causes.
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-0-15">
  <title>Version 8.0.15</title>

  <note>
  <title>Date de sortie</title>
  <simpara>2008-01-07</simpara>
  </note>

  <para>
   Cette version contient divers correctifs de la version 8.0.14,
   et inclut des corrections pour des failles de sécurité importantes.
   Pour plus d'informations sur les nouvelles fonctionnalités de la
   version majeure 8.0, voir <xref linkend="release-8-0"/>.
  </para>

  <para>
   Ceci est la dernière version 8.0.X pour laquelle la communauté
   <productname>PostgreSQL</productname> produira des paquets binaires pour
   <productname>Windows</productname>.
   Les utilisateurs Windows sont encouragés à migrer vers la version 8.2.X ou
   ultérieures car il existe des corrections spécifiques à Windows dans la
   version 8.2.X qui ne peuvent pas être portées aux anciennes versions. La
   8.0.X continuera à être supportée sur les autres plateformes.
  </para>

  <sect2>
   <title>Migration vers la version 8.0.15</title>

   <para>
    Les utilisateurs des versions 8.1.X n'ont pas besoin d'effectuer d'une
    étape de sauvegarde/restauration. Néamoins, si vous mettez à jour à partir
    d'une version précédant la version 8.0.6, voir les notes de version de la
    8.0.6.
   </para>

  </sect2>

  <sect2>
   <title>Modifications</title>

   <itemizedlist>

    <listitem>
     <para>
      Empêche les fonctions d'index de s'exécuter avec les droits de
      l'utilisateur exécutant <command>VACUUM</command>,
      <command>ANALYZE</command>, etc (Tom)
     </para>

     <para>
      Les fonctions utilisées dans les expressions d'index et dans les index
      partiels sont évaluées quand une nouvelle entrée est faite dans la table.
      Depuis longtemps, ceci est un risque, un cheval de Troie pouvant être
      exécuté si une personne modifie une table appartenant à un utilisateur
      à qui on ne peut faire confiance (Notez ques les triggers, valeurs par
      défaut, contraintes de vérification, etc posent le même type de risque.)
      Mais les fonctions utilisées dans des index sont un danger supplémentaire
      car ils seront exécutés par des opérations de maintenance périodiques
      comme un <command>VACUUM FULL</command>, opérations généralement
      exécutées par des super-utilisateurs. Donc, un utilisateur cherchant à
      gagner accès au système peut exécuter du code avec des droits de
      super-utilisateur en ajoutant une définition d'index avec un code de
      cheval de Troie, puis attendre la prochaine exécution des opérations de
      maintenance. La correction s'arrange pour que les opérations standards de
      maintenance (ceci incluant <command>VACUUM</command>,
      <command>ANALYZE</command>, <command>REINDEX</command> et
      <command>CLUSTER</command>) s'exécutent en tant que propriétaire de la
      table plutôt qu'en tant qu'appelent, en utilisant le même mécanisme de
      bascule de droits utilisé dans les fonctions <literal>SECURITY
      DEFINER</literal>. Pour empêcher un coutournement de cette mesure de
      sécurité, l'exécution de <command>SET SESSION AUTHORIZATION</command>
      et <command>SET ROLE</command> est maintenant interdit dans un contexte
      <literal>SECURITY DEFINER</literal>. (CVE-2007-6600)
     </para>
    </listitem>

    <listitem>
     <para>
      Répâration de bogues relatifs aux expressions rationnelles (Tom, Will
      Drewry)
     </para>

     <para>
      Des motifs d'expressions rationnelles conçus très précisément pourraient
      causer des arrêts brutaux, des boucles infinies (ou presque) et/ou une
      consommation massive de mémoire. Tout ceci représente un risque de
      déni de service pour les applications qui acceptent des motifs de
      recherche via des expressions rationnelles à partir de sources indignes
      de confiance. (CVE-2007-4769, CVE-2007-4772, CVE-2007-6067)
     </para>
    </listitem>

    <listitem>
     <para>
      Oblige l'utilisation de l'authentification par mot de passe pour les
      utilisateurs standards de <filename>/contrib/dblink</filename>, c'est
      une mesure de sécurité (Joe)
     </para>

     <para>
      La correction apparue dans 8.0.14 était incomplète, car il ne corrigeait
      la faille que pour certaines fonctions <filename>dblink</filename>. 
      (CVE-2007-6601, CVE-2007-3278)
     </para>
    </listitem>

    <listitem>
     <para>
      Mise à jour des fichiers de données de fuseaux horaires avec la version
      2007k de <application>tzdata</application> (en particulier, les
      modifications récentes en Argentine) (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction d'un échec du planificateur dans certaines cas de
      <literal>WHERE false AND var IN (SELECT ...)</literal> (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Préserve les paramètres du tablespace et de stockage des index qui sont
      reconstruits suite à un <command>ALTER TABLE ... ALTER COLUMN
      TYPE</command> (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fait que la restauration d'archive commence toujours une nouvelle
      timeline, plutôt que ne le faire que quand une heure d'arrêt de la
      restauration ne soit utilisée (Simon)
     </para>

     <para>
      Ceci évite un risque très particulier de tentative de ré-écriture sur
      une copie archivée existante du dernier journal de transaction. Cela
      semble plus simple et plus clair que la définition originale.
     </para>
    </listitem>

    <listitem>
     <para>
      Fait que le <command>VACUUM</command> n'utilise pas tout
      <varname>maintenance_work_mem</varname> quand la table est trop petite
      pour que cela soit utilisé (Alvaro)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction d'un arrêt brutal potentiel dans
      <function>translate()</function> lors de l'utilisation d'un encodage
      multi-octets de la base (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction de PL/Perl pour continuer l'exécution quand le langage Perl
      de la plateforme définit le type <literal>bool</literal> en tant que
      <literal>int</literal> plutôt qu'en tant que <literal>char</literal>
      (Tom)
     </para>

     <para>
      Bien que ceci peut arriver partout, aucune construction standard de Perl
      ne faisait cela... jusqu'à <productname>Mac OS X</productname> 10.5.
     </para>
    </listitem>

    <listitem>
     <para>
      Correction de PL/Python pour ne pas causer un arrêt brutal sur des
      messages d'exception longs (Alvaro)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction de <application>pg_dump</application> pour qu'il gère
      correctement les tables héritées qui ont des expressions par défaut
      différentes de celles de leur parents (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Corrections de l'analyseur <application>ecpg</application> (Michael)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction pour que <function>crosstab()</function>, du module
      <filename>contrib/tablefunc</filename>, gère les rowid NULL comme catégorie (Joe)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction des routines d'affichage de <type>tsvector</type> et
      <type>tsquery</type> pour échapper correctement les antislashs (Teodor,
      Bruce)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction d'un arrêt brutal de <function>to_tsvector()</function> sur
      les très grosses chaînes en entrée (Teodor)
     </para>
    </listitem>

    <listitem>
     <para>
      Nécessite l'utilisation d'une version spécifique
      d'<productname>Autoconf</productname> lors de la re-génération du script
      <command>configure</command> (Peter)
     </para>

     <para>
      Ceci affecte seulement les développeurs et les créateurs de package.
      La modification a pour but d'empêcher l'utilisation accidentelle de
      combinaisons non testées des versions d'<productname>Autoconf</productname>
      et de <productname>PostgreSQL</productname>. Vous pouvez supprimer la
      vérification de la version si vous voulez vraiment utiliser une version
      différente d'<productname>Autoconf</productname>, mais c'est de votre
      responsabilité.
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

  <sect1 id="release-8-0-14">
   <title>Version 8.0.14</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2007-09-17</simpara>
   </note>

   <para>
    Cette version contient divers correctifs de la version 8.0.13.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.0, voir <xref linkend="release-8-0"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.0.14</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.0.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.0.6, voir les notes de sortie de la 8.0.6.
    </para>

   </sect2>

   <sect2>
    <title>Modifications</title>

    <itemizedlist>

     <listitem>
      <para>
       <command>CREATE DOMAIN ... DEFAULT NULL</command> fonctionne
       correctement (Tom)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       la journalisation excessive des messages d'erreur <acronym>SSL</acronym>
       est corrigée (Tom)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       la journalisation est corrigée de sorte que les messages ne sont plus
       entremêlés lorsque syslog est utilisé (Andrew)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       le plantage lorsque la journalisation de
       <varname>log_min_error_statement</varname> n'a plus de mémoire
       disponible est corrigé (Tom)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       la gestion incorrecte de certains cas limites de clés étrangères est
       corrigée (Tom)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       <command>CLUSTER</command> ne plante
       plus en tentant de travailler sur les tables temporaires d'autres
       sessions (Alvaro)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       les règles de la base de données concernant les fuseaux horaires, en
       particulier les changements prévus pour la Nouvelle-Zélande, sont mises
       à jour (Tom)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       les sockets et sémaphores Windows sont améliorés (Magnus)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       le nom du fuseau horaire (<literal>%Z</literal>) dans les estampilles
       temporelles des journaux sous Windows sont supprimés parce qu'il peut y
       avoir des incompatibilités d'encodage (Tom)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       les utilisateurs dépourvus de droit superutilisateur qui utilisent 
       <filename>/contrib/dblink</filename> ne peuvent utiliser que
       l'authentification par mot de passe, pour des raisons de sécurité
       (Joe).
      </para>
     </listitem>

    </itemizedlist>

   </sect2>
  </sect1>

  <sect1 id="release-8-0-13">
   <title>Version 8.0.13</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2007-04-23</simpara>
   </note>

   <para>
    Cette version contient quelques corrections de la 8.0.12, dont la
    correction d'une faille de sécurité.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.0, voir <xref linkend="release-8-0"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.0.13</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.0.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.0.6, voir les notes de sortie de la 8.0.6.
    </para>

   </sect2>

   <sect2>
    <title>Modifications</title>

    <itemizedlist>

     <listitem>
     <para>
      Supporte le placement explicite du schéma des tables temporaires dans
      <varname>search_path</varname>, et désactive sa recherche pour les fonctions
      et opérateurs (Tom)
     </para>
     <para>
      Ceci est nécessaire pour autoriser une fonction en mode security-definer
      à configurer une valeur sécurisée de <varname>search_path</varname>. Sans cela,
      un utilisateur SQL sans droit peut utiliser des objets temporaires pour
      exécuter du code avec une fonction possédant les droits du créateur de
      la fonction (CVE-2007-2138). Voir <command>CREATE FUNCTION</command> pour plus
      d'informations.
     </para>
     </listitem>

     <listitem>
     <para>
      Correction d'arrêts brutaux dans <filename>/contrib/tsearch2</filename> (Teodor)
     </para>
     </listitem>

     <listitem>
     <para>
      Correction d'un bogue pouvant corrompre des données dans la façon
      dont <command>VACUUM FULL</command> gère les chaînes <command>UPDATE</command>
      (Tom, Pavan Deolasee)
     </para>
     </listitem>

     <listitem>
     <para>
      Correction d'un PANIC lors de l'élargissement d'un index haché
      (bug introduit en 7.4.15) (Tom)
     </para>
     </listitem>

     <listitem>
     <para>
      Correction des spécifications des fuseaux horaires POSIX
      pour suivre les nouvelles règles USA DST (Tom)
     </para>
     </listitem>

    </itemizedlist>

   </sect2>
  </sect1>

  <sect1 id="release-8-0-12">
   <title>Version 8.0.12</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2007-02-07</simpara>
   </note>

   <para>
    Cette version contient une correction de la 8.0.11.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.0, voir <xref linkend="release-8-0"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.0.12</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.0.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.0.6, voir les notes de sortie de la 8.0.6.
    </para>

   </sect2>

   <sect2>
    <title>Modifications</title>

    <itemizedlist>

     <listitem>
     <para>
      Suppression d'une vérification trop restrictive pour la longueur du type
      dans les contraintes et les index fonctionnels (Tom)
     </para>
     </listitem>

    </itemizedlist>

   </sect2>
  </sect1>

  <sect1 id="release-8-0-11">
   <title>Version 8.0.11</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2007-02-05</simpara>
   </note>

   <para>
    Cette version contient quelques corrections de la 8.0.10, dont la
    correction d'une faille de sécurité.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.0, voir <xref linkend="release-8-0"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.0.11</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.0.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.0.6, voir les notes de sortie de la 8.0.6.
    </para>

   </sect2>

   <sect2>
    <title>Modifications</title>

    <itemizedlist>

     <listitem>
     <para>
      Suppression d'une faille de sécurité qui permet à des utilisateurs
      connectés de lire la mémoire du serveur (backend)
      (Tom)
     </para>
     <para>
      Cette vulnérabilité implique de modifier le type de données de la
      colonne d'une table utilisée dans une fonction SQL (CVE-2007-0555).
      Cette erreur peut être facilement exploitée pour causer un arrêt brutal
      du serveur et pourrait être utilisée, en principe, pour lire un contenu
      de la base, contenu que l'utilisateur ne devrait pas pouvoir accéder.
     </para>
     </listitem>

     <listitem>
     <para>
      Correction d'un bogue rare où la séparation de page d'un index btree
      pourrait échouer à cause du choix d'un point de séparation infaisable.
      (Heikki Linnakangas)
     </para>
     </listitem>

     <listitem>
     <para>
      Correction d'un bogue rare dans Assert() déclenché par <literal>UNION</literal> (Tom)
     </para>
     </listitem>

     <listitem>
     <para>
      Amélioration de la sécurité du traitement de caractères multi-octets pour
      les séquences UTF8 de plus de trois octets  (Tom)
     </para>
     </listitem>

    </itemizedlist>

   </sect2>
  </sect1>

  <sect1 id="release-8-0-10">
   <title>Version 8.0.10</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2007-01-08</simpara>
   </note>

   <para>
    Cette version contient quelques corrections de la 8.0.9.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.0, voir <xref linkend="release-8-0"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.0.10</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.0.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.0.6, voir les notes de sortie de la 8.0.6.
    </para>

   </sect2>

   <sect2>
    <title>Modifications</title>

    <itemizedlist>

     <listitem>
      <para>
       Amélioration de la gestion de <function>getaddrinfo()</function> sur AIX
       (Tom)
      </para>

      <para>
       Ceci corrige un problème lors du lancement, entre autres, du récupérateur
       de statistiques.
      </para>
     </listitem>

      <listitem>
       <para>
        Correction des erreurs <quote>failed to re-find parent key</quote> du
        <command>VACUUM</command> (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Correction d'un cas rare de tronquage d'une grosse relation à la limite
	du Go par <command>VACUUM</command> (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Corrections de bogues affectant les index hash de plusieurs Go (Tom)
       </para>
      </listitem>

     <listitem>
      <para>
       Correction d'un possible blocage mortel dans la gestion des signaux sous
       Windows (Teodor)
      </para>
     </listitem>

     <listitem>
      <para>
       Correction de l'erreur lors de la construction d'un
       <literal>ARRAY[]</literal> contenant plusieurs éléments vides (Tom)
      </para>
     </listitem>

     <listitem>
      <para>
       Correction d'une perte mémoire dans ecpg lors d'une connexion (Michael)
      </para>
     </listitem>

     <listitem>
      <para>
       <function>to_number()</function> et <function>to_char(numeric)</function>
       sont maintenant <literal>STABLE</literal>, et non plus
       <literal>IMMUTABLE</literal>, pour les nouvelles installations
       (<application>initdb</application> nécessaire) (Tom)
      </para>

      <para>
       Ceci a été modifié car <literal>lc_numeric</literal> peut modifier la
       sortie de ces fonctions.
      </para>
     </listitem>

     <listitem>
      <para>
       Amélioration de l'utilisation des expressions rationnelles qui utilisent
       des parenthèses (Tom)
      </para>

      <para>
       Ceci améliore aussi les performances de l'<literal>\d</literal> de
       <application>psql</application>.
      </para>
     </listitem>

     <listitem>
      <para>
       Mise à jour de la base des fuseaux horaires
      </para>

      <para>
       Ceci affecte les règles de changements d'heure en Australie et au Canada.
      </para>
     </listitem>

    </itemizedlist>

   </sect2>
  </sect1>

  <sect1 id="release-8-0-9">
   <title>Version 8.0.9</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2006-10-16</simpara>
   </note>

   <para>
    Cette version contient quelques corrections de la 8.0.8.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.0, voir <xref linkend="release-8-0"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.0.9</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.0.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.0.6, voir les notes de sortie de la 8.0.6.
    </para>

   </sect2>

   <sect2>
    <title>Modifications</title>

<itemizedlist>
<listitem><para>Correction d'un arrêt brutal lors du référencement de valeurs
  de <literal>NEW</literal> dans les expressions WHERE de règle (Tom)</para></listitem>
<listitem><para>Correction d'un <quote>core dump</quote> quand un litéral sans
  type est pris pour un ANYARRAY</para></listitem>
<listitem><para>Correction d'une mauvaise gestion des déclencheurs après quand
  une requête contient une fonction SQL renvoyant plusieurs lignes
  (Tom)</para></listitem>
<listitem><para>Correction de <command>ALTER TABLE ... TYPE</command> pour qu'il vérifie
<literal>NOT NULL</literal> dans une clause <literal>USING</literal> (Tom)</para></listitem>
<listitem><para>Correction de <function>string_to_array()</function> pour gérer des
  correspondances se surchargeant pour la chaîne de séparation</para>
<para>Par exemple, <literal>string_to_array('123xx456xxx789', 'xx')</literal>.
</para></listitem>
<listitem><para>Correction de quelques cas rares dans la correspondance de modèles
  pour les commandes <literal>\d</literal> de <application>psql</application></para></listitem>
<listitem><para>Correction de bogues corrompant les index dans /contrib/ltree
  (Teodor)</para></listitem>
<listitem><para>Nombreuses corrections de fiabilité dans <application>ecpg</application> (Joachim
Wieland)</para></listitem>
<listitem><para>Correction de l'échappement des antislashs dans /contrib/dbmirror</para></listitem>
<listitem><para>Correction de l'instabilité de la récupération de statistiques
  sur Win32 (Tom, Andrew)</para></listitem>
<listitem><para>Corrections pour les compilateurs <systemitem class="osname">AIX</systemitem> et
<productname>Intel</productname> (Tom)</para></listitem>
</itemizedlist>

   </sect2>
  </sect1>

  <sect1 id="release-8-0-8">
   <title>Version 8.0.8</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2006-05-23</simpara>
   </note>

   <para>
    Cette version contient quelques corrections de la 8.0.7 incluant des
    correctifs pour des problèmes de sécurité extrêmement sérieux.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.0, voir <xref linkend="release-8-0"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.0.8</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.0.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.0.6, voir les notes de sortie de la 8.0.6.
    </para>

    <para>
     Assurer une sécurité complète contre les attaques par injection SQL décrites
     dans CVE-2006-2313 et CVE-2006-2314 peuvent demander des modifications dans
     le code de l'application. Si vous avez des applications embarquant des
     chaînes non sûres dans des commandes SQL, vous devriez les examiner aussi
     rapidement que possible pour vous assurer qu'elles utilisent les techniques
     d'échappement recommandées. Dans la plupart des cas, les applications
     devraient utiliser des sous-routines fournies par des bibliothèques ou des
     pilotes (comme <function>PQescapeStringConn()</function> de <application>libpq</application>)
     pour réaliser l'échappement des chaînes plutôt que de se fier à un code
     <foreignphrase>ad hoc</foreignphrase>.
    </para>
   </sect2>

   <sect2>
    <title>Modifications</title>

<itemizedlist>
<listitem><para>Modification du serveur pour qu'il rejette les caractères
multi-octets mal codés dans tous les cas (Tatsuo, Tom)</para>
<para>Bien que <productname>PostgreSQL</productname> va dans cette direction depuis un
certain temps, les vérifications sont maintenant appliquées uniformément à
tous les codages et toutes les entrées de texte. Ce sont maintenant des
erreurs, et non plus des messages d'avertissement. Ce changement sert à se
défendre contre les attaques à base d'injection SQL du type décrit dans
CVE-2006-2313.
</para></listitem>

<listitem><para>Rejette des utilisations non sûres de <literal>\'</literal> dans les
chaînes</para>
<para>En tant que défense côté serveur contre les attaques de type injection
SQL décrit dans CVE-2006-2314, le serveur accepte maintenant seulement
<literal>''</literal> et plus <literal>\'</literal> comme représentation d'un guillemet simple
ASCII dans des chaînes SQL. Par défaut, <literal>\'</literal> est rejetté seulement
quand <varname>client_encoding</varname> est configuré avec un codage client seul
(SJIS, BIG5, GBK, GB18030 ou UHC), qui est le scénario dans lequel l'injection
SQL est possible. Un nouveau paramètre de configuration
<varname>backslash_quote</varname> est disponible pour ajuster ce comportement si
nécessaire. Notez qu'une sécurité complète contre
CVE-2006-2314 pourrait nécessiter des modifications du côté client&nbsp;; le but
de <varname>backslash_quote</varname> est en partie de rendre évident que les clients
non sécurisés sont non sécurisés.
</para></listitem>

<listitem><para>Modification des routines d'échappement de texte de
<application>libpq</application> pour le rendre conscient des considérations de
codage</para>
<para>Ceci corrige les applications utilisant <application>libpq</application> pour les
problèmes de sécurité décrits dans CVE-2006-2313 et CVE-2006-2314. Les
applications qui utilisent les connections concurrentes multiples de
<productname>PostgreSQL</productname> devraient migrer vers <function>PQescapeStringConn()</function>
et <function>PQescapeByteaConn()</function> pour s'assurer que l'échappement est
réalisé correctement pour les paramétrages utilisés dans chaque connexion de
base de données. Les applications qui font des échappements de chaînes
<quote>à la main</quote> devraient être modifiées pour se fier à aux routines de la
bibliothèques à la place.
</para></listitem>

<listitem><para>Correction de quelques fonctions de conversion de codage</para>
<para><function>win1251_to_iso</function>, <function>alt_to_iso</function>,
<function>euc_tw_to_big5</function>, <function>euc_tw_to_mic</function>,
<function>mic_to_euc_tw</function> étaient toutes cassées à différents niveaux.
</para></listitem>

<listitem><para>Nettoyage des utilisations restantes et parasites de 
<literal>\'</literal> dans les chaînes (Bruce, Jan)</para></listitem>

<listitem><para>Correction d'un bogue qui a quelque fois empêché des parcours
d'index OR de ramener les lignes adéquates</para></listitem>

<listitem><para>Correction d'un replay WAL pour le cas où un index btree a été
tronqué</para></listitem>

<listitem><para>Correction de <literal>SIMILAR TO</literal> pour les modèles impliquant
<literal>|</literal> (Tom)</para></listitem>

<listitem><para>Correction de <command>SELECT INTO</command> et <command>CREATE TABLE AS</command>
pour créer des tables dans le tablespace par défaut, et non pas dans le répertoire
base (Kris Jurka)</para></listitem>

<listitem><para>Correction du serveur pour qu'il utilise les paramètres
personnalisés DH SSL correctement (Michael Fuhr)</para></listitem>

<listitem><para>Correction de Bonjour pour les Intel Macs (Ashley Clark)</para></listitem>

<listitem><para>Correction de quelques pertes mémoires mineures</para></listitem>

<listitem><para>Correction d'un problème pour la demande du mot de passe sur
certains systèmes Win32 (Robert Kinberg)</para></listitem>
</itemizedlist>

   </sect2>
  </sect1>
  <sect1 id="release-8-0-7">
   <title>Version 8.0.7</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2006-02-14</simpara>
   </note>

   <para>
    Cette version contient quelques corrections de la 8.0.6.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.0, voir <xref linkend="release-8-0"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.0.7</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.0.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.0.6, voir les notes de sortie de la 8.0.6.
    </para>
   </sect2>

   <sect2>
    <title>Modifications</title>

<itemizedlist>

<listitem><para>Correction d'un arrêt brutal potentiel dans <command>SET
SESSION AUTHORIZATION</command> (CVE-2006-0553)</para>
<para>Un utilisateur non privilégié pourrait faire arrêter brutalement le
processus serveur, résultant en un déni de service momentané pour les autres
utilisateurs si le serveur a été compilé en activant les assertions (ce qui
n'est pas la valeur par défaut).
Merci à Akio Ishida pour nous avoir rapporté ce problème.
</para></listitem>

<listitem><para>Correction d'un bogue avec la logique de visibilité des
lignes dans les lignes insérées soi-même (Tom)</para>
<para>Dans des circonstances rares, une ligne insérée par la commande en cours
pourrait déjà être vue comme valide alors qu'elle ne le devrait pas. Corrige
un bogue ajoutée dans les versions 8.0.4, 7.4.9 et 7.3.11.
</para></listitem>

<listitem><para>Correction d'une condition qui pourrait amener une erreur de type
<quote>le fichier existe déjà</quote> lors de la création d'un fichier pg_clog
(Tom)</para></listitem>

<listitem><para>Correction des cas pouvant amener des arrêts brutaux si un
message d'invalidation de cache arrive juste au mauvais moment (Tom)</para></listitem>

<listitem><para>Vérification correcte des contraintes <literal>DOMAIN</literal> pour
les paramètres <literal>UNKNOWN</literal> dans les instructions préparées
(Neil)</para></listitem>

<listitem><para>S'assure que <command>ALTER COLUMN TYPE</command> traitera les
contraintes <literal>FOREIGN KEY</literal>, <literal>UNIQUE</literal> et
<literal>PRIMARY KEY</literal> dans le bon ordre (Nakano Yoshihisa)</para></listitem>

<listitem><para>Correction pour permettre la restauration de sauvegardes qui
avaient des références croisées de schémas pour les opérateurs personnalisés
(Tom)</para></listitem>

<listitem><para>Autorise <application>pg_restore</application> à continuer tranquillement
après un échec de <command>COPY</command>&nbsp;; auparavant, il essayait de traiter
les données restantes du <command>COPY</command> comme des commandes SQL (Stephen
Frost)</para></listitem>

<listitem><para>Correction du bogue <literal>unregister</literal> de
<application>pg_ctl</application> quand le répertoire des données n'est pas
spécifié (Magnus)</para></listitem>

<listitem><para>Correction du bogue sur <application>ecpg</application> pour AMD64 et
PPC (Neil)</para></listitem>

<listitem><para>Récupère proprement si une erreur survient lors du passage
des arguments en <application>PL/python</application> (Neil)</para></listitem>

<listitem><para>Correction de la gestion des locales par <application>PL/perl</application>
sur Win32 pour correspondre au moteur (Andrew)</para></listitem>

<listitem><para>Correction d'un bogue quand <literal>log_min_messages</literal> est
configuré à <literal>DEBUG3</literal> ou plus bas dans le fichier <filename>postgresql.conf</filename>
sur Win32 (Bruce)</para></listitem>

<listitem><para>Correction l'option <literal>-L</literal> de spécification du chemin
des bibliothèques de <application>pgxs</application> pour Win32, Cygwin, OS X, AIX
(Bruce)</para></listitem>

<listitem><para>Vérification de l'activation de SID lors de la vérification
des droits administrateur sous Win32 (Magnus)</para></listitem>

<listitem><para>Rejette proprement les données de type date en dehors de la
plage (Kris Jurka)</para></listitem>

<listitem><para>Correction de portabilité pour tester la présence de
<function>finite</function> et <function>isinf</function> lors du configure (Tom)</para></listitem>


</itemizedlist>

   </sect2>
  </sect1>

  <sect1 id="release-8-0-6">
   <title>Version 8.0.6</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2006-01-09</simpara>
   </note>

   <para>
    Cette version contient quelques corrections de la version 8.0.5.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.0, voir <xref linkend="release-8-0"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.0.6</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.0.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.0.3, voir les notes de sortie de la 8.0.3.
     De plus, vous aurez sûrement besoin de lancer la commande
     <command>REINDEX</command> sur les index des colonnes de type texte après la
     mise à jour si vous êtes affectés par les problèmes de locale ou de
     <application>plperl</application> décrits ci-dessous.
    </para>
   </sect2>

   <sect2>
    <title>Modifications</title>

<itemizedlist>

<listitem><para>Correction d'un code Windows de façon à ce que postmaster
continue au lieu de quitter s'il n'y a plus de place dans
ShmemBackendArray (Magnus)</para>
<para>Le comportement précédent pouvait amener à une situation de déni de
service si trop de demandes de connexion arrivaient en même temps. Ceci
s'applique <emphasis>seulement</emphasis> au port Windows.</para></listitem>

<listitem><para>Correction d'un bogue introduit dans la version 8.0 permettant à
ReadBuffer de renvoyer une page déjà utilisée comme nouvelle, causant
potentiellement des pertes de données récemment validées (Tom)</para></listitem>

<listitem><para>Correction des messages Describe au niveau protocole lancés
de l'extérieur d'une transaction ou à partir d'une transaction échouée
(Tom)</para></listitem>

<listitem><para>Correction de la comparaison de chaînes de caractères pour les
locales qui considèrent des combinaisons différentes de caractères comme égales,
comme le hongrois (Tom)</para>
<para>Ceci pourrait nécessiter l'exécution de la commande <command>REINDEX</command>
pour corriger les index existants sur des colonnes de type texte.</para></listitem>

<listitem><para>Configuration des variables d'environnement de la locale lors
du démarrage de postmaster pour s'assurer que <application>plperl</application> ne
changera pas de locale après</para>
<para>Ceci corrige un problème qui survenait si le <application>postmaster</application>
était lancé avec les variables d'environnement spécifiant une locale différente
que celle indiquée par <application>initdb</application>. Sous ces conditions, toute
utilisation de <application>plperl</application> pouvait amener une corruption des index.
Vous pourriez avoir besoin de lancer <command>REINDEX</command> pour corriger des
index existant sur des colonnes de type texte si cela vous arrivait.
</para></listitem>

<listitem><para>Permet un déplacement plus simple des répertoires d'installation
(Tom)</para>
<para>Les anciennes versions supportaient seulement un déplacement si tous les
chemins d'installation étaient identiques sauf pour le dernier composant.
</para></listitem>

<listitem><para>Correction d'un ancien bogue dans strpos() et dans le gestion
des expressions rationnelles de certains ensembles de caractères asiatiques
rarement utilisés (Tatsuo)
</para></listitem>

<listitem><para>Quelques corrections pour les fonctions renvoyant <literal>RECORD</literal>
(Tom) </para></listitem>

<listitem><para>Correction d'un bogue dans gen_salt de <filename>/contrib/pgcrypto</filename>,
qui l'empêchait d'utiliser l'espace disponible des grains de sel (salt) pour les
algorithmes MD5 et XDES (Marko Kreen, Solar Designer)</para>
<para>Les grains de sel ne sont pas affectés pour Blowfish et le DES
standard.</para></listitem>

<listitem><para>Correction de <filename>/contrib/dblink</filename> pour renvoyer une
erreur plutôt que de s'arrêter brutalement quand le nombre de colonnes spécifié
est différent de ce qui est réellement renvoyé par la requête (Joe)</para></listitem>
</itemizedlist>

   </sect2>
  </sect1>
 
  <sect1 id="release-8-0-5">
   <title>Version 8.0.5</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2005-12-12</simpara>
   </note>

   <para>
    Cette version contient quelques corrections sur la 8.0.4.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.0, voir <xref linkend="release-8-0"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.0.5</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.0.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.0.3, voir les notes de sortie de la 8.0.3.
    </para>
   </sect2>

   <sect2>
    <title>Modifications</title>

<itemizedlist>

<listitem><para>Correction d'un cas extrême dans la gestion des traces des
transactions</para>
<para>Il existait une petite possibilité pour laquelle une opération
d'entrée/sortie pouvait être initiée pour la mauvaise page, amenant à un
échec Assert ou à une corruption de données.</para>
</listitem>

<listitem><para>Correction des problèmes du processus d'écriture en tâche de
fond après avoir récupéré des erreurs (Tom)</para>
<para>
Le processus d'écriture en tâche de fond was found to leak buffer pins after write errors.
Bien que non fatal en soi, ceci pourrait amener des blocages mystérieux sur des
commandes VACUUM ultérieures.
</para>
</listitem>

<listitem><para>Empêche un échec si le client envoie un message de protocole
Bind quand la transaction en cours est déjà annulée</para></listitem>

<listitem><para>Corrections sur <filename>/contrib/ltree</filename> (Teodor)</para></listitem>

<listitem><para>Corrections de compilation sur AIX et HPUX (Tom)</para></listitem>

<listitem><para>Tente de nouveau les lectures et écritures de fichiers après
une erreur NO_SYSTEM_RESOURCES sous Windows (Qingqing Zhou)</para></listitem>

<listitem><para>Correction d'un échec intermittent quand <varname>log_line_prefix</varname>
inclut <literal>%i</literal></para></listitem>

<listitem><para>Correction du problème de performance de <application>psql</application>
avec les scripts longs sur Windows (Merlin Moncure)</para></listitem>

<listitem><para>Correction de mises à jour manquantes du fichier
<filename>pg_group</filename></para></listitem>

<listitem><para>Correction d'une vieille erreur sur les jointures externes</para>
<para>Ce bogue a quelque fois causé une fausse erreur <quote>RIGHT JOIN is
only supported with merge-joinable join conditions</quote>.</para></listitem>

<listitem><para>Retardait l'initialisation du fuseau horaire jusqu'à la création
du fichier <filename>postmaster.pid</filename></para>
<para>Ceci évite la confusion des scripts de démarrage qui s'attendent à voir
apparaître rapidement le fichier pid.</para></listitem>

<listitem><para>Empêchement d'un arrêt brutal dans <application>pg_autovacuum</application>
quand une table a été supprimée</para></listitem>

<listitem><para>Correction de problèmes avec des références de lignes entières
(<literal>foo.*</literal>) pour des résultats de sous-requêtes</para></listitem>
</itemizedlist>

   </sect2>
  </sect1>
 
  <sect1 id="release-8-0-4">
   <title>Version 8.0.4</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2005-10-04</simpara>
   </note>

   <para>
    Cette version contient quelques corrections de la 8.0.3.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.0, voir <xref linkend="release-8-0"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.0.4</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.0.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.0.3, voir les notes de sortie de la 8.0.3.
    </para>
   </sect2>

   <sect2>
    <title>Modifications</title>

<itemizedlist>
<listitem><para>Fix error that allowed <command>VACUUM</command> to remove
<literal>ctid</literal> chains too soon, and add more checking in code that follows
<literal>ctid</literal> links</para>
<para>This fixes a long-standing problem that could cause crashes in very rare
circumstances.</para></listitem>
<listitem><para>Fix <type>CHAR()</type> to properly pad spaces to the specified
length when using a multiple-byte character set (Yoshiyuki Asaba)</para>
<para>In prior releases, the padding of <type>CHAR()</type> was incorrect
because it only padded to the specified number of bytes without
considering how many characters were stored.</para></listitem>
<listitem><para>Force a checkpoint before committing <command>CREATE
DATABASE</command></para>
<para>This should fix recent reports of <quote>index is not a btree</quote>
failures when a crash occurs shortly after <command>CREATE
DATABASE</command>.</para></listitem>
<listitem><para>Fix the sense of the test for read-only transaction
in <command>COPY</command></para>
<para>The code formerly prohibited <command>COPY TO</command>, where it should
prohibit <command>COPY FROM</command>.
</para></listitem>
<listitem><para>Handle consecutive embedded newlines in <command>COPY</command>
CSV-mode input</para></listitem>
<listitem><para>Fix <function>date_trunc(week)</function> for dates near year
end</para></listitem>
<listitem><para>Fix planning problem with outer-join ON clauses that reference
only the inner-side relation</para></listitem>
<listitem><para>Further fixes for <literal>x FULL JOIN y ON true</literal> corner
cases</para></listitem>
<listitem><para>Fix overenthusiastic optimization of <literal>x IN (SELECT
DISTINCT ...)</literal> and related cases</para></listitem>
<listitem><para>Fix mis-planning of queries with small <literal>LIMIT</literal>
values due to poorly thought out <quote>fuzzy</quote> cost
comparison</para></listitem>
<listitem><para>Make <function>array_in</function> and <function>array_recv</function> more
paranoid about validating their OID parameter</para></listitem>
<listitem><para>Fix missing rows in queries like <literal>UPDATE a=... WHERE
a...</literal> with GiST index on column <literal>a</literal></para></listitem>
<listitem><para>Improve robustness of datetime parsing</para></listitem>
<listitem><para>Improve checking for partially-written WAL
pages</para></listitem>
<listitem><para>Improve robustness of signal handling when SSL is
enabled</para></listitem>
<listitem><para>Improve MIPS and M68K spinlock code</para></listitem>
<listitem><para>Don't try to open more than <literal>max_files_per_process</literal>
files during postmaster startup</para></listitem>
<listitem><para>Various memory leakage fixes</para></listitem>
<listitem><para>Various portability improvements</para></listitem>
<listitem><para>Update timezone data files</para></listitem>
<listitem><para>Improve handling of DLL load failures on Windows</para></listitem>
<listitem><para>Improve random-number generation on Windows</para></listitem>
<listitem><para>Make <literal>psql -f filename</literal> return a nonzero exit code
when opening the file fails</para></listitem>
<listitem><para>Change <application>pg_dump</application> to handle inherited check
constraints more reliably</para></listitem>
<listitem><para>Fix password prompting in <application>pg_restore</application> on
Windows</para></listitem>
<listitem><para>Fix PL/PgSQL to handle <literal>var := var</literal> correctly when
the variable is of pass-by-reference type</para></listitem>
<listitem><para>Fix PL/Perl <literal>%_SHARED</literal> so it's actually
shared</para></listitem>
<listitem><para>Fix <filename>contrib/pg_autovacuum</filename> to allow sleep
intervals over 2000 sec</para></listitem>
<listitem><para>Update <filename>contrib/tsearch2</filename> to use current Snowball
code</para></listitem>
</itemizedlist>

   </sect2>
  </sect1>
 
  <sect1 id="release-8-0-3">
   <title>Version 8.0.3</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2005-05-09</simpara>
   </note>

   <para>
    Cette version contient quelques corrections sur la 8.0.2, dont des
    correctifs sur des failles de sécurité.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.0, voir <xref linkend="release-8-0"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.0.3</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.0.X. Néanmoins, c'est une façon possible de gérer deux problèmes
     de sécurité significatifs, qui ont été trouvé dans le contenu initial des
     catalogues systèmes des versions 8.0.X. Une séquence
     sauvegarde/initdb/restauration utilisant le initdb de la 8.0.3 corrigera
     automatiquement ces problèmes.
    </para>

    <para>
     Le problème de sécurité le plus important est que les fonctions de conversion
     du codage des ensembles de caractères peuvent être appelées à partir de
     commandes SQL par des utilisateurs non pribilégiés alors que les fonctions
     n'ont pas été conçues pour un tel usage et ne sont pas sécurisées contre
     des choix rusés des arguments. Le correctif implique de modifier la liste
     déclarée des arguments de ces fonctions pour qu'elles ne soient plus
     appelées à partir des commandes SQL. (Ceci n'affecte pas leur utilisation
     normale par la machinerie de conversion du codage.)
    </para>

    <para>
     Le problème le moins important est que le module <filename>contrib/tsearch2</filename>
     crée plusieurs fonctions déclarant par erreur renvoyées <type>internal</type>
     alors qu'elles n'acceptent pas les arguments <type>internal</type>. Ceci casse
     la sûreté des types pour toutes les fonctions utilisant des arguments
     <type>internal</type>.
    </para>

    <para>
     Il est fortement recommandé que toutes les installations corrigent ces
     erreurs, soit par un initdb soit en suivant les procédures de réparation
     données ci-dessous. Les erreurs permettent au moins à des utilisateurs
     non privilégiés de la base de données d'arrêter brutalement leur
     processus serveur et pourraient permettre à des utilisateurs non privilégiés
     de gagner les privilèges d'un superutilisateur.
    </para>

    <para>
     Si vous souhaitez ne pas lancer d'initdb, exécutez la même procédure de
     réparation manuelle que celle montrée dans les <link
     linkend="release-7-4-8">notes de la version 7.4.8</link>.
    </para>
   </sect2>

   <sect2>
    <title>Modifications</title>

<itemizedlist>
<listitem><para>Modification de la signature de la fonction de codage pour
empêcher toute mauvaise utilisation</para></listitem>
<listitem><para>Modification de <filename>contrib/tsearch2</filename> pour éviter une
utilisation non sécurisée des résultats <type>INTERNAL</type> de la fonction</para></listitem>
<listitem><para>Prévention contre un second paramètre incorrect pour
<function>record_out</function></para></listitem>
<listitem><para>Réparation d'une ancienne condition qui permettait à une
transaction d'être vue comme validée pour certains buts (par exemple SELECT FOR
UPDATE) légèrement plus tôt que dans les autres buts</para>
<para>Ceci est un bogue extrêmement sérieux car il pourrait amener à des
incohérences apparents des données et visibles brièvement par les applications.
</para></listitem>
<listitem><para>Réparation d'une condition entre extension de relation et VACUUM
</para>
<para>Théoriquement, ceci pourrait avoir causé des pertes d'une page de données
tout juste insérées, bien que la probabilité d'un tel scénario semble extrêmement
faible. Il n'existe pas de cas connus  où cela a provoqué plus qu'un échec
d'Assert.
</para></listitem>
<listitem><para>Correction des comparaisons des valeurs <type>TIME WITH TIME
ZONE</type></para>
<para>Le code de comparaison était mauvais dans le cas où le commutateur de
configuration <literal>--enable-integer-datetimes</literal> avait été utilisé.
NOTE : si vous avez un index sur une colonne <type>TIME WITH TIME ZONE</type>, il
sera nécessaire de le <command>REINDEX</command>er après avoir installé cette mise à
jour parce que ce correctif corrige l'ordre de tri des valeurs de colonnes.
</para></listitem>
<listitem><para>Correction de <function>EXTRACT(EPOCH)</function> pour les valeurs de
type <type>TIME WITH TIME ZONE</type></para></listitem>
<listitem><para>Correction d'un mauvais affichage des secondes fractionnelles
négatives dans les valeurs <type>INTERVAL</type></para>
<para>Cette erreur est seulement survenue quand l'option de configuration
<literal>--enable-integer-datetimes</literal> avait été utilisée.
</para></listitem>
<listitem><para>Correction de pg_dump pour qu'il sauvegarde correctement les
noms des déclencheurs contenant <literal>%</literal> (Neil)</para></listitem>
<listitem><para>Encore plus de correctifs 64 bits pour <filename>contrib/intagg</filename>
</para></listitem>
<listitem><para>Empêche une optimisation incorrecte des fonctions renvoyant
<type>RECORD</type></para></listitem>
<listitem><para>Empêche un arrêt brutal sur <literal>COALESCE(NULL,NULL)</literal></para></listitem>
<listitem><para>Correction du makefile de Borland pour libpq</para></listitem>
<listitem><para>Correction de <filename>contrib/btree_gist</filename> pour le type
<type>timetz</type> (Teodor)</para></listitem>
<listitem><para>Fait que <command>pg_ctl</command> vérifie le PID trouvé dans
<filename>postmaster.pid</filename> pour voir s'il s'agit toujours d'un processus en
vie</para></listitem>
<listitem><para>Correction des problèmes de <command>pg_dump</command>/<command>pg_restore</command>
causés par l'ajout de tampons horaires dans les sauvegardes</para></listitem>
<listitem><para>Correction de l'interaction entre les curseurs et le lancement de
déclencheurs déferrés lors de validation de transaction</para></listitem>
<listitem><para>Correction d'une perte mémoire dans les fonctions SQL renvoyant
des types de données passés par référence</para></listitem>
</itemizedlist>

   </sect2>
  </sect1>

 <sect1 id="release-8-0-2">
   <title>Version 8.0.2</title>

   <note>
     <title>Date de sortie</title>
     <simpara>2005-04-07</simpara>
   </note>

   <para>
     Cette version contient quelques corrections de la 8.0.1.
     Pour plus d'informations sur les nouvelles fonctionnalités de la
     version majeure 8.0, voir <xref linkend="release-8-0"/>.
   </para>

   <sect2>
     <title>Migration vers la version 8.0.2</title>

     <para>
       Une sauvegarde/restauration n'est pas requise pour ceux utilisant les
       versions 8.0.*. Cette version met à jour le numéro de version majeure
       des bibliothèques <productname>PostgreSQL</productname>, donc il pourrait
       être nécessaire de re-lier certaines applications utilisateurs si elles
       n'arrivent pas à trouver la bonne bibliothèque partagée.
     </para>
   </sect2>

   <sect2>
     <title>Modifications</title>

     <itemizedlist>
       <listitem><para>Incrémentation du numéro de version majeure pour toutes
         les bibliothèques d'interface (Bruce)</para>
         <para>
           Ceci aurait dû être fait depuis la 8.0.0. C'est requis pour que les
	   versions 7.4.X des applications clientes de PostgreSQL, comme
	   <application>psql</application>, puissent être utilisées sur la même machine
	   que les applications 8.0.X. Ceci pourrait nécessiter une nouvelle
	   édition des liens des applications clientes utilisant ces
	   bibliothèques.
       </para></listitem>
       <listitem><para>Ajout du paramètre <varname>wal_sync_method</varname>, uniquement
	 sous Windows, pour<option>fsync_writethrough</option> (Magnus, Bruce)</para>
         <para>
	   Ce paramètre fait que <productname>PostgreSQL</productname> écrit
	   les WAL via le cache d'écriture du disque. Ce comportement était
	   appelé auparavant <option>fsync</option> mais a été renommé car il agit
	   complètement différemment de <option>fsync</option> sur les autres
	   plateformes.
	 </para>
       </listitem>
       <listitem><para>Active la valeur <option>open_datasync</option> du paramètre
	 <varname>wal_sync_method</varname> sur Windows et le prend par défaut sur
	 cette plateforme (Magnus, Bruce)</para>
         <para>
	   Comme la valeur par défaut n'est plus <option>fsync_writethrough</option>,
	   une perte de données est possible lors d'une coupure de courant si
	   le disque a activé le cache en écriture. Pour désactiver ce cache sur
	   Windows, à partir du <application>Device Manager</application>, choisissez les
	   propriétés du disque, puis <literal>Policies</literal>.
	 </para>
       </listitem>
       <listitem><para>Le nouvel algorithme de gestion du cache <acronym>2Q</acronym>
	 remplace <acronym>ARC</acronym> (Tom)</para>
	 <para>
	   Ceci a été accompli pour éviter un brevet logiciel en attente sur
	   <acronym>ARC</acronym>. Le code <acronym>2Q</acronym> pourrait être un peu plus
	   lent qu'<acronym>ARC</acronym> pour certains charges de travail. Un meilleur
	   algorithme de gestion de cache apparaîtra pour la version 8.1.
	 </para></listitem>
       <listitem><para>Ajustements du planificateur pour améliorer le comportement
	 sur les tables nouvellement créées (Tom)</para></listitem>
       <listitem><para>Autorise plpgsql d'affecter un élément initialement
	 <literal>NULL</literal> à un tableau (Tom)</para>
	 <para>
	   Auparavant, le tableau resterait <literal>NULL</literal> mais maintenant, il
	   devient un tableau à un seul élément. Le moteur SQL principal a été
	   modifié pour gérer un <command>UPDATE</command> d'une valeur de tableau NULL
	   de cette façon dans la version 8.0 mais le cas similaire dans plpgsql
	   a été oublié.
	 </para>
       </listitem>
       <listitem><para>Conversion de <literal>\r\n</literal> et <literal>\r</literal> en <literal>\n</literal>
	 dans le corps des fonctions en plpython (Michael Fuhr)</para>
	 <para>
	   Ceci empêche les erreurs de syntaxe quand le code plpython a été
	   écrit sur un client Windows ou Mac.
	 </para>
       </listitem>
       <listitem><para>Autorise les curseurs SPI pour gérer les commandes outils
	 qui renvoient des lignes comme <command>EXPLAIN</command> (Tom)</para></listitem>
       <listitem><para>Correction de l'échec de <command>CLUSTER</command> après
	 <command>ALTER TABLE SET WITHOUT OIDS</command> (Tom)</para></listitem>
       <listitem><para>Réduction de l'utilisation de la mémoire d'<command>ALTER
	 TABLE ADD COLUMN</command> (Neil)</para></listitem>
       <listitem><para>Correction d'<command>ALTER LANGUAGE RENAME</command> (Tom)</para></listitem>
       <listitem><para>Documentation des options <literal>register</literal> et
	 <literal>unregister</literal> de <application>pg_ctl</application> spécifiques à Windows
	 (Magnus)</para></listitem>
       <listitem><para>S'assure que les opérations effectuées lors de l'arrêt
	 du moteur sont comptées par le récupérateur de statistiques</para>
	 <para>
	   Ceci devrait résoudre les rapports de <application>pg_autovacuum</application>
	   ne nettoyant pas assez fréquemment les catalogues systèmes &mdash; il
	   n'était pas tenu au courant des suppressions de catalogues causées
	   par la suppression de table temporaire lors de l'arrêt du moteur.
	 </para></listitem>
       <listitem><para>Modification de la valeur par défaut, sous Windows, pour
	 le paramètre de configuration <varname>log_destination</varname> par
	 <option>eventlog</option> (Magnus)</para>
	 <para>
	   Par défaut, un serveur fonctionnant sous Windows enverra maintenant
	   la sortie des traces au gestionnaire des traces de Windows plutôt
	   que sur la sortie standard des erreurs.
	 </para></listitem>
       <listitem><para>Rend l'authentification Kerberos fonctionnel sur Windows
	 (Magnus)</para></listitem>
       <listitem><para>Autorise <command>ALTER DATABASE RENAME</command> pour les
	 superutilisateurs qui n'ont pas le droit CREATEDB (Tom)</para></listitem>
       <listitem><para>Modification des entrées WAL pour les commandes
	 <command>CREATE</command> et <command>DROP DATABASE</command> pour ne pas spécifier
	 les chemins absolus (Tom)</para>
	 <para>Ceci permet la récupération à un instant sur une machine différente
	   avec des emplacements de bases de données pouvant être différents. Notez
	   que <command>CREATE TABLESPACE</command> est toujours hasardeux dans certaines
	   situations.</para></listitem>
       <listitem><para>Correction d'un arrêt brutal suivant l'arrêt d'un serveur
	 avec une transaction ouverte qui a créé une table et ouvert un curseur
	 sur elle (Tom)</para></listitem>
       <listitem><para>Correction de <function>array_map()</function> pour qu'il puisse
	 appeler des fonctions de langages de procédures (Tom)</para></listitem>
       <listitem><para>Plusieurs corrections pour <filename>contrib/tsearch2</filename>
	 et <filename>contrib/btree_gist</filename> (Teodor)</para></listitem>
       <listitem><para>Correction de quelques arrêts brutaux de certaines
	 fonctions de <filename>contrib/pgcrypto</filename> concernant certaines
	 plateformes (Marko Kreen)</para></listitem>
       <listitem><para>Correction de <filename>contrib/intagg</filename> pour les
	 plateformes 64 bits (Tom)</para></listitem>
       <listitem><para>Correction de bogues d'ecpg dans l'analyse d'instructions
	 <command>CREATE</command> (Michael)</para></listitem>
       <listitem><para>Contournement d'un bogue de gcc sur powerpc et amd64 posant
	 des problèmes sur ecpg (Christof Petig)</para></listitem>
       <listitem><para>N'utilise pas les versions <function>upper()</function>,
	 <function>lower()</function> et <function>initcap()</function> prenant compte de la
	 locale utilisée lorsque la locale est <literal>C</literal> (Bruce)</para>
	 <para>
	   Ceci permet à ces fonctions de fonctionner sur les plateformes qui
	   génèrent des erreurs pour les données non 7 bits lorsque la locale
	   est <literal>C</literal>.</para></listitem>
       <listitem><para>Correction de <function>quote_ident()</function> pour mettre entre
	 guillemets les noms qui correspondent à des mots clés (Tom)</para></listitem>
       <listitem><para>Correction de <function>to_date()</function> pour correspondre
	 raisonnablement quand les champs <literal>CC</literal> et <literal>YY</literal> sont
	 utilisées tous les deux (Karel)</para></listitem>
       <listitem><para>Empêche <function>to_char(interval)</function> d'échouer quand
	 lui est passée une intervalle de zéro mois (Tom)</para></listitem>
       <listitem><para>Correction du mauvais mois renvoyé par
	 <function>date_trunc('week')</function> (Bruce)</para>
	 <para>
	   <function>date_trunc('week')</function> a renvoyé la mauvaise année pour les
	   quelques premiers jours de Janvier pour certaines années.
	 </para></listitem>
       <listitem><para>Utilise la longueur par défaut du masque pour la classe
	 <literal>D</literal> d'adresses pour les types de données <type>INET</type> (Tom)
	 </para></listitem>
</itemizedlist>

</sect2>
</sect1>

  <sect1 id="release-8-0-1">
   <title>Version 8.0.1</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2005-01-31</simpara>
   </note>

   <para>
    Cette version contient une grande variété de corrections provenant de la
    version 8.0.0, incluant plusieurs problèmes relatifs sur la sécurité.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.0, voir <xref linkend="release-8-0"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.0.1</title>

    <para>
     Une sauvegarde/restauration n'est pas requis pour ceux utilisant la
     version 8.0.0.
    </para>
   </sect2>

   <sect2>
    <title>Modifications</title>

     <itemizedlist>
       <listitem><para>Interdiction de <command>LOAD</command> aux utilisateurs
	 standards</para>
	 <para>
	   Sur les plateformes qui exécutent automatiquement les fonctions
	   d'initialisation d'une bibliothèque partagée (ceci inclut au moins
	   Windows et les Unix basés sur ELF), <command>LOAD</command> peut être
	   utilisé pour que le serveur exécute un code arbitraire. Merci à
	   NGS Software pour nous l'avoir indiqué.</para></listitem>
       <listitem><para>Vérification comme le créateur d'une fonction d'agrégat
	 a le droit d'exécutr les fonctions de transition spécifiées</para>
         <para>
	   Cet aperçu est rendu possible pour dépasser un déni de droit sur EXECUTE
	   pour une fonction.</para></listitem>
       <listitem><para>Correctif de sécurité et de problèmes pour les 64 bits
	 dans contrib/intagg</para></listitem>
       <listitem><para>Ajout du marquage STRICT nécessaire pour certaines
	 fonctions de contrib functions (Kris Jurka)</para></listitem>
       <listitem><para>Évite l'écrasement de tampon quand la déclaration de
	 curseur de plpgsql a trop de paramètres (Neil)</para></listitem>
       <listitem><para>Fait que <command>ALTER TABLE ADD COLUMN</command> force les
	 contraintes de domaines dans tous les cas</para></listitem>
       <listitem><para>Correction d'une erreur de planification pour des
	 jointures externes FULL et RIGHT</para>
         <para>
	   Le résultat de la jointure a été pris par erreur pour être trié de la
	   même façon que l'entrée gauche. This could not only deliver mis-sorted
	   output to the user, but in case of nested merge joins could give
	   outright wrong answers.</para></listitem>
       <listitem><para>Amélioration de la plantification des requêtes d'agrégats
	 groupées</para></listitem>
       <listitem><para><command>ROLLBACK TO <replaceable>point_de_sauvegarde</replaceable></command>
	 ferme les curseurs créés depuis le point de sauvegarde</para></listitem>
       <listitem><para>Correction de la taille inadéquate de la pile du serveur
	 sur Windows</para></listitem>
       <listitem><para>Évite SHGetSpecialFolderPath() sur Windows (Magnus)</para></listitem>
       <listitem><para>Correction de quelques problèmes lors de l'exécution de
	 pg_autovacuum en tant que service Windows (Dave Page)</para></listitem>
       <listitem><para>Corrections de plusieurs bogues mineurs dans pg_dump/pg_restore</para></listitem>
       <listitem><para>Correction d'une erreur de segmentation dans ecpg avec
	 les structures nommées utilisées dans les typedefs (Michael)</para></listitem>
     </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-0">
  <title>Version 8.0</title>

  <note>
   <title>Date de sortie</title>
   <simpara>2005-01-19</simpara>
  </note>

  <sect2>
   <title>Overview</title>

   <para>
    Major changes in this release:

    <variablelist>
     <varlistentry>
      <term>
       Microsoft Windows Native Server
      </term>

      <listitem>
       <para>
        This is the first <productname>PostgreSQL</productname> release
        to run natively on <trademark class="registered">Microsoft Windows</trademark> as
        a server. It can run as a <productname>Windows</productname> service. This
        release supports NT-based Windows releases like
        <productname>Windows 2000</productname>, <productname>Windows XP</productname>, and
        <productname>Windows 2003</productname>. Older releases like
        <productname>Windows 95</productname>, <productname>Windows 98</productname>, and
        <productname>Windows ME</productname> are not supported because these operating
        systems do not have the infrastructure to support
        <productname>PostgreSQL</productname>. A separate installer
        project has been created to ease installation on
        <productname>Windows</productname> &mdash; see <ulink
        url="http://www.postgresql.org/ftp/win32/"></ulink>.
       </para>

       <para>
        Although tested throughout our release cycle, the Windows port
        does not have the benefit of years of use in production
        environments that <productname>PostgreSQL</productname> has on
        Unix platforms.  Therefore it should be treated with the same
        level of caution as you would a new product.
       </para>

       <para>
        Previous releases required the Unix emulation toolkit
        <productname>Cygwin</productname> in order to run the server on Windows
        operating systems.  <productname>PostgreSQL</productname> has
        supported native clients on Windows for many years.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>
       Savepoints
      </term>

      <listitem>
       <para>
        Savepoints allow specific parts of a transaction to be aborted
        without affecting the remainder of the transaction. Prior
        releases had no such capability; there was no way to recover
        from a statement failure within a transaction except by
        aborting the whole transaction. This feature is valuable for
        application writers who require error recovery within a
        complex transaction.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>
       Point-In-Time Recovery
      </term>

      <listitem>
       <para>
        In previous releases there was no way to recover from disk
        drive failure except to restore from a previous backup or use
        a standby replication server.  Point-in-time recovery allows
        continuous backup of the server.  You can recover either to
        the point of failure or to some transaction in the past.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>
       Tablespaces
      </term>

      <listitem>
       <para>
        Tablespaces allow administrators to select different file systems
        for storage of individual tables, indexes, and databases.
        This improves performance and control over disk space
        usage. Prior releases used <application>initlocation</application> and
        manual symlink management for such tasks.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>
       Improved Buffer Management, <command>CHECKPOINT</command>,
       <command>VACUUM</command>
      </term>

      <listitem>
       <para>
        This release has a more intelligent buffer replacement strategy,
        which will make better use of available shared buffers and
        improve performance. The performance impact of vacuum and
        checkpoints is also lessened.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>
       Change Column Types
      </term>

      <listitem>
       <para>
        A column's data type can now be changed with <command>ALTER
        TABLE</command>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>
       New Perl Server-Side Language
      </term>

      <listitem>
       <para>
        A new version of the <application>plperl</application> server-side language now
        supports a persistent shared storage area, triggers, returning records
        and arrays of records, and SPI calls to access the database.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>
        Comma-separated-value (CSV) support in <command>COPY</command>
      </term>

      <listitem>
       <para>
        <command>COPY</command> can now read and write
        comma-separated-value files. It has the flexibility to
        interpret non-standard quoting and separation characters too.
       </para>
      </listitem>
     </varlistentry>

    </variablelist>
   </para>
  </sect2>

  <sect2>
   <title>Migration vers la version 8.0</title>
                                      
   <para>
    A dump/restore using <application>pg_dump</application> is
    required for those wishing to migrate data from any previous
    release.
   </para>
   
   <para>
    Observe the following incompatibilities:

    <itemizedlist>

     <listitem>
      <para>
       In <option>READ COMMITTED</option> serialization mode, volatile functions
       now see the results of concurrent transactions committed up to the
       beginning of each statement within the function, rather than up to the
       beginning of the interactive command that called the function.
      </para>
     </listitem>

     <listitem>
      <para>
       Functions declared <option>STABLE</option> or <option>IMMUTABLE</option> always
       use the snapshot of the calling query, and therefore do not see the
       effects of actions taken after the calling query starts, whether in
       their own transaction or other transactions.  Such a function must be
       read-only, too, meaning that it cannot use any SQL commands other than
       <command>SELECT</command>.
      </para>
     </listitem>

     <listitem>
      <para>
       Non-deferred <option>AFTER</option> triggers are now fired immediately
       after completion of the triggering query, rather than upon
       finishing the current interactive command. This makes a
       différence when the triggering query occurred within a function:
       the trigger is invoked before the function proceeds to its next
       operation.
      </para>
     </listitem>

     <listitem>
      <para>
       Server configuration parameters <varname>virtual_host</varname> and
       <varname>tcpip_socket</varname> have been replaced with a more general
       parameter <varname>listen_addresses</varname>. Also, the server now listens on
       <literal>localhost</literal> by default, which eliminates the need for the
       <literal>-i</literal> postmaster switch in many scenarios.
      </para>
     </listitem>

     <listitem>
      <para>
       Server configuration parameters <varname>SortMem</varname> and
       <varname>VacuumMem</varname> have been renamed to <varname>work_mem</varname>
       and <varname>maintenance_work_mem</varname> to better reflect their
       use. The original names are still supported in
       <command>SET</command> and <command>SHOW</command>.
      </para>
     </listitem>

     <listitem>
      <para>
       Server configuration parameters <varname>log_pid</varname>,
       <varname>log_timestamp</varname>, and <varname>log_source_port</varname> have been
       replaced with a more general parameter <varname>log_line_prefix</varname>.
      </para>
     </listitem>

     <listitem>
      <para>
       Server configuration parameter <varname>syslog</varname> has been
       replaced with a more logical <varname>log_destination</varname> variable to
       control the log output destination.
      </para>
     </listitem>

     <listitem>
      <para>
       Server configuration parameter <varname>log_statement</varname> has been
       changed so it can selectively log just database modification or
       data définition statements.  Server configuration parameter
       <varname>log_duration</varname> now prints only when <varname>log_statement</varname>
       prints the query.
      </para>
     </listitem>

     <listitem>
      <para>
       Server configuration parameter <varname>max_expr_depth</varname> parameter has
       been replaced with <varname>max_stack_depth</varname> which measures the
       physical stack size rather than the expression nesting depth. This
       helps prevent session termination due to stack overflow caused by
       recursive functions.
      </para>
     </listitem>

     <listitem>
      <para>
       The <function>length()</function> function no longer counts trailing spaces in
       <type>CHAR(n)</type> values.
      </para>
     </listitem>

    <listitem>
     <para>
      Casting an integer to <type>BIT(N)</type> selects the rightmost N bits of the
      integer, not the leftmost N bits as before.
     </para>
    </listitem>

    <listitem>
     <para>
      Updating an element or slice of a NULL array value now produces
      a non-NULL array result, namely an array containing
      just the assigned-to positions.
     </para>
    </listitem>

     <listitem>
      <para>
       Syntax checking of array input values has been tightened up
       considerably. Junk that was previously allowed in odd places with
       odd results now causes an error. Empty-string element values
       must now be written as <literal>""</literal>, rather than writing nothing.
       Also changed behavior with respect to whitespace surrounding
       array elements: trailing whitespace is now ignored, for symmetry
       with leading whitespace (which has always been ignored).
      </para>
     </listitem>

     <listitem>
      <para>
       Overflow in integer arithmetic operations is now detected and
       reported as an error.
      </para>
     </listitem>

     <listitem>
      <para>
       The arithmetic operators associated with the single-byte
       <type>"char"</type> data type have been removed.
      </para>
     </listitem>

     <listitem>
      <para>
       The <function>extract()</function> function (also called
       <function>date_part</function>) now returns the proper year for BC dates.
       It previously returned one less than the correct year. The
       function now also returns the proper values for millennium and
       century.
      </para>
     </listitem>

    <listitem>
     <para>
      <type>CIDR</type> values now must have their non-masked bits be zero.
      For exemple, we no longer allow
      <literal>204.248.199.1/31</literal> as a <type>CIDR</type> value. Such
      values should never have been accepted by
      <productname>PostgreSQL</productname> and will now be rejected.
     </para>
    </listitem>

     <listitem>
      <para>
       <command>EXECUTE</command> now returns a completion tag that
       matches the executed statement.
      </para>
     </listitem>

     <listitem>
      <para>
       <application>psql</application>'s <command>\copy</command> command now reads or
       writes to the query's <literal>stdin/stdout</literal>, rather than
       <application>psql</application>'s <literal>stdin/stdout</literal>. The previous
       behavior can be accessed via new
       <option>pstdin</option>/<option>pstdout</option> parameters.
      </para>
     </listitem>

     <listitem>
      <para>
      The JDBC client interface has been removed from the core
      distribution, and is now hosted at <ulink url=
      "http://jdbc.postgresql.org"></ulink>.
      </para>
     </listitem>

     <listitem>
      <para>
      The Tcl client interface has also been removed. There are several
      Tcl interfaces now hosted at <ulink url=
      "http://gborg.postgresql.org"></ulink>.
      </para>
     </listitem>

     <listitem>
      <para>
       The server now uses its own time zone database, rather than the
       one supplied by the operating system. This will provide consistent
       behavior across all platforms.  In most cases, there should be
       little noticeable différence in time zone behavior, except that
       the time zone names used by <command>SET</command>/<command>SHOW</command>
       <varname>TimeZone</varname> may
       be different from what your platform provides.
      </para>
     </listitem>

     <listitem>
      <para>
       <application>Configure</application>'s threading option no longer requires
       users to run tests or edit configuration files; threading options
       are now detected automatically.
      </para>
     </listitem>

     <listitem>
      <para>
       Now that tablespaces have been implemented,
       <application>initlocation</application> has been removed.
      </para>
     </listitem>

     <listitem>
     <para>
     The API for user-defined GiST indexes has been changed. The
     Union and PickSplit methods are now passed a pointer to a
     special <structname>GistEntryVector</structname> structure,
     rather than a <type>bytea</type>.
     </para>
     </listitem>


    </itemizedlist>
   </para>
  </sect2>

  <sect2>
   <title>Deprecated Features</title>

   <para>
    Some aspects of <productname>PostgreSQL</productname>'s behavior
    have been determined to be suboptimal. For the sake of backward
    compatibility these have not been removed in 8.0, but they are
    considered deprecated and will be removed in the next major
    release.
    </para>

   <itemizedlist>
    <listitem>
     <para>
      The 8.1 release will remove the function
       <function>to_char()</function> for intervals.
     </para>
    </listitem>

     <listitem>
      <para>
       The server now warns of empty strings passed to
       <type>oid</type>/<type>float4</type>/<type>float8</type> data
       types, but continues to interpret them as zeroes as before.
       In the next major release, empty strings will be considered
       invalid input for these data types.
      </para>
     </listitem>

    <listitem>
     <para>
      By default, tables in <productname>PostgreSQL</productname> 8.0
      and earlier are created with <type>OID</type>s. In the next release,
      this will <emphasis>not</emphasis> be the case: to create a table
      that contains <type>OID</type>s, the <option>WITH OIDS</option> clause must
      be specified or the <varname>default_with_oids</varname>
      configuration parameter must be set. Users are encouraged to
      explicitly specify <option>WITH OIDS</option> if their tables
      require OID for compatibility with future releases of
      <productname>PostgreSQL</productname>.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2>
   <title>Modifications</title>

   <para>
    Below you will find a detailed account of the changes between
    release 8.0 and the previous major release.
   </para>

  <sect3>
   <title>Performance Improvements</title>
   <itemizedlist>

    <listitem>
     <para>
      Support cross-data-type index usage (Tom)
     </para>
     <para>
      Before this change, many queries would not use an index if the data
      types did not match exactly. This improvement makes index usage more
      intuitive and consistent.
     </para>
    </listitem>

    <listitem>
     <para>
      New buffer replacement strategy that improves caching (Jan)
     </para>
     <para>
      Prior releases used a least-recently-used (LRU) cache to keep
      recently referenced pages in memory. The LRU algorithm
      did not consider the number of times a specific cache entry was
      accessed, so large table scans could force out useful cache pages.
      The new cache algorithm uses four separate lists to track most
      recently used and most frequently used cache pages and dynamically 
      optimize their replacement based on the work load. This should
      lead to much more efficient use of the shared buffer cache.
      Administrators who have tested shared buffer sizes in the past
      should retest with this new cache replacement policy.
     </para>
    </listitem>

    <listitem>
     <para>
      Add subprocess to write dirty buffers periodically to reduce
      checkpoint writes (Jan)
     </para>
     <para>
      In previous releases, the checkpoint process, which runs every few
      minutes, would write all dirty buffers to the operating system's
      buffer cache then flush all dirty operating system buffers to
      disk. This resulted in a periodic spike in disk usage that often
      hurt performance. The new code uses a background writer to trickle
      disk writes at a steady pace so checkpoints have far fewer dirty
      pages to write to disk. Also, the new code does not issue a global
      <function>sync()</function> call, but instead <function>fsync()</function>s just
      the files written since the last checkpoint. This should improve
      performance and minimize degradation during checkpoints.
     </para>
    </listitem>

    <listitem>
     <para>
      Add ability to prolong vacuum to reduce performance impact (Jan)
     </para>
     <para>
      On busy systems, <command>VACUUM</command> performs many I/O
      requests which can hurt performance for other users. This
      release allows you to slow down <command>VACUUM</command> to
      reduce its impact on other users, though this increases the
      total duration of <command>VACUUM</command>.
     </para>
    </listitem>

    <listitem>
     <para>
      Improve B-tree index performance for duplicate keys (Dmitry Tkach, Tom)
     </para>
     <para>
      This improves the way indexes are scanned when many duplicate
      values exist in the index.
     </para>
    </listitem>

    <listitem>
     <para>
      Use dynamically-generated table size estimates while planning (Tom)
     </para>
     <para>
      Formerly the planner estimated table sizes using the values seen
      by the last <command>VACUUM</command> or <command>ANALYZE</command>,
      both as to physical table size (number of pages) and number of rows.
      Now, the current physical table size is obtained from the kernel,
      and the number of rows is estimated by multiplying the table size
      by the row density (rows per page) seen by the last
      <command>VACUUM</command> or <command>ANALYZE</command>.  This should
      produce more reliable estimates in cases where the table size has
      changed significantly since the last housekeeping command.
     </para>
    </listitem>

    <listitem>
     <para>
      Improved index usage with <literal>OR</literal> clauses (Tom)
     </para>
     <para>
      This allows the optimizer to use indexes in statements with many OR
      clauses that would not have been indexed in the past.  It can also use
      multi-column indexes where the first column is specified and the second
      column is part of an <literal>OR</literal> clause.
     </para>
    </listitem>

    <listitem>
     <para>
      Improve matching of partial index clauses (Tom)
     </para>
     <para>
      The server is now smarter about using partial indexes in queries
      involving complex <option>WHERE</option> clauses.
     </para>
    </listitem>

    <listitem>
     <para>
      Improve performance of the GEQO optimizer (Tom)
     </para>
     <para>
      The GEQO optimizer is used to plan queries involving many tables (by
      default, twelve or more). This release speeds up the way queries are
      analyzed to decrease time spent in optimization.
     </para>
    </listitem>

    <listitem>
     <para>
      Miscellaneous optimizer improvements
     </para>
     <para>
      There is not room here to list all the minor improvements made, but
      numerous special cases work better than in prior releases.
     </para>
    </listitem>

    <listitem>
     <para>
      Improve lookup speed for C functions (Tom)
     </para>
     <para>
      This release uses a hash table to lookup information for dynamically
      loaded C functions. This improves their speed so they perform nearly as
      quickly as functions that are built into the server executable.
     </para>
    </listitem>

    <listitem>
     <para>
      Add type-specific <command>ANALYZE</command> statistics
      capability (Mark Cave-Ayland)
     </para>
     <para>
      This feature allows more flexibility in generating statistics
      for non-standard data types.
     </para>
    </listitem>

    <listitem>
     <para>
      <command>ANALYZE</command> now collects statistics for
      expression indexes (Tom)
     </para>
     <para>
      Expression indexes (also called functional indexes) allow users to
      index not just columns but the results of expressions and function
      calls. With this release, the optimizer can gather and use statistics
      about the contents of expression indexes.  This will greatly improve
      the quality of planning for queries in which an expression index is
      relevant.
     </para>
    </listitem>

    <listitem>
     <para>
      New two-stage sampling method for <command>ANALYZE</command>
      (Manfred Koizar)
     </para>
     <para>
      This gives better statistics when the density of valid rows is very
      different in different regions of a table.
     </para>
    </listitem>

    <listitem>
     <para>
      Speed up <command>TRUNCATE</command> (Tom)
     </para>
     <para>
      This buys back some of the performance loss observed in 7.4, while still
      keeping <command>TRUNCATE</command> transaction-safe.
     </para>
    </listitem>

   </itemizedlist>
  </sect3>


  <sect3>
   <title>Server Changes</title>
   <itemizedlist>

    <listitem>
     <para>
      Add WAL file archiving and point-in-time recovery (Simon Riggs)
     </para>
    </listitem>

    <listitem>
     <para>
      Add tablespaces so admins can control disk layout (Gavin)
     </para>
    </listitem>

    <listitem>
     <para>
      Add a built-in log rotation program (Andreas Pflug)
     </para>
     <para>
      It is now possible to log server messages conveniently without
      relying on either <application>syslog</application> or an external log
      rotation program.
     </para>
    </listitem>

    <listitem>
     <para>
      Add new read-only server configuration parameters to show server
      compile-time settings: <varname>block_size</varname>,
      <varname>integer_datetimes</varname>, <varname>max_function_args</varname>,
      <varname>max_identifier_length</varname>, <varname>max_index_keys</varname>  (Joe)
     </para>
    </listitem>

    <listitem>
     <para>
      Make quoting of <literal>sameuser</literal>, <literal>samegroup</literal>, and
      <literal>all</literal> remove special meaning of these terms in
      <filename>pg_hba.conf</filename> (Andrew)
     </para>
    </listitem>

    <listitem>
     <para>
      Use clearer IPv6 name <literal>::1/128</literal> for
      <literal>localhost</literal> in default <filename>pg_hba.conf</filename> (Andrew)
     </para>
    </listitem>

    <listitem>
     <para>
      Use CIDR format in <filename>pg_hba.conf</filename> exemples (Andrew)
     </para>
    </listitem>

    <listitem>
     <para>
      Rename server configuration parameters <varname>SortMem</varname> and
      <varname>VacuumMem</varname> to <varname>work_mem</varname> and
      <varname>maintenance_work_mem</varname> (Old names still supported) (Tom)
     </para>
     <para>
      This change was made to clarify that bulk operations such as index and
      foreign key creation use <varname>maintenance_work_mem</varname>, while
      <varname>work_mem</varname> is for workspaces used during query exécution.
     </para>
    </listitem>

    <listitem>
     <para>
      Allow logging of session disconnections using server configuration
      <varname>log_disconnections</varname> (Andrew)
     </para>
    </listitem>

    <listitem>
     <para>
      Add new server configuration parameter <varname>log_line_prefix</varname> to
      allow control of information emitted in each log line (Andrew)
     </para>
     <para>
      Available information includes user name, database name, remote IP
      address, and session start time.
     </para>
    </listitem>

    <listitem>
     <para>
      Remove server configuration parameters <varname>log_pid</varname>,
      <varname>log_timestamp</varname>, <varname>log_source_port</varname>; functionality
      superseded by <varname>log_line_prefix</varname> (Andrew)
     </para>
    </listitem>

    <listitem>
     <para>
      Replace the <varname>virtual_host</varname> and <varname>tcpip_socket</varname>
      parameters with a unified <varname>listen_addresses</varname> parameter
      (Andrew, Tom)
     </para>
     <para>
      <varname>virtual_host</varname> could only specify a single IP address to
      listen on.  <varname>listen_addresses</varname> allows multiple addresses
      to be specified.
     </para>
    </listitem>

    <listitem>
     <para>
      Listen on localhost by default, which eliminates the need for the
      <option>-i</option> postmaster switch in many scenarios (Andrew)
     </para>
     <para>
      Listening on localhost (<literal>127.0.0.1</literal>) opens no new
      security holes but allows configurations like Windows and JDBC,
      which do not support local sockets, to work without special
      adjustments.
     </para>
    </listitem>

    <listitem>
     <para>
      Remove <varname>syslog</varname> server configuration parameter, and add more
      logical <varname>log_destination</varname> variable to control log output
      location (Magnus)
     </para>
    </listitem>

    <listitem>
     <para>
      Change server configuration parameter <varname>log_statement</varname> to take
      values <varname>all</varname>, <varname>mod</varname>, <varname>ddl</varname>, or
      <varname>none</varname> to select which queries are logged (Bruce)
     </para>
     <para>
      This allows administrators to log only data définition changes or
      only data modification statements.
     </para>
    </listitem>

    <listitem>
     <para>
      Some logging-related configuration parameters could formerly be adjusted
      by ordinary users, but only in the <quote>more verbose</quote> direction.
      They are now treated more strictly: only superusers can set them.
      However, a superuser may use <command>ALTER USER</command> to provide per-user
      settings of these values for non-superusers.  Also, it is now possible
      for superusers to set values of superuser-only configuration parameters
      via <literal>PGOPTIONS</literal>.
     </para>
    </listitem>

    <listitem>
     <para>
      Allow configuration files to be placed outside the data directory (mlw)
     </para>
     <para>
      By default, configuration files are kept in the cluster's top directory.
      With this addition, configuration files can be placed outside the
      data directory, easing administration.
     </para>
    </listitem>

    <listitem>
     <para>
      Plan prepared queries only when first executed so constants can be
      used for statistics (Oliver Jowett)
     </para>
     <para>
      Prepared statements plan queries once and execute them many
      times. While prepared queries avoid the overhead of re-planning
      on each use, the quality of the plan suffers from not knowing the exact
      parameters to be used in the query.  In this release, planning of
      unnamed prepared statements is delayed until the first exécution,
      and the actual parameter values of that exécution are used as
      optimization hints.  This allows use of out-of-line parameter passing
      without incurring a performance penalty.
     </para>
    </listitem>

    <listitem>
     <para>
      Allow <command>DECLARE CURSOR</command> to take parameters
      (Oliver Jowett)
     </para>
     <para>
      It is now useful to issue <command>DECLARE CURSOR</command> in a
      <function>Parse</function> message with parameters. The parameter values
      sent at <function>Bind</function> time will be substituted into the
      exécution of the cursor's query.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix hash joins and aggregates of <type>inet</type> and
      <type>cidr</type> data types (Tom)
     </para>
     <para>
      Release 7.4 handled hashing of mixed <type>inet</type> and
      <type>cidr</type> values incorrectly.  (This bug did not exist
      in prior releases because they wouldn't try to hash either
      data type.)
     </para>
    </listitem>

    <listitem>
     <para>
      Make <varname>log_duration</varname> print only when <varname>log_statement</varname>
      prints the query (Ed L.)
     </para>
    </listitem>

   </itemizedlist>
  </sect3>


  <sect3>
   <title>Query Changes</title>
   <itemizedlist>

    <listitem>
     <para>
      Add savepoints (nested transactions) (Alvaro)
     </para>
    </listitem>

    <listitem>
     <para>
      Unsupported isolation levels are now accepted and promoted to the
      nearest supported level (Peter)
     </para>
     <para>
      The SQL specification states that if a database doesn't support a
      specific isolation level, it should use the next more restrictive level.
      This change complies with that recommendation.
     </para>
    </listitem>

    <listitem>
     <para>
      Allow <command>BEGIN WORK</command> to specify transaction
      isolation levels like <command>START TRANSACTION</command> does
      (Bruce)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix table permission checking for cases in which rules generate
      a query type different from the originally submitted query (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Implement dollar quoting to simplify single-quote usage (Andrew, Tom, 
      David Fetter)
     </para>
     <para>
      In previous releases, because single quotes had to be used to
      quote a function's body, the use of single quotes inside the
      function text required use of two single quotes or other error-prone
      notations. With this release we add the ability to use "dollar
      quoting" to quote a block of text.  The ability to use different
      quoting delimiters at different nesting levels greatly simplifies
      the task of quoting correctly, especially in complex functions.
      Dollar quoting can be used anywhere quoted text is needed.
     </para>
    </listitem>

    <listitem>
     <para>
      Make <literal>CASE val WHEN compval1 THEN ...</literal> evaluate <literal>val</literal>
only once (Tom)
     </para>
     <para>
      <option>CASE</option> no longer evaluates the tested expression multiple
      times. This has benefits when the expression is complex or is
      volatile.
     </para>
    </listitem>

    <listitem>
     <para>
      Test <option>HAVING</option> before computing target list of an
      aggregate query (Tom)
     </para>
     <para>
      Fixes improper failure of cases such as <literal>SELECT SUM(win)/SUM(lose)
      ... GROUP BY ... HAVING SUM(lose) &gt; 0</literal>.  This should work but
formerly
      could fail with divide-by-zero.
     </para>
    </listitem>

    <listitem>
     <para>
      Replace <varname>max_expr_depth</varname> parameter with
      <varname>max_stack_depth</varname> parameter, measured in kilobytes of stack
      size (Tom)
     </para>
     <para>
     This gives us a fairly bulletproof defense against crashing due to 
     runaway recursive functions. Instead of measuring the depth of expression
     nesting, we now directly measure the size of the exécution stack.
     </para>
    </listitem>

    <listitem>
     <para>
      Allow arbitrary row expressions (Tom)
     </para>
     <para>
      This release allows SQL expressions to contain arbitrary composite
      types, that is, row values. It also allows functions to more easily
      take rows as arguments and return row values.
     </para>
    </listitem>
      
    <listitem>
     <para>
      Allow <option>LIKE</option>/<option>ILIKE</option> to be used as the operator
      in row and subselect comparisons (Fabien Coelho)
     </para>
    </listitem>
      
    <listitem>
     <para>
      Avoid locale-specific case conversion of basic ASCII letters in
      identifiers and keywords (Tom)
     </para>
     <para>
      This solves the <quote>Turkish problem</quote> with mangling of words
      containing <literal>I</literal> and  <literal>i</literal>.  Folding of characters
      outside the 7-bit-ASCII set is still locale-aware.
     </para>
    </listitem>
      
    <listitem>
     <para>
      Improve syntax error reporting (Fabien, Tom)
     </para>
     <para>
      Syntax error reports are more useful than before.
     </para>
    </listitem>

    <listitem>
     <para>
      Change <command>EXECUTE</command> to return a completion tag
      matching the executed statement (Kris Jurka)
     </para>
     <para>
      Previous releases return an <command>EXECUTE</command> tag for
      any <command>EXECUTE</command> call. In this release, the tag
      returned will reflect the command executed.
     </para>
    </listitem>

    <listitem>
     <para>
      Avoid emitting <option>NATURAL CROSS JOIN</option> in rule listings (Tom)
     </para>
     <para>
      Such a clause makes no logical sense, but in some cases the rule
      decompiler formerly produced this syntax.
     </para>
    </listitem>

   </itemizedlist>
  </sect3>


  <sect3>
   <title>Object Manipulation Changes</title>
   <itemizedlist>

    <listitem>
     <para>
      Add <command>COMMENT ON</command> for casts, conversions, languages,
      operator classes, and large objects (Christopher)
     </para>
    </listitem>

    <listitem>
     <para>
      Add new server configuration parameter <varname>default_with_oids</varname> to
      control whether tables are created with <type>OID</type>s by default (Neil)
     </para>
     <para>
      This allows administrators to control whether <command>CREATE
      TABLE</command> commands create tables with or without <type>OID</type>
      columns by default.  (Note: the current factory default setting for
      <varname>default_with_oids</varname> is <literal>TRUE</literal>, but the default
      will become <literal>FALSE</literal> in future releases.)
     </para>
    </listitem>

    <listitem>
     <para>
      Add <option>WITH</option> / <option>WITHOUT OIDS</option> clause to
      <command>CREATE TABLE AS</command> (Neil)
     </para>
    </listitem>

    <listitem>
     <para>
      Allow <command>ALTER TABLE DROP COLUMN</command> to drop an <type>OID</type>
      column (<command>ALTER TABLE SET WITHOUT OIDS</command> still works)
      (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Allow composite types as table columns (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Allow <command>ALTER ... ADD COLUMN</command> with defaults and
      <option>NOT NULL</option> constraints; works per SQL spec (Rod)
     </para>
     <para>
      It is now possible for <option>ADD COLUMN</option> to create a column
      that is not initially filled with NULLs, but with a specified
      default value.
     </para>
    </listitem>

    <listitem>
     <para>
      Add <command>ALTER COLUMN TYPE</command> to change column's type (Rod)
     </para>
     <para>
      It is now possible to alter a column's data type without dropping
      and re-adding the column.
     </para>
    </listitem>

    <listitem>
     <para>
      Allow multiple <command>ALTER</command> actions in a single <command>ALTER
      TABLE</command> command (Rod)
     </para>
     <para>
      This is particularly useful for <command>ALTER</command> commands that
      rewrite the table (which include <option>ALTER COLUMN TYPE</option> and
      <option>ADD COLUMN</option> with a default). By grouping
      <command>ALTER</command> commands together, the table need be rewritten
      only once.
     </para>
    </listitem>

    <listitem>
     <para>
      Allow <command>ALTER TABLE</command> to add <type>SERIAL</type>
      columns (Tom)
     </para>
     <para>
      This falls out from the new capability of specifying defaults for new
      columns.
     </para>
    </listitem>

    <listitem>
     <para>
      Allow changing the owners of aggregates, conversions, databases,
      functions, operators, operator classes, schemas, types, and tablespaces
      (Christopher, Euler Taveira de Oliveira)
     </para>
     <para>
      Previously this required modifying the system tables directly.
     </para>
    </listitem>

    <listitem>
     <para>
      Allow temporary object creation to be limited to <option>SECURITY
      DEFINER</option> functions (Sean Chittenden)
     </para>
    </listitem>

    <listitem>
     <para>
      Add <option>ALTER TABLE ... SET WITHOUT CLUSTER</option> (Christopher)
     </para>
     <para>
      Prior to this release, there was no way to clear an auto-cluster
      specification except to modify the system tables.
     </para>
    </listitem>

    <listitem>
     <para>
      Constraint/Index/<type>SERIAL</type> names are now
      <replaceable>table_column_type</replaceable>
      with numbers appended to guarantee uniqueness within the schema
      (Tom)
     </para>
     <para>
      The SQL specification states that such names should be unique
      within a schema.
     </para>
    </listitem>

    <listitem>
     <para>
      Add <function>pg_get_serial_sequence()</function> to return a
      <type>SERIAL</type> column's sequence name (Christopher)
     </para>
     <para>
      This allows automated scripts to reliably find the <type>SERIAL</type>
      sequence name.
     </para>
    </listitem>

    <listitem>
     <para>
      Warn when primary/foreign key data type mismatch requires costly lookup
     </para>
    </listitem>

    <listitem>
     <para>
      New <command>ALTER INDEX</command> command to allow moving of indexes
      between tablespaces (Gavin)
     </para>
    </listitem>

    <listitem>
     <para>
      Make <command>ALTER TABLE OWNER</command> change dépendent sequence
      ownership too (Alvaro)
     </para>
    </listitem>


   </itemizedlist>
  </sect3>


  <sect3>
   <title>Utility Command Changes</title>
   <itemizedlist>

    <listitem>
     <para>
      Allow <command>CREATE SCHEMA</command> to create triggers,
      indexes, and sequences (Neil)
     </para>
    </listitem>

    <listitem>
     <para>
      Add <option>ALSO</option> keyword to <command>CREATE RULE</command> (Fabien
      Coelho)
     </para>
     <para>
      This allows <option>ALSO</option> to be added to rule creation to contrast it
with
      <option>INSTEAD</option> rules.
     </para>
    </listitem>

    <listitem>
     <para>
      Add <option>NOWAIT</option> option to <command>LOCK</command> (Tatsuo)
     </para>
     <para>
      This allows the <command>LOCK</command> command to fail if it
      would have to wait for the requested lock.
     </para>
    </listitem>

    <listitem>
     <para>
      Allow <command>COPY</command> to read and write
      comma-separated-value (CSV) files (Andrew, Bruce)
     </para>
    </listitem>

    <listitem>
     <para>
      Generate error if the <command>COPY</command> delimiter and NULL
      string conflict (Bruce)
     </para>
    </listitem>

    <listitem>
     <para>
      <command>GRANT</command>/<command>REVOKE</command> behavior
      follows the SQL spec more closely
     </para>
    </listitem>

    <listitem>
     <para>
      Avoid locking conflict between <command>CREATE INDEX</command>
      and <command>CHECKPOINT</command> (Tom)
     </para>
     <para>
      In 7.3 and 7.4, a long-running B-tree index build could block concurrent
      <command>CHECKPOINT</command>s from completing, thereby causing WAL bloat because
the
      WAL log could not be recycled.
     </para>
    </listitem>

    <listitem>
     <para>
      Database-wide <command>ANALYZE</command> does not hold locks
      across tables (Tom)
     </para>
     <para>
      This reduces the potential for deadlocks against other backends
      that want exclusive locks on tables.  To get the benefit of this
      change, do not execute database-wide <command>ANALYZE</command>
      inside a transaction block (<command>BEGIN</command> block); it
      must be able to commit and start a new transaction for each
      table.
     </para>
    </listitem>

    <listitem>
     <para>
      <command>REINDEX</command> does not exclusively lock the index's
      parent table anymore
     </para>
     <para>
      The index itself is still exclusively locked, but readers of the
      table can continue if they are not using the particular index
      being rebuilt.
     </para>
    </listitem>

    <listitem>
     <para>
      Erase MD5 user passwords when a user is renamed (Bruce)
     </para>
     <para>
      <productname>PostgreSQL</productname> uses the user name as salt
      when encrypting passwords via MD5. When a user's name is changed,
      the salt will no longer match the stored MD5 password, so the
      stored password becomes useless.  In this release a notice is
      generated and the password is cleared.  A new password must then
      be assigned if the user is to be able to log in with a password.
     </para>
    </listitem>

    <listitem>
     <para>
      New <application>pg_ctl</application> <option>kill</option> option for Windows (Andrew)
     </para>
     <para>
      Windows does not have a <literal>kill</literal> command to send signals to
      backends so this capability was added to <application>pg_ctl</application>.
     </para>
    </listitem>

    <listitem>
     <para>
      Information schema improvements
     </para>
    </listitem>

    <listitem>
     <para>
      Add <option>--pwfile</option> option to
      <application>initdb</application> so the initial password can be
      set by GUI tools (Magnus)
     </para>
    </listitem>

    <listitem>
     <para>
      Detect locale/encoding mismatch in
      <application>initdb</application> (Peter)
     </para>
    </listitem>

    <listitem>
     <para>
      Add <option>register</option> command to <application>pg_ctl</application> to
      register Windows operating system service (Dave Page)
     </para>
    </listitem>

   </itemizedlist>
  </sect3>


  <sect3>
   <title>Data Type and Function Changes</title>
   <itemizedlist>

    <listitem>
     <para>
      More complete support for composite types (row types)  (Tom)
     </para>
     <para>
      Composite values can be used in many places where only scalar values
      worked before.
     </para>
    </listitem>

    <listitem>
     <para>
      Reject non-rectangular array values as erroneous (Joe)
     </para>
     <para>
      Formerly, <function>array_in</function> would silently build a
      surprising result.
     </para>
    </listitem>

     <listitem>
      <para>
       Overflow in integer arithmetic operations is now detected (Tom)
      </para>
     </listitem>

     <listitem>
      <para>
       The arithmetic operators associated with the single-byte
       <type>"char"</type> data type have been removed.
      </para>
      <para>
       Formerly, the parser would select these operators in many situations
       where an <quote>unable to select an operator</quote> error would be more
       appropriate, such as <literal>NULL * NULL</literal>.  If you actually want
       to do arithmetic on a <type>"char"</type> column, you can cast it to
       integer explicitly.
      </para>
     </listitem>

    <listitem>
      <para>
       Syntax checking of array input values considerably tightened up (Joe)
      </para>
     <para>
       Junk that was previously allowed in odd places with odd results
       now causes an <literal>ERROR</literal>, for exemple, non-whitespace
       after the closing right brace.
      </para>
    </listitem>

    <listitem>
      <para>
       Empty-string array element values must now be written as
       <literal>""</literal>, rather than writing nothing (Joe)
      </para>
     <para>
       Formerly, both ways of writing an empty-string element value were
       allowed, but now a quoted empty string is required.  The case where
       nothing at all appears will probably be considered to be a NULL
       element value in some future release.
      </para>
    </listitem>

    <listitem>
      <para>
       Array element trailing whitespace is now ignored (Joe)
      </para>
     <para>
       Formerly leading whitespace was ignored, but trailing whitespace
       between an element value and the delimiter or right brace was
       significant.  Now trailing whitespace is also ignored.
      </para>
    </listitem>

    <listitem>
     <para>
      Emit array values with explicit array bounds when lower bound is not one
      (Joe)
     </para>
    </listitem>

    <listitem>
     <para>
      Accept <literal>YYYY-monthname-DD</literal> as a date string (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Make <function>netmask</function> and <function>hostmask</function> functions
      return maximum-length mask length (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Change factorial function to return <type>numeric</type> (Gavin)
     </para>
     <para>
      Returning <type>numeric</type> allows the factorial function to
      work for a wider range of input values.
     </para>
    </listitem>

    <listitem>
     <para>
      <function>to_char</function>/<function>to_date()</function> date conversion
      improvements (Kurt Roeckx, Fabien Coelho)
     </para>
    </listitem>

    <listitem>
     <para>
      Make <function>length()</function> disregard trailing spaces in
      <type>CHAR(n)</type> (Gavin)
     </para>
     <para>
      This change was made to improve consistency: trailing spaces are
      semantically insignificant in <type>CHAR(n)</type> data, so they
      should not be counted by <function>length()</function>.
     </para>
    </listitem>

    <listitem>
     <para>
      Warn about empty string being passed to
      <type>OID</type>/<type>float4</type>/<type>float8</type> data types (Neil)
     </para>
     <para>
      8.1 will throw an error instead.
     </para>
    </listitem>

    <listitem>
     <para>
      Allow leading or trailing whitespace in
      <type>int2</type>/<type>int4</type>/<type>int8</type>/<type>float4</type>/<type>float8</type>
      input routines
      (Neil)
     </para>
    </listitem>

    <listitem>
     <para>
      Better support for IEEE <literal>Infinity</literal> and <literal>NaN</literal>
      values in <type>float4</type>/<type>float8</type> (Neil)
     </para>
     <para>
      These should now work on all platforms that support IEEE-compliant
      floating point arithmetic.
     </para>
    </listitem>

    <listitem>
     <para>
      Add <option>week</option> option to <function>date_trunc()</function> (Robert Creager)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <function>to_char</function> for <literal>1 BC</literal>
      (previously it returned <literal>1 AD</literal>) (Bruce)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <function>date_part(year)</function> for BC dates (previously it
      returned one less than the correct year) (Bruce)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <function>date_part()</function> to return the proper millennium and
      century (Fabien Coelho)
     </para>
     <para>
      In previous versions, the century and millennium results had a wrong
      number and started in the wrong year, as compared to standard
      reckoning of such things.
     </para>
    </listitem>

    <listitem>
     <para>
      Add <function>ceiling()</function> as an alias for <function>ceil()</function>,
      and <function>power()</function> as an alias for <function>pow()</function> for
      standards compliance (Neil)
     </para>
    </listitem>

    <listitem>
     <para>
      Change <function>ln()</function>, <function>log()</function>,
      <function>power()</function>, and <function>sqrt()</function> to emit the correct
      <literal>SQLSTATE</literal> error codes for certain error conditions, as
      specified by SQL:2003 (Neil)
     </para>
    </listitem>

    <listitem>
     <para>
      Add <function>width_bucket()</function> function as defined by SQL:2003 (Neil)
     </para>
    </listitem>

    <listitem>
     <para>
      Add <function>generate_series()</function> functions to simplify working
      with numeric sets (Joe)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <function>upper/lower/initcap()</function> functions to work with
      multibyte encodings (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Add boolean and bitwise integer <option>AND</option>/<option>OR</option>
      aggregates (Fabien Coelho)
     </para>
    </listitem>

    <listitem>
     <para>
      New session information functions to return network addresses for client
      and server (Sean Chittenden)
     </para>
    </listitem>

    <listitem>
     <para>
      Add function to determine the area of a closed path (Sean Chittenden)
     </para>
    </listitem>

    <listitem>
     <para>
      Add function to send cancel request to other backends (Magnus)
     </para>
    </listitem>

    <listitem>
     <para>
      Add <type>interval</type> plus <type>datetime</type> operators (Tom)
     </para>
     <para>
      The reverse ordering, <type>datetime</type> plus <type>interval</type>,
      was already supported, but both are required by the SQL standard.
     </para>
    </listitem>

    <listitem>
     <para>
      Casting an integer to <type>BIT(N)</type> selects the rightmost N bits
      of the integer
      (Tom)
     </para>
     <para>
      In prior releases, the leftmost N bits were selected, but this was
      deemed unhelpful, not to mention inconsistent with casting from bit
      to int.
     </para>
    </listitem>

    <listitem>
     <para>
      Require <type>CIDR</type> values to have all non-masked bits be zero
      (Kevin Brintnall)
     </para>
    </listitem>

   </itemizedlist>
  </sect3>


  <sect3>
   <title>Server-Side Language Changes</title>
   <itemizedlist>

    <listitem>
     <para>
      In <literal>READ COMMITTED</literal> serialization mode, volatile functions
      now see the results of concurrent transactions committed up to the
      beginning of each statement within the function, rather than up to the
      beginning of the interactive command that called the function.
     </para>
    </listitem>

    <listitem>
     <para>
      Functions declared <literal>STABLE</literal> or <literal>IMMUTABLE</literal> always
      use the snapshot of the calling query, and therefore do not see the
      effects of actions taken after the calling query starts, whether in
      their own transaction or other transactions.  Such a function must be
      read-only, too, meaning that it cannot use any SQL commands other than
      <command>SELECT</command>.  There is a considerable performance gain from
      declaring a function <literal>STABLE</literal> or <literal>IMMUTABLE</literal>
      rather than <literal>VOLATILE</literal>.
     </para>
    </listitem>

    <listitem>
     <para>
      Non-deferred <option>AFTER</option> triggers are now fired immediately
      after completion of the triggering query, rather than upon
      finishing the current interactive command. This makes a différence
      when the triggering query occurred within a function: the trigger
      is invoked before the function proceeds to its next operation. For
      exemple, if a function inserts a new row into a table, any
      non-deferred foreign key checks occur before proceeding with the
      function.
     </para>
    </listitem>

    <listitem>
     <para>
      Allow function parameters to be declared with names (Dennis Bj&ouml;rklund)
     </para>
     <para>
      This allows better documentation of functions.  Whether the names
      actually do anything dépends on the specific function language
      being used.
     </para>
    </listitem>

    <listitem>
     <para>
      Allow PL/pgSQL parameter names to be referenced in the function (Dennis
      Bj&ouml;rklund)
     </para>
     <para>
      This basically creates an automatic alias for each named parameter.
     </para>
    </listitem>

    <listitem>
     <para>
      Do minimal syntax checking of PL/pgSQL functions at creation time (Tom)
     </para>
     <para>
      This allows us to catch simple syntax errors sooner.
     </para>
    </listitem>

    <listitem>
     <para>
      More support for composite types (row and record variables) in PL/pgSQL
     </para>
     <para>
      For exemple, it now works to pass a rowtype variable to another function
      as a single variable.
     </para>
    </listitem>

    <listitem>
     <para>
      Default values for PL/pgSQL variables can now reference previously
      declared variables
     </para>
    </listitem>

    <listitem>
     <para>
      Improve parsing of PL/pgSQL FOR loops (Tom)
     </para>
     <para>
      Parsing is now driven by presence of <literal>".."</literal> rather than
      data type of <option>FOR</option> variable. This makes no différence for
      correct functions, but should result in more understandable error
      messages when a mistake is made.
     </para>
    </listitem>

    <listitem>
     <para>
      Major overhaul of PL/Perl server-side language (Command Prompt, Andrew
Dunstan)
     </para>
    </listitem>

    <listitem>
     <para>
      In PL/Tcl, SPI commands are now run in subtransactions.  If an error
      occurs, the subtransaction is cleaned up and the error is reported
      as an ordinary Tcl error, which can be trapped with <literal>catch</literal>.
      Formerly, it was not possible to catch such errors.
     </para>
    </listitem>

    <listitem>
     <para>
      Accept <command>ELSEIF</command> in PL/pgSQL (Neil)
     </para>
     <para>
      Previously PL/pgSQL only allowed <command>ELSIF</command>, but many people
      are accustomed to spelling this keyword <command>ELSEIF</command>.
     </para>
    </listitem>

   </itemizedlist>
  </sect3>


  <sect3>
   <title><application>psql</application> Changes</title>
   <itemizedlist>

    <listitem>
     <para>
      Improve <application>psql</application> information display about database
      objects (Christopher)
     </para>
    </listitem>

    <listitem>
     <para>
      Allow <application>psql</application> to display group membership in
      <command>\du</command> and <command>\dg</command> (Markus Bertheau)
     </para>
    </listitem>

    <listitem>
     <para>
      Prevent <application>psql</application> <command>\dn</command> from showing
      temporary schemas (Bruce)
     </para>
    </listitem>

    <listitem>
     <para>
      Allow <application>psql</application> to handle tilde user expansion for file
      names (Zach Irmen)
     </para>
    </listitem>

    <listitem>
     <para>
      Allow <application>psql</application> to display fancy prompts, including
      color, via <application>readline</application> (Reece Hart, Chet Ramey)
     </para>
    </listitem>

    <listitem>
     <para>
      Make <application>psql</application> <command>\copy</command> match <command>COPY</command>
command syntax
      fully (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Show the location of syntax errors (Fabien Coelho, Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Add <command>CLUSTER</command> information to <application>psql</application>
      <command>\d</command> display
      (Bruce)
     </para>
    </listitem>

    <listitem>
     <para>
      Change <application>psql</application> <command>\copy stdin/stdout</command> to read
      from command input/output (Bruce)
     </para>
    </listitem>

    <listitem>
     <para>
      Add <option>pstdin</option>/<option>pstdout</option> to read from
      <application>psql</application>'s <literal>stdin</literal>/<literal>stdout</literal> (Mark
      Feit)
     </para>
    </listitem>

    <listitem>
     <para>
      Add global <application>psql</application> configuration file,
<filename>psqlrc.sample</filename>
      (Bruce)
     </para>
     <para>
      This allows a central file where global <application>psql</application> startup
commands can
      be stored.
     </para>
    </listitem>

    <listitem>
     <para>
      Have <application>psql</application> <command>\d+</command> indicate if the table
      has an <type>OID</type> column (Neil)
     </para>
    </listitem>

    <listitem>
     <para>
      On Windows, use binary mode in <application>psql</application> when reading files so
control-Z
      is not seen as end-of-file
     </para>
    </listitem>

    <listitem>
     <para>
      Have <command>\dn+</command> show permissions and description for schemas (Dennis
      Bj&ouml;rklund)
     </para>
    </listitem>

    <listitem>
     <para>
      Improve tab completion support (Stefan Kaltenbrunn, Greg Sabino Mullane)
     </para>
    </listitem>

    <listitem>
     <para>
      Allow boolean settings to be set using upper or lower case (Michael
Paesold)
     </para>
    </listitem>

   </itemizedlist>
  </sect3>


  <sect3>
   <title><application>pg_dump</application> Changes</title>
   <itemizedlist>

    <listitem>
     <para>
      Use dépendency information to improve the reliability of
      <application>pg_dump</application> (Tom)
     </para>
     <para>
      This should solve the longstanding problems with related objects
      sometimes being dumped in the wrong order.
     </para>
    </listitem>

    <listitem>
     <para>
      Have <application>pg_dump</application> output objects in alphabetical order if
possible (Tom)
     </para>
     <para>
      This should make it easier to identify changes between
      dump files.
     </para>
    </listitem>

    <listitem>
     <para>
      Allow <application>pg_restore</application> to ignore some SQL errors (Fabien Coelho)
     </para>
     <para>
      This makes <application>pg_restore</application>'s behavior similar to the
      results of feeding a <application>pg_dump</application> output script to
      <application>psql</application>. In most cases, ignoring errors and plowing
      ahead is the most useful thing to do. Also added was a pg_restore
      option to give the old behavior of exiting on an error.
     </para>
    </listitem>

    <listitem>
     <para>
      <application>pg_restore</application> <option>-l</option> display now includes
      objects' schema names
     </para>
    </listitem>

    <listitem>
     <para>
      New begin/end markers in <application>pg_dump</application> text output (Bruce)
     </para>
    </listitem>

    <listitem>
     <para>
      Add start/stop times for
      <application>pg_dump</application>/<application>pg_dumpall</application> in verbose mode
      (Bruce)
     </para>
    </listitem>

    <listitem>
     <para>
      Allow most <application>pg_dump</application> options in
      <application>pg_dumpall</application> (Christopher)
     </para>
    </listitem>

    <listitem>
     <para>
      Have <application>pg_dump</application> use <command>ALTER OWNER</command> rather
      than <command>SET SESSION AUTHORIZATION</command> by default
      (Christopher)
     </para>
    </listitem>

   </itemizedlist>
  </sect3>


  <sect3>
   <title>libpq Changes</title>
   <itemizedlist>

    <listitem>
     <para>
      Make libpq's <option>SIGPIPE</option> handling thread-safe (Bruce)
     </para>
    </listitem>

    <listitem>
     <para>
      Add <function>PQmbdsplen()</function> which returns the display length
      of a character (Tatsuo)
     </para>
    </listitem>

    <listitem>
     <para>
      Add thread locking to <application>SSL</application> and
      <application>Kerberos</application> connections (Manfred Spraul)
     </para>
    </listitem>

    <listitem>
     <para>
      Allow <function>PQoidValue()</function>, <function>PQcmdTuples()</function>, and
      <function>PQoidStatus()</function> to work on <command>EXECUTE</command>
      commands (Neil)
     </para>
    </listitem>

    <listitem>
     <para>
      Add <function>PQserverVersion()</function> to provide more convenient
      access to the server version number (Greg Sabino Mullane)
     </para>
    </listitem>

    <listitem>
     <para>
      Add <function>PQprepare/PQsendPrepared()</function> functions to support
      preparing statements without necessarily specifying the data types
      of their parameters (Abhijit Menon-Sen)
     </para>
    </listitem>

    <listitem>
     <para>
      Many ECPG improvements, including <command>SET DESCRIPTOR</command> (Michael)
     </para>
    </listitem>

   </itemizedlist>
  </sect3>


  <sect3>
   <title>Source Code Changes</title>
   <itemizedlist>

    <listitem>
     <para>
      Allow the database server to run natively on Windows (Claudio, Magnus,
Andrew)
     </para>
    </listitem>

    <listitem>
     <para>
      Shell script commands converted to C versions for Windows support (Andrew)
     </para>
    </listitem>

    <listitem>
     <para>
      Create an extension makefile framework (Fabien Coelho, Peter)
     </para>
     <para>
      This simplifies the task of building extensions outside the original
      source tree.
     </para>
    </listitem>

    <listitem>
     <para>
      Support relocatable installations (Bruce)
     </para>
     <para>
      Directory paths for installed files (such as the
      <filename>/share</filename> directory) are now computed relative to the
      actual location of the executables, so that an installation tree
      can be moved to another place without reconfiguring and
      rebuilding.
     </para>
    </listitem>

    <listitem>
     <para>
      Use <option>--with-docdir</option> to choose installation location of
documentation; also
      allow <option>--infodir</option> (Peter)
     </para>
    </listitem>

    <listitem>
     <para>
      Add <option>--without-docdir</option> to prevent installation of documentation
(Peter)
     </para>
    </listitem>

    <listitem>
     <para>
      Upgrade to <application>DocBook</application> V4.2 SGML (Peter)
     </para>
    </listitem>

    <listitem>
     <para>
      New <literal>PostgreSQL</literal> <application>CVS</application> tag (Marc)
     </para>
     <para>
      This was done to make it easier for organizations to manage their
      own copies of the <productname>PostgreSQL</productname>
      <application>CVS</application> repository. File version stamps from the master
      repository will not get munged by checking into or out of a copied
      repository.
     </para>
    </listitem>

    <listitem>
     <para>
      Clarify locking code (Manfred Koizar)
     </para>
    </listitem>

    <listitem>
     <para>
      Buffer manager cleanup (Neil)
     </para>
    </listitem>

    <listitem>
     <para>
      Decouple platform tests from CPU spinlock code (Bruce, Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Add inlined test-and-set code on PA-RISC for <application>gcc</application>
      (ViSolve, Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Improve i386 spinlock code (Manfred Spraul)
     </para>
    </listitem>

    <listitem>
     <para>
      Clean up spinlock assembly code to avoid warnings from newer
      <application>gcc</application> releases (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Remove JDBC from source tree; now a separate project
     </para>
    </listitem>

    <listitem>
     <para>
      Remove the libpgtcl client interface; now a separate project
     </para>
    </listitem>

    <listitem>
     <para>
      More accurately estimate memory and file descriptor usage (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Improvements to the Mac OS X startup scripts (Ray A.)
     </para>
    </listitem>

    <listitem>
     <para>
      New <function>fsync()</function> test program (Bruce)
     </para>
    </listitem>

    <listitem>
     <para>
      Major documentation improvements (Neil, Peter)
     </para>
    </listitem>

    <listitem>
     <para>
      Remove <application>pg_encoding</application>; not needed
      anymore
     </para>
    </listitem>

    <listitem>
     <para>
      Remove <application>pg_id</application>; not needed anymore
     </para>
    </listitem>

    <listitem>
     <para>
      Remove <application>initlocation</application>; not needed
      anymore
     </para>
    </listitem>

    <listitem>
     <para>
      Auto-detect thread flags (no more manual testing) (Bruce)
     </para>
    </listitem>

    <listitem>
     <para>
      Use Olson's public domain <application>timezone</application> library (Magnus)
     </para>
    </listitem>

    <listitem>
     <para>
      With threading enabled, use thread flags on Unixware for 
      backend executables too (Bruce)
     </para>
     <para>
      Unixware can not mix threaded and non-threaded object files in the
      same executable, so everything must be compiled as threaded.
     </para>
    </listitem>

    <listitem>
     <para>
      <application>psql</application> now uses a <application>flex</application>-generated
      lexical analyzer to process command strings
     </para>
    </listitem>

    <listitem>
     <para>
      Reimplement the linked list data structure used throughout the
      backend (Neil)
     </para>
     <para>
      This improves performance by allowing list append and length
      operations to be more efficient.
     </para>
    </listitem>

    <listitem>
     <para>
      Allow dynamically loaded modules to create their own server configuration
      parameters (Thomas Hallgren)
     </para>
    </listitem>

    <listitem>
     <para>
      New Brazilian version of FAQ (Euler Taveira de Oliveira)
     </para>
    </listitem>

    <listitem>
     <para>
      Add French FAQ (Guillaume Lelarge)
     </para>
    </listitem>

    <listitem>
     <para>
      New <application>pgevent</application> for Windows logging
     </para>
    </listitem>

    <listitem>
     <para>
      Make libpq and ECPG build as proper shared libraries on OS X (Tom)
     </para>
    </listitem>

   </itemizedlist>
  </sect3>


  <sect3>
   <title>Contrib Changes</title>
   <itemizedlist>

    <listitem>
     <para>
      Overhaul of <filename>contrib/dblink</filename> (Joe)
     </para>
    </listitem>

    <listitem>
     <para>
      <filename>contrib/dbmirror</filename> improvements (Steven Singer)
     </para>
    </listitem>

    <listitem>
     <para>
      New <filename>contrib/xml2</filename> (John Gray, Torchbox)
     </para>
    </listitem>

    <listitem>
     <para>
      Updated <filename>contrib/mysql</filename>
     </para>
    </listitem>

    <listitem>
     <para>
      New version of <filename>contrib/btree_gist</filename> (Teodor)
     </para>
    </listitem>

    <listitem>
     <para>
      New <filename>contrib/trgm</filename>, trigram matching for
      <productname>PostgreSQL</productname> (Teodor)
     </para>
    </listitem>

    <listitem>
     <para>
      Many <filename>contrib/tsearch2</filename> improvements (Teodor)
     </para>
    </listitem>

    <listitem>
     <para>
      Add double metaphone to <filename>contrib/fuzzystrmatch</filename> (Andrew)
     </para>
    </listitem>

    <listitem>
     <para>
      Allow <filename>contrib/pg_autovacuum</filename> to run as a Windows service (Dave
Page)
     </para>
    </listitem>

    <listitem>
     <para>
      Add functions to <filename>contrib/dbsize</filename> (Andreas Pflug)
     </para>
    </listitem>

    <listitem>
     <para>
      Removed <filename>contrib/pg_logger</filename>: obsoleted by integrated logging
      subprocess
     </para>
    </listitem>

    <listitem>
     <para>
      Removed <filename>contrib/rserv</filename>: obsoleted by various separate projects
     </para>
    </listitem>

   </itemizedlist>
  </sect3>

  </sect2>
 </sect1>
