<?xml version="1.0" encoding="UTF-8"?>
<!-- Dernière modification
     le       $Date: 2009-05-03 13:57:02 +0200 (dim. 03 mai 2009) $
     par      $Author: gleu $
     révision $Revision: 1317 $ -->

 <sect1 id="release-8-1-21">
  <title>Release 8.1.21</title>

  <note>
  <title>Release date</title>
  <simpara>2010-05-17</simpara>
  </note>

  <para>
   This release contains a variety of fixes from 8.1.20.
   For information about new features in the 8.1 major release, see
   <xref linkend="release-8-1"/>.
  </para>

  <sect2>
   <title>Migration to Version 8.1.21</title>

   <para>
    A dump/restore is not required for those running 8.1.X.
    However, if you are upgrading from a version earlier than 8.1.18,
    see the release notes for 8.1.18.
   </para>

  </sect2>

  <sect2>
   <title>Changes</title>

   <itemizedlist>

    <listitem>
     <para>
      Enforce restrictions in <literal>plperl</literal> using an opmask applied to
      the whole interpreter, instead of using <filename>Safe.pm</filename>
      (Tim Bunce, Andrew Dunstan)
     </para>

     <para>
      Recent developments have convinced us that <filename>Safe.pm</filename> is too
      insecure to rely on for making <literal>plperl</literal> trustable.  This
      change removes use of <filename>Safe.pm</filename> altogether, in favor of using
      a separate interpreter with an opcode mask that is always applied.
      Pleasant side effects of the change include that it is now possible to
      use Perl's <literal>strict</literal> pragma in a natural way in
      <literal>plperl</literal>, and that Perl's <literal>$a</literal> and <literal>$b</literal>
      variables work as expected in sort routines, and that function
      compilation is significantly faster.  (CVE-2010-1169)
     </para>
    </listitem>

    <listitem>
     <para>
      Prevent PL/Tcl from executing untrustworthy code from
      <structname>pltcl_modules</structname> (Tom)
     </para>

     <para>
      PL/Tcl's feature for autoloading Tcl code from a database table
      could be exploited for trojan-horse attacks, because there was no
      restriction on who could create or insert into that table.  This change
      disables the feature unless <structname>pltcl_modules</structname> is owned by a
      superuser.  (However, the permissions on the table are not checked, so
      installations that really need a less-than-secure modules table can
      still grant suitable privileges to trusted non-superusers.)  Also,
      prevent loading code into the unrestricted <quote>normal</quote> Tcl
      interpreter unless we are really going to execute a <literal>pltclu</literal>
      function.  (CVE-2010-1170)
     </para>
    </listitem>

    <listitem>
     <para>
      Do not allow an unprivileged user to reset superuser-only parameter
      settings (Alvaro)
     </para>

     <para>
      Previously, if an unprivileged user ran <literal>ALTER USER ... RESET
      ALL</literal> for himself, or <literal>ALTER DATABASE ... RESET ALL</literal> for
      a database he owns, this would remove all special parameter settings
      for the user or database, even ones that are only supposed to be
      changeable by a superuser.  Now, the <command>ALTER</command> will only
      remove the parameters that the user has permission to change.
     </para>
    </listitem>

    <listitem>
     <para>
      Avoid possible crash during backend shutdown if shutdown occurs
      when a <literal>CONTEXT</literal> addition would be made to log entries (Tom)
     </para>

     <para>
      In some cases the context-printing function would fail because the
      current transaction had already been rolled back when it came time
      to print a log message.
     </para>
    </listitem>

    <listitem>
     <para>
      Update pl/perl's <filename>ppport.h</filename> for modern Perl versions
      (Andrew)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix assorted memory leaks in pl/python (Andreas Freund, Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Prevent infinite recursion in <application>psql</application> when expanding
      a variable that refers to itself (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Ensure that <filename>contrib/pgstattuple</filename> functions respond to cancel
      interrupts promptly (Tatsuhito Kasahara)
     </para>
    </listitem>

    <listitem>
     <para>
      Make server startup deal properly with the case that
      <function>shmget()</function> returns <literal>EINVAL</literal> for an existing
      shared memory segment (Tom)
     </para>

     <para>
      This behavior has been observed on BSD-derived kernels including OS X.
      It resulted in an entirely-misleading startup failure complaining that
      the shared memory request size was too large.
     </para>
    </listitem>

    <listitem>
     <para>
      Update time zone data files to <application>tzdata</application> release 2010j
      for DST law changes in Argentina, Australian Antarctic, Bangladesh,
      Mexico, Morocco, Pakistan, Palestine, Russia, Syria, Tunisia;
      also historical corrections for Taiwan.
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-1-20">
  <title>Release 8.1.20</title>

  <note>
  <title>Release date</title>
  <simpara>2010-03-15</simpara>
  </note>

  <para>
   This release contains a variety of fixes from 8.1.19.
   For information about new features in the 8.1 major release, see
   <xref linkend="release-8-1"/>.
  </para>

  <sect2>
   <title>Migration to Version 8.1.20</title>

   <para>
    A dump/restore is not required for those running 8.1.X.
    However, if you are upgrading from a version earlier than 8.1.18,
    see the release notes for 8.1.18.
   </para>

  </sect2>

  <sect2>
   <title>Changes</title>

   <itemizedlist>

    <listitem>
     <para>
      Add new configuration parameter <varname>ssl_renegotiation_limit</varname> to
      control how often we do session key renegotiation for an SSL connection
      (Magnus)
     </para>

     <para>
      This can be set to zero to disable renegotiation completely, which may
      be required if a broken SSL library is used.  In particular, some
      vendors are shipping stopgap patches for CVE-2009-3555 that cause
      renegotiation attempts to fail.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix possible crashes when trying to recover from a failure in
      subtransaction start (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix server memory leak associated with use of savepoints and a client
      encoding different from server's encoding (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Make <function>substring()</function> for <type>bit</type> types treat any negative
      length as meaning <quote>all the rest of the string</quote> (Tom)
     </para>

     <para>
      The previous coding treated only -1 that way, and would produce an
      invalid result value for other negative values, possibly leading to
      a crash (CVE-2010-0442).
     </para>
    </listitem>

    <listitem>
     <para>
      Fix integer-to-bit-string conversions to handle the first fractional
      byte correctly when the output bit width is wider than the given
      integer by something other than a multiple of 8 bits (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix some cases of pathologically slow regular expression matching (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix the <literal>STOP WAL LOCATION</literal> entry in backup history files to
      report the next WAL segment's name when the end location is exactly at a
      segment boundary (Itagaki Takahiro)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix some more cases of temporary-file leakage (Heikki)
     </para>

     <para>
      This corrects a problem introduced in the previous minor release.
      One case that failed is when a plpgsql function returning set is
      called within another function's exception handler.
     </para>
    </listitem>

    <listitem>
     <para>
      When reading <filename>pg_hba.conf</filename> and related files, do not treat
      <literal>@something</literal> as a file inclusion request if the <literal>@</literal>
      appears inside quote marks; also, never treat <literal>@</literal> by itself
      as a file inclusion request (Tom)
     </para>

     <para>
      This prevents erratic behavior if a role or database name starts with
      <literal>@</literal>.  If you need to include a file whose path name
      contains spaces, you can still do so, but you must write
      <literal>@"/path to/file"</literal> rather than putting the quotes around
      the whole construct.
     </para>
    </listitem>

    <listitem>
     <para>
      Prevent infinite loop on some platforms if a directory is named as
      an inclusion target in <filename>pg_hba.conf</filename> and related files
      (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <application>psql</application>'s <literal>numericlocale</literal> option to not
      format strings it shouldn't in latex and troff output formats (Heikki)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix plpgsql failure in one case where a composite column is set to NULL
      (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Add <literal>volatile</literal> markings in PL/Python to avoid possible
      compiler-specific misbehavior (Zdenek Kotala)
     </para>
    </listitem>

    <listitem>
     <para>
      Ensure PL/Tcl initializes the Tcl interpreter fully (Tom)
     </para>

     <para>
      The only known symptom of this oversight is that the Tcl
      <literal>clock</literal> command misbehaves if using Tcl 8.5 or later.
     </para>
    </listitem>

    <listitem>
     <para>
      Prevent crash in <filename>contrib/dblink</filename> when too many key
      columns are specified to a <function>dblink_build_sql_*</function> function
      (Rushabh Lathia, Joe Conway)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix assorted crashes in <filename>contrib/xml2</filename> caused by sloppy
      memory management (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Update time zone data files to <application>tzdata</application> release 2010e
      for DST law changes in Bangladesh, Chile, Fiji, Mexico, Paraguay, Samoa.
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-1-19">
  <title>Release 8.1.19</title>

  <note>
  <title>Release date</title>
  <simpara>2009-12-14</simpara>
  </note>

  <para>
   This release contains a variety of fixes from 8.1.18.
   For information about new features in the 8.1 major release, see
   <xref linkend="release-8-1"/>.
  </para>

  <sect2>
   <title>Migration to Version 8.1.19</title>

   <para>
    A dump/restore is not required for those running 8.1.X.
    However, if you are upgrading from a version earlier than 8.1.18,
    see the release notes for 8.1.18.
   </para>

  </sect2>

  <sect2>
   <title>Changes</title>

   <itemizedlist>

    <listitem>
     <para>
      Protect against indirect security threats caused by index functions
      changing session-local state (Gurjeet Singh, Tom)
     </para>

     <para>
      This change prevents allegedly-immutable index functions from possibly
      subverting a superuser's session (CVE-2009-4136).
     </para>
    </listitem>

    <listitem>
     <para>
      Reject SSL certificates containing an embedded null byte in the common
      name (CN) field (Magnus)
     </para>

     <para>
      This prevents unintended matching of a certificate to a server or client
      name during SSL validation (CVE-2009-4034).
     </para>
    </listitem>

    <listitem>
     <para>
      Fix possible crash during backend-startup-time cache initialization (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Prevent signals from interrupting <literal>VACUUM</literal> at unsafe times
      (Alvaro)
     </para>

     <para>
      This fix prevents a PANIC if a <literal>VACUUM FULL</literal> is cancelled
      after it's already committed its tuple movements, as well as transient
      errors if a plain <literal>VACUUM</literal> is interrupted after having
      truncated the table.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix possible crash due to integer overflow in hash table size
      calculation (Tom)
     </para>

     <para>
      This could occur with extremely large planner estimates for the size of
      a hashjoin's result.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix very rare crash in <type>inet</type>/<type>cidr</type> comparisons (Chris
      Mikkelson)
     </para>
    </listitem>

    <listitem>
     <para>
      Ensure that shared tuple-level locks held by prepared transactions are
      not ignored (Heikki)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix premature drop of temporary files used for a cursor that is accessed
      within a subtransaction (Heikki)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix PAM password processing to be more robust (Tom)
     </para>

     <para>
      The previous code is known to fail with the combination of the Linux
      <literal>pam_krb5</literal> PAM module with Microsoft Active Directory as the
      domain controller.  It might have problems elsewhere too, since it was
      making unjustified assumptions about what arguments the PAM stack would
      pass to it.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix processing of ownership dependencies during <literal>CREATE OR
      REPLACE FUNCTION</literal> (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Ensure that Perl arrays are properly converted to
      <productname>PostgreSQL</productname> arrays when returned by a set-returning
      PL/Perl function (Andrew Dunstan, Abhijit Menon-Sen)
     </para>

     <para>
      This worked correctly already for non-set-returning functions.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix rare crash in exception processing in PL/Python (Peter)
     </para>
    </listitem>

    <listitem>
     <para>
      Ensure <application>psql</application>'s flex module is compiled with the correct
      system header definitions (Tom)
     </para>

     <para>
      This fixes build failures on platforms where
      <literal>--enable-largefile</literal> causes incompatible changes in the
      generated code.
     </para>
    </listitem>

    <listitem>
     <para>
      Make the postmaster ignore any <literal>application_name</literal> parameter in
      connection request packets, to improve compatibility with future libpq
      versions (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Update time zone data files to <application>tzdata</application> release 2009s
      for DST law changes in Antarctica, Argentina, Bangladesh, Fiji,
      Novokuznetsk, Pakistan, Palestine, Samoa, Syria; also historical
      corrections for Hong Kong.
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-1-18">
  <title>Release 8.1.18</title>

  <note>
  <title>Release date</title>
  <simpara>2009-09-09</simpara>
  </note>

  <para>
   This release contains a variety of fixes from 8.1.17.
   For information about new features in the 8.1 major release, see
   <xref linkend="release-8-1"/>.
  </para>

  <sect2>
   <title>Migration to Version 8.1.18</title>

   <para>
    A dump/restore is not required for those running 8.1.X.
    However, if you have any hash indexes on <type>interval</type> columns,
    you must <command>REINDEX</command> them after updating to 8.1.18.
    Also, if you are upgrading from a version earlier than 8.1.15,
    see the release notes for 8.1.15.
   </para>

  </sect2>

  <sect2>
   <title>Changes</title>

   <itemizedlist>

    <listitem>
     <para>
      Disallow <command>RESET ROLE</command> and <command>RESET SESSION
      AUTHORIZATION</command> inside security-definer functions (Tom, Heikki)
     </para>

     <para>
      This covers a case that was missed in the previous patch that
      disallowed <command>SET ROLE</command> and <command>SET SESSION
      AUTHORIZATION</command> inside security-definer functions.
      (See CVE-2007-6600)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix handling of sub-SELECTs appearing in the arguments of
      an outer-level aggregate function (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix hash calculation for data type <type>interval</type> (Tom)
     </para>

     <para>
      This corrects wrong results for hash joins on interval values.
      It also changes the contents of hash indexes on interval columns.
      If you have any such indexes, you must <command>REINDEX</command> them
      after updating.
     </para>
    </listitem>

    <listitem>
     <para>
      Treat <function>to_char(..., 'TH')</function> as an uppercase ordinal
      suffix with <literal>'HH'</literal>/<literal>'HH12'</literal> (Heikki)
     </para>

     <para>
      It was previously handled as <literal>'th'</literal> (lowercase).
     </para>
    </listitem>

    <listitem>
     <para>
      Fix overflow for <literal>INTERVAL '<replaceable>x</replaceable> ms'</literal>
      when <replaceable>x</replaceable> is more than 2 million and integer
      datetimes are in use (Alex Hunsaker)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix calculation of distance between a point and a line segment (Tom)
     </para>

     <para>
      This led to incorrect results from a number of geometric operators.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <type>money</type> data type to work in locales where currency
      amounts have no fractional digits, e.g. Japan (Itagaki Takahiro)
     </para>
    </listitem>

    <listitem>
     <para>
      Properly round datetime input like
      <literal>00:12:57.9999999999999999999999999999</literal> (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix poor choice of page split point in GiST R-tree operator classes
      (Teodor)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix portability issues in plperl initialization (Andrew Dunstan)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <application>pg_ctl</application> to not go into an infinite loop if
      <filename>postgresql.conf</filename> is empty (Jeff Davis)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <filename>contrib/xml2</filename>'s <function>xslt_process()</function> to
      properly handle the maximum number of parameters (twenty) (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Improve robustness of <application>libpq</application>'s code to recover
      from errors during <command>COPY FROM STDIN</command> (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Avoid including conflicting readline and editline header files
      when both libraries are installed (Zdenek Kotala)
     </para>
    </listitem>

    <listitem>
     <para>
      Update time zone data files to <application>tzdata</application> release 2009l
      for DST law changes in Bangladesh, Egypt, Jordan, Pakistan,
      Argentina/San_Luis, Cuba, Jordan (historical correction only),
      Mauritius, Morocco, Palestine, Syria, Tunisia.
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-1-17">
  <title>Version 8.1.17</title>

  <note>
  <title>Date de version</title>
  <simpara>2009-03-16</simpara>
  </note>

  <para>
   Cette version contient des corrections de la version 8.1.16.
   Pour plus d'informations sur les nouvelles fonctionnalités de la
   version majeure 8.1, voir <xref linkend="release-8-1"/>.
  </para>

  <sect2>
   <title>Migration vers la version 8.1.17</title>

   <para>
    Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
    version 8.1.X. Néanmoins, si vous mettez à jour à partir d'une version
    antérieure à la 8.1.15, voir les notes de sortie de la 8.1.15.
   </para>

  </sect2>

  <sect2>
   <title>Modifications</title>

   <itemizedlist>

    <listitem>
     <para>
      Correction de crashs suite à des récursions erronées dûes à l'échec d'une
      conversion d'encodage (Tom)
     </para>

     <para>
      Cette modification étend les corrections réalisées lors des deux
      précédentes versions mineures pour les même scénarios. Les corrections
      déjà réalisées étaient ciblées sur les problèmes rencontrés, mais nous
      nous apercevons maintenant que <emphasis>toute</emphasis> erreur renvoyée
      par une fonction de conversion d'encodage pouvait entraîner une récursion
      infinie pour indiquer l'erreur. La solution est donc de désactiver toute
      traduction et conversion d'encodage. Le message d'erreur est renvoyé en
      ASCII simple si nous découvrons que nous sommes dans une situation
      susceptible d'entraîner une récursion infinie.
      (CVE-2009-0922)
     </para>
    </listitem>

    <listitem>
     <para>
      N'autorise plus <command>CREATE CONVERSION</command> avec les mauvais
      encodages pour la fonction de conversion spécifiée (Heikki)
     </para>

     <para>
      Ceci permet de prévenir un scénario possible pour un échec de conversion
      d'encodage. Le changement précédent permet de se protéger contre les
      autres échecs du même type.
     </para>
    </listitem>

    <listitem>
     <para>
      Correction d'un crash lorsque <function>to_char()</function> a pour
      argument des codes de format inappropriés pour la donnée en argument
      (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction de la décompilation de <literal>CASE WHEN</literal> lorsque
      cette instruction est utilisée avec une coercion explicite
      (Tom)
     </para>

     <para>
      Cette erreur pouvait entraîner des échecs de type Assert pour les binaires
      compilés avec l'option Assert activé. Elle pouvait aussi entraîner des
      des messages d'erreur <quote>unexpected CASE WHEN clause</quote> dans
      d'autres cas lors de l'examen ou de la sauvegarde d'une vue.
     </para>
    </listitem>

    <listitem>
     <para>
      Correction d'une mauvaise affectation possible du propriétaire du rowtype
      d'une table TOAST (Tom)
     </para>

     <para>
      Si <command>CLUSTER</command> ou une variante de <command>ALTER
      TABLE</command> qui ré-écrit la table étaient exécutées par quelqu'un
      d'autre que le propriétaire de la table, l'entrée
      <structname>pg_type</structname> pour la table TOAST pouvait se trouver
      changer de propriétaire (en utilisant l'identifiant de l'utilisateur qui
      a exécuté la commande). Ceci ne pose pas de problèmes immédiatement car
      les droits sur le rowtype du TOAST ne sont pas examinés après chaque
      opération ordinaire de la base de données. Néanmoins, cela peut amener
      des échecs inattendus si une personne tente plus tard de supprimer le rôle
      qui a exécuté la commande (en 8.1 ou 8.2) ou des messages d'avertissement
      du type <quote>propriétaire du type de données semble invalide</quote>
      avec <application>pg_dump</application> après avoir supprimé l'utilisateur
      (en 8.3).
     </para>
    </listitem>

    <listitem>
     <para>
      Nettoyage complet des variables de statut de PL/pgSQL à la sortie d'un
      bloc (Ashesh Vashi et Dave Page)
     </para>

     <para>
      Ceci n'est pas un problème avec PL/pgSQL lui-même, mais l'omission pouvait
      entraîner un crash du debogueur PL/pgSQL lors de l'examen de l'état d'une
      fonction.
     </para>
    </listitem>

    <listitem>
     <para>
      Ajout de <literal>MUST</literal> (Mauritius Island Summer Time) dans la
      liste par défaut des abréviations connues de fuseau horaire (Xavier
      Bugaud)
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-1-16">
  <title>Version 8.1.16</title>

  <note>
  <title>Date de version</title>
  <simpara>2009-02-02</simpara>
  </note>

  <para>
   Cette version contient des corrections de la version 8.1.15.
   Pour plus d'informations sur les nouvelles fonctionnalités de la
   version majeure 8.1, voir <xref linkend="release-8-1"/>.
  </para>

  <sect2>
   <title>Migration vers la version 8.1.16</title>

   <para>
    Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
    version 8.1.X. Néanmoins, si vous mettez à jour à partir d'une version
    antérieure à la 8.1.2, voir les notes de sortie de la 8.1.2.
   </para>

  </sect2>

  <sect2>
   <title>Changements</title>

   <itemizedlist>

    <listitem>
     <para>
      Correction d'un arrêt brutal dans l'autovacuum (Alvaro)
     </para>

     <para>
      Cet arrêt survient seulement après un VACUUM d'une base complète exécuté
      dans le but d'éviter une ré-utilisation anormale des identifiants de
      transactions. Donc cela arrive peut fréquemment et est difficile à
      pister.
     </para>
    </listitem>

    <listitem>
     <para>
      Amélioration de la gestion des URL dans la fonction
      <function>headline()</function> (Teodor)
     </para>
    </listitem>

    <listitem>
     <para>
      Amélioration de la gestion des lignes trop longues dans la fonction
      <function>headline()</function> (Teodor)
     </para>
    </listitem>

    <listitem>
     <para>
      Empêche des échecs ou des mauvaises conversions avec Assert si une
      conversion d'encodage est créé avec la mauvaise fonction de conversion
      pour la paire spécifiée des encodages (Tom, Heikki)
     </para>
    </listitem>

    <listitem>
     <para>
      Évite un verrou inutile des petites tables dans <command>VACUUM</command>
      (Heikki)
     </para>
    </listitem>

    <listitem>
     <para>
      S'assure que le contenu d'un curseur conservable ne dépend pas du contenu
      des tables TOAST (Tom)
     </para>

     <para>
      Auparavant, des valeurs de champ large dans un résultat de curseur
      pouvaient être représentées comme des pointeurs TOAST, ce qui causerait
      un échec si la table référencée était supprimée avant la lecture du
      curseur ou si la valeur large était supprimée puis subissait un VACUUM.
      Ceci ne peut pas arriver avec un curseur standard mais le pourrait avec
      un curseur qui est conservé après sa transaction de création.
     </para>
    </listitem>

    <listitem>
     <para>
      Correction de variables non initialisées dans la fonction
      <function>get_covers()</function> de <filename>contrib/tsearch2</filename>
      (Teodor)
     </para>
    </listitem>

    <listitem>
     <para>
      Toute la documentation référence maintenant <literal>pgsql-bugs</literal>
      et/ou <literal>pgsql-hackers</literal>, au lieu des listes obsolètes comme
      <literal>pgsql-ports</literal> et <literal>pgsql-patches</literal> (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Mise à jour des fichiers de fuseaux horaires avec la version 2009a de
      <application>tzdata</application> (pour le Kathmandou et des corrections
      historiques de DST en Switzerland et à Cuba)
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-1-15">
  <title>Version 8.1.15</title>

  <note>
  <title>Date de sortie</title>
  <simpara>2008-11-03</simpara>
  </note>

  <para>
   Cette version contient des corrections de la version 8.1.14.
   Pour plus d'informations sur les nouvelles fonctionnalités de la
   version majeure 8.1, voir <xref linkend="release-8-1"/>.
  </para>

  <sect2>
   <title>Migration vers la version 8.1.15</title>

   <para>
    Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
    version 8.1.X. Néanmoins, si vous mettez à jour à partir d'une version
    antérieure à la 8.1.2, voir les notes de sortie de la 8.1.2.
   </para>

  </sect2>

  <sect2>
   <title>Modifications</title>

   <itemizedlist>

    <listitem>
     <para>
      Correction d'une corruption d'index GiST. L'entrée d'index marquée comme
      <quote>morte</quote> après une suppression n'était pas la bonne (Teodor)
     </para>

     <para>
      Cela peut avoir comme conséquence des échecs dans les recherches par
      index pour des lignes qu'elles auraient dû trouver.
     </para>
    </listitem>

    <listitem>
     <para>
      Correction d'un crash du serveur lorsque l'encodage client ne peut pas
      représenter une version convertie du message d'erreur (Tom)
     </para>

     <para>
      Nous avons déjà corrigé des problèmes identiques dans le passé, mais le
      problème est toujours d'actualité si le message <quote>le caratère n'a
      pas d'équivalent</quote> ne peut pas être converti. La correction revient à
      désactiver la transformation et à renvoyer le message d'erreur en ASCII
      brut quand nous détectons cette situation.
     </para>
    </listitem>

    <listitem>
     <para>
      Correction d'un crash possible lorsque des fonctions profondément
      imbriquées sont appelées à partir d'un trigger (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction d'une mauvaise expansion de requêtes de règles quand un
      sous-<literal>SELECT</literal> apparaît dans un appel de fonction d'un
      <literal>FROM</literal>,  d'une liste <literal>VALUES</literal> multi-lignes ou
      d'une liste <literal>RETURNING</literal> (Tom)
     </para>

     <para>
      Le symptôme habituel de ce problème est une erreur <quote>type de noeud
      inconnu</quote>.
     </para>
    </listitem>

    <listitem>
     <para>
      S'assure qu'une erreur est renvoyée quand une fonction trigger PL/pgsql
      nouvellement définie est appelée comme une fonction normale (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Empêche une collision possible du <structfield>relfilenode</structfield>
      lors du déplacement d'une table vers un autre tablespace avec
      <command>ALTER SET TABLESPACE</command> (Heikki)
     </para>

     <para>
      La commande essaie de ré-utiliser le nom du fichier existant au lieu d'un
      prendre un qu'on sait inutilisé dans le répertoire de destination.
     </para>
    </listitem>

    <listitem>
     <para>
      Correction de la génération du résumé (« headline ») par tsearch2 quand
      l'élément de la requête correspond au premier mot d'un texte (Sushant
      Sinha)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction de l'affichage de secondes fractionnées dans des valeurs
      d'intervalle lors de l'utilisation d'un style de date non ISO dans une
      construction ayant utilisé l'option <option>--enable-integer-datetimes</option>
      (Ron Mayer)
     </para>
    </listitem>

    <listitem>
     <para>
      S'assure que <function>SPI_getvalue</function> et <function>SPI_getbinval</function>
      fonctionnent correctement lorsque la ligne et le descripteur de ligne
      passés ont un nombre de colonnes différent (Tom)
     </para>

     <para>
      Cette situation est normale quand une table se voit ajouter ou supprimer
      des colonnes, mais ces deux fonctions ne le géraient pas correctement.
      La seule conséquence probable est l'envoi d'un message d'erreur erroné.
     </para>
    </listitem>

    <listitem>
     <para>
      Correction de l'analyse de <command>CREATE USER</command> par
      <application>ecpg</application> (Michael)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction d'une régression récente de <literal>pg_ctl restart</literal> (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Mise à jour des fichiers de données de fuseaux horaires vers la version
      2008i de <application>tzdata</application> (pour les modifications légales de DST en
      Argentine, au Brésil, à l'Île Maurice et en Syrie)
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-1-14">
  <title>Version 8.1.14</title>

  <note>
  <title>Date de sortie</title>
  <simpara>2008-09-22</simpara>
  </note>

  <para>
   This release contains a variety of fixes from 8.1.13.
   Pour plus d'informations sur les nouvelles fonctionnalités de la
   version majeure 8.1, voir <xref linkend="release-8-1"/>.
  </para>

  <sect2>
   <title>Migration vers la version 8.1.14</title>

   <para>
    Une sauvegarde/restauration n'est pas nécessaire aux utilisateurs de la version 8.1.X.
    However, if you are upgrading from a version earlier than 8.1.2,
    see the release notes for 8.1.2.
   </para>

  </sect2>

  <sect2>
   <title>Modifications</title>

   <itemizedlist>

    <listitem>
     <para>
      Widen local lock counters from 32 to 64 bits (Tom)
     </para>

     <para>
      This responds to reports that the counters could overflow in
      sufficiently long transactions, leading to unexpected <quote>lock is
      already held</quote> errors.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix possible duplicate output of tuples during a GiST index scan (Teodor)
     </para>
    </listitem>

    <listitem>
     <para>
      Add checks in executor startup to ensure that the tuples produced by an
      <command>INSERT</command> or <command>UPDATE</command> will match the target table's
      current rowtype (Tom)
     </para>

     <para>
      <command>ALTER COLUMN TYPE</command>, followed by re-use of a previously
      cached plan, could produce this type of situation.  The check protects
      against data corruption and/or crashes that could ensue.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <literal>AT TIME ZONE</literal> to first try to interpret its timezone
      argument as a timezone abbreviation, and only try it as a full timezone
      name if that fails, rather than the other way around as formerly (Tom)
     </para>

     <para>
      The timestamp input functions have always resolved ambiguous zone names
      in this order.  Making <literal>AT TIME ZONE</literal> do so as well improves
      consistency, and fixes a compatibility bug introduced in 8.1:
      in ambiguous cases we now behave the same as 8.0 and before did,
      since in the older versions <literal>AT TIME ZONE</literal> accepted
      <emphasis>only</emphasis> abbreviations.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix datetime input functions to correctly detect integer overflow when
      running on a 64-bit platform (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Improve performance of writing very long log messages to syslog (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix bug in backwards scanning of a cursor on a <literal>SELECT DISTINCT
      ON</literal> query (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix planner bug with nested sub-select expressions (Tom)
     </para>

     <para>
      If the outer sub-select has no direct dependency on the parent query,
      but the inner one does, the outer value might not get recalculated
      for new parent query rows.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix planner to estimate that <literal>GROUP BY</literal> expressions yielding
      boolean results always result in two groups, regardless of the
      expressions' contents (Tom)
     </para>

     <para>
      This is very substantially more accurate than the regular <literal>GROUP
      BY</literal> estimate for certain boolean tests like <replaceable>col</replaceable>
      <literal>IS NULL</literal>.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix PL/PgSQL to not fail when a <literal>FOR</literal> loop's target variable
      is a record containing composite-type fields (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix PL/Tcl to behave correctly with Tcl 8.5, and to be more careful
      about the encoding of data sent to or from Tcl (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix PL/Python to work with Python 2.5
     </para>

     <para>
      This is a back-port of fixes made during the 8.2 development cycle.
     </para>
    </listitem>

    <listitem>
     <para>
      Improve <application>pg_dump</application> and <application>pg_restore</application>'s
      error reporting after failure to send a SQL command (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <application>pg_ctl</application> to properly preserve postmaster
      command-line arguments across a <literal>restart</literal> (Bruce)
     </para>
    </listitem>

    <listitem>
     <para>
      Update time zone data files to <application>tzdata</application> release 2008f (for
      DST law changes in Argentina, Bahamas, Brazil, Mauritius, Morocco,
      Pakistan, Palestine, and Paraguay)
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>
 
 <sect1 id="release-8-1-13">
  <title>Version 8.1.13</title>

  <note>
  <title>Date de sortie</title>
  <simpara>2008-06-12</simpara>
  </note>

  <para>
   This release contains one serious and one minor bug fix over 8.1.12.
   Pour plus d'informations sur les nouvelles fonctionnalités de la
   version majeure 8.1, voir <xref linkend="release-8-1"/>.
  </para>

  <sect2>
   <title>Migration vers la version 8.1.13</title>

   <para>
    Une sauvegarde/restauration n'est pas nécessaire aux utilisateurs de la version 8.1.X.
    However, if you are upgrading from a version earlier than 8.1.2,
    see the release notes for 8.1.2.
   </para>

  </sect2>

  <sect2>
   <title>Modifications</title>

   <itemizedlist>

    <listitem>
     <para>
      Make <function>pg_get_ruledef()</function> parenthesize negative constants (Tom)
     </para>

     <para>
      Before this fix, a negative constant in a view or rule might be dumped
      as, say, <literal>-42::integer</literal>, which is subtly incorrect: it should
      be <literal>(-42)::integer</literal> due to operator precedence rules.
      Usually this would make little difference, but it could interact with
      another recent patch to cause
      <productname>PostgreSQL</productname> to reject what had been a valid
      <command>SELECT DISTINCT</command> view query.  Since this could result in
      <application>pg_dump</application> output failing to reload, it is being treated
      as a high-priority fix.  The only released versions in which dump
      output is actually incorrect are 8.3.1 and 8.2.7.
     </para>
    </listitem>

    <listitem>
     <para>
      Make <command>ALTER AGGREGATE ... OWNER TO</command> update
      <structname>pg_shdepend</structname> (Tom)
     </para>

     <para>
      This oversight could lead to problems if the aggregate was later
      involved in a <command>DROP OWNED</command> or <command>REASSIGN OWNED</command>
      operation.
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-1-12">
  <title>Version 8.1.12</title>

  <note>
  <title>Date de sortie</title>
  <simpara>never released</simpara>
  </note>

  <para>
   This release contains a variety of fixes from 8.1.11.
   Pour plus d'informations sur les nouvelles fonctionnalités de la
   version majeure 8.1, voir <xref linkend="release-8-1"/>.
  </para>

  <sect2>
   <title>Migration vers la version 8.1.12</title>

   <para>
    Une sauvegarde/restauration n'est pas nécessaire aux utilisateurs de la version 8.1.X.
    However, if you are upgrading from a version earlier than 8.1.2,
    see the release notes for 8.1.2.
   </para>

  </sect2>

  <sect2>
   <title>Modifications</title>

   <itemizedlist>

    <listitem>
     <para>
      Fix <command>ALTER TABLE ADD COLUMN ... PRIMARY KEY</command> so that the new
      column is correctly checked to see if it's been initialized to all
      non-nulls (Brendan Jurd)
     </para>

     <para>
      Previous versions neglected to check this requirement at all.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix possible <command>CREATE TABLE</command> failure when inheriting the
      <quote>same</quote> constraint from multiple parent relations that
      inherited that constraint from a common ancestor (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix conversions between ISO-8859-5 and other encodings to handle
      Cyrillic <quote>Yo</quote> characters (<literal>e</literal> and <literal>E</literal> with
      two dots) (Sergey Burladyan)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix a few datatype input functions
      that were allowing unused bytes in their results to contain
      uninitialized, unpredictable values (Tom)
     </para>

     <para>
      This could lead to failures in which two apparently identical literal
      values were not seen as equal, resulting in the parser complaining
      about unmatched <literal>ORDER BY</literal> and <literal>DISTINCT</literal>
      expressions.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix a corner case in regular-expression substring matching
      (<literal>substring(<replaceable>string</replaceable> from
      <replaceable>pattern</replaceable>)</literal>) (Tom)
     </para>

     <para>
      The problem occurs when there is a match to the pattern overall but
      the user has specified a parenthesized subexpression and that
      subexpression hasn't got a match.  An example is
      <literal>substring('foo' from 'foo(bar)?')</literal>.
      This should return NULL, since <literal>(bar)</literal> isn't matched, but
      it was mistakenly returning the whole-pattern match instead (ie,
      <literal>foo</literal>).
     </para>
    </listitem>

    <listitem>
     <para>
      Update time zone data files to <application>tzdata</application> release 2008c (for
      DST law changes in Morocco, Iraq, Choibalsan, Pakistan, Syria, Cuba,
      Argentina/San_Luis, and Chile)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix incorrect result from <application>ecpg</application>'s
      <function>PGTYPEStimestamp_sub()</function> function (Michael)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix core dump in <filename>contrib/xml2</filename>'s
      <function>xpath_table()</function> function when the input query returns a
      NULL value (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <filename>contrib/xml2</filename>'s makefile to not override
      <literal>CFLAGS</literal> (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <literal>DatumGetBool</literal> macro to not fail with <application>gcc</application>
      4.3 (Tom)
     </para>

     <para>
      This problem affects <quote>old style</quote> (V0) C functions that
      return boolean.  The fix is already in 8.3, but the need to
      back-patch it was not realized at the time.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix longstanding <command>LISTEN</command>/<command>NOTIFY</command>
      race condition (Tom)
     </para>

     <para>
      In rare cases a session that had just executed a
      <command>LISTEN</command> might not get a notification, even though
      one would be expected because the concurrent transaction executing
      <command>NOTIFY</command> was observed to commit later.
     </para>

     <para>
      A side effect of the fix is that a transaction that has executed
      a not-yet-committed <command>LISTEN</command> command will not see any
      row in <structname>pg_listener</structname> for the <command>LISTEN</command>,
      should it choose to look; formerly it would have.  This behavior
      was never documented one way or the other, but it is possible that
      some applications depend on the old behavior.
     </para>
    </listitem>

    <listitem>
     <para>
      Disallow <command>LISTEN</command> and <command>UNLISTEN</command> within a
      prepared transaction (Tom)
     </para>

     <para>
      This was formerly allowed but trying to do it had various unpleasant
      consequences, notably that the originating backend could not exit
      as long as an <command>UNLISTEN</command> remained uncommitted.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix rare crash when an error occurs during a query using a hash index
      (Heikki)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix input of datetime values for February 29 in years BC (Tom)
     </para>

     <para>
      The former coding was mistaken about which years were leap years.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <quote>unrecognized node type</quote> error in some variants of
      <command>ALTER OWNER</command> (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <application>pg_ctl</application> to correctly extract the postmaster's port
      number from command-line options (Itagaki Takahiro, Tom)
     </para>

     <para>
      Previously, <literal>pg_ctl start -w</literal> could try to contact the
      postmaster on the wrong port, leading to bogus reports of startup
      failure.
     </para>
    </listitem>

    <listitem>
     <para>
      Use <option>-fwrapv</option> to defend against possible misoptimization
      in recent <application>gcc</application> versions (Tom)
     </para>

     <para>
      This is known to be necessary when building <productname>PostgreSQL</productname>
      with <application>gcc</application> 4.3 or later.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix display of constant expressions in <literal>ORDER BY</literal>
      and <literal>GROUP BY</literal> (Tom)
     </para>

     <para>
      An explictly casted constant would be shown incorrectly.  This could
      for example lead to corruption of a view definition during
      dump and reload.
     </para>
    </listitem>

    <listitem>
     <para>
      Fix <application>libpq</application> to handle NOTICE messages correctly
      during COPY OUT (Tom)
     </para>

     <para>
      This failure has only been observed to occur when a user-defined
      datatype's output routine issues a NOTICE, but there is no
      guarantee it couldn't happen due to other causes.
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-8-1-11">
  <title>Version 8.1.11</title>

  <note>
  <title>Date de sortie</title>
  <simpara>2008-01-07</simpara>
  </note>

  <para>
   Cette version contient divers correctifs de la version 8.1.10,
   et inclut des correctifs d'importantes failles de sécurité.
   Pour plus d'informations sur les nouvelles fonctionnalités de la
   version majeure 8.1, voir <xref linkend="release-8-1"/>.
  </para>

  <para>
   Ceci est la dernière version 8.1.X pour laquelle la communauté
   <productname>PostgreSQL</productname> produira des paquets binaires pour
   <productname>Windows</productname>.
   Les utilisateurs Windows sont encouragés à migrer vers la version 8.2.X ou
   ultérieures car il existe des corrections spécifiques à Windows dans la
   version 8.2.X qui ne peuvent pas être portées aux anciennes versions. La
   8.1.X continuera à être supportée sur les autres plateformes.
  </para>

  <sect2>
   <title>Migration vers la version 8.1.11</title>

   <para>
    Les utilisateurs des versions 8.1.X n'ont pas besoin d'effectuer d'une
    étape de sauvegarde/restauration. Néanmoins, si vous mettez à jour
    depuis une version précédant la 8.1.2, lire les notes de version de la
    8.1.2.
   </para>

  </sect2>

  <sect2>
   <title>Modifications</title>

   <itemizedlist>

    <listitem>
     <para>
      Empêche les fonctions d'index de s'exécuter avec les droits de
      l'utilisateur exécutant <command>VACUUM</command>,
      <command>ANALYZE</command>, etc (Tom)
     </para>

     <para>
      Les fonctions utilisées dans les expressions d'index et dans les index
      partiels sont évaluées quand une nouvelle entrée est faite dans la table.
      Depuis longtemps, ceci est un risque, un cheval de Troie pouvant être
      exécuté si une personne modifie une table appartenant à un utilisateur
      à qui on ne peut faire confiance (Notez ques les triggers, valeurs par
      défaut, contraintes de vérification, etc posent le même type de risque.)
      Mais les fonctions utilisées dans des index sont un danger supplémentaire
      car ils seront exécutés par des opérations de maintenance périodiques
      comme un <command>VACUUM FULL</command>, opérations généralement
      exécutées par des super-utilisateurs. Donc, un utilisateur cherchant à
      gagner accès au système peut exécuter du code avec des droits de
      super-utilisateur en ajoutant une définition d'index avec un code de
      cheval de Troie, puis attendre la prochaine exécution des opérations de
      maintenance. La correction s'arrange pour que les opérations standards de
      maintenance (ceci incluant <command>VACUUM</command>,
      <command>ANALYZE</command>, <command>REINDEX</command> et
      <command>CLUSTER</command>) s'exécutent en tant que propriétaire de la
      table plutôt qu'en tant qu'appelent, en utilisant le même mécanisme de
      bascule de droits utilisé dans les fonctions <literal>SECURITY
      DEFINER</literal>. Pour empêcher un coutournement de cette mesure de
      sécurité, l'exécution de <command>SET SESSION AUTHORIZATION</command>
      et <command>SET ROLE</command> est maintenant interdit dans un contexte
      <literal>SECURITY DEFINER</literal>. (CVE-2007-6600)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction de bogues relatifs aux expressions rationnelles (Tom, Will
      Drewry)
     </para>

     <para>
      Des motifs d'expressions rationnelles conçus très précisément pourraient
      causer des arrêts brutaux, des boucles infinies (ou presque) et/ou une
      consommation massive de mémoire. Tout ceci représente un risque de
      déni de service pour les applications qui acceptent des motifs de
      recherche via des expressions rationnelles à partir de sources indignes
      de confiance. (CVE-2007-4769, CVE-2007-4772, CVE-2007-6067)
     </para>
    </listitem>

    <listitem>
     <para>
      Oblige l'utilisation de l'authentification par mot de passe pour les
      utilisateurs standards de <filename>/contrib/dblink</filename>, c'est
      une mesure de sécurité (Joe)
     </para>

     <para>
      La correction apparue dans 8.1.10 était incomplète, car elle ne corrigeait
      la faille que pour certaines fonctions <filename>dblink</filename>. 
      (CVE-2007-6601, CVE-2007-3278)
     </para>
    </listitem>

    <listitem>
     <para>
      Mise à jour des fichiers de données de fuseaux horaires avec la version
      2007k de <application>tzdata</application> (en particulier, les
      modifications récentes en Argentine) (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Améliore la gestion du planificateur pour les estimations de LIKE et
      des expressions rationnelles dans les locales autres que C (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction d'un échec du planificateur dans certaines cas de
      <literal>WHERE false AND var IN (SELECT ...)</literal> (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Préserve les paramètres du tablespace et de stockage des index qui sont
      reconstruits suite à un <command>ALTER TABLE ... ALTER COLUMN
      TYPE</command> (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Fait que la restauration d'archive commence toujours une nouvelle
      timeline, plutôt que ne le faire que quand une heure d'arrêt de la
      restauration ne soit utilisée (Simon)
     </para>

     <para>
      Ceci évite un risque très particulier de tentative de ré-écriture sur
      une copie archivée existante du dernier journal de transaction. Cela
      semble plus simple et plus clair que la définition originale.
     </para>
    </listitem>

    <listitem>
     <para>
      <command>VACUUM</command> n'utilise pas tout
      <varname>maintenance_work_mem</varname> lorque la table est trop petite
      pour que cela est la moindre utilité (Alvaro)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction d'un arrêt brutal potentiel dans
      <function>translate()</function> lors de l'utilisation d'un encodage
      multi-octets de la base (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction d'un dépassement de capacité dans <literal>extract(epoch from
      interval)</literal> pour les intervalles excédant 68 ans (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction de PL/Perl pour qu'il n'échoue pas quand une expression
      rationnelle UTF-8 est utilisée dans une fonction de confiance
      (Andrew)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction de PL/Perl pour continuer l'exécution quand le langage Perl
      de la plateforme définit le type <literal>bool</literal> en tant que
      <literal>int</literal> plutôt qu'en tant que <literal>char</literal>
      (Tom)
     </para>

     <para>
      Bien que ceci peut arriver partout, aucune construction standard de Perl
      ne faisait cela... jusqu'à <productname>Mac OS X</productname> 10.5.
     </para>
    </listitem>

    <listitem>
     <para>
      Correction de PL/Python pour ne pas causer un arrêt brutal sur des
      messages d'exception longs (Alvaro)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction de <application>pg_dump</application> pour qu'il gère
      correctement les tables héritées qui ont des expressions par défaut
      différentes de celles de leur parents (Tom)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction d'un crash de <application>libpq</application> quand
      <varname>PGPASSFILE</varname> fait référence à un fichier qui n'est
      pas un fichier texte (Martin Pitt)
     </para>
    </listitem>

    <listitem>
     <para>
      Corrections de l'analyseur <application>ecpg</application> (Michael)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction réalisée pour que <filename>contrib/pgcrypto</filename>
      puisse se défendre contre les bibliothèques
      <application>OpenSSL</application> qui échouent sur des clés de plus de
      128 bits&nbsp;; ce qui est le cas sur au moins certaines versions de
      Solaris (Marko Kreen)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction pour que <function>crosstab()</function>, du module
      <filename>contrib/tablefunc</filename>, gère les rowid NULL comme catégorie (Joe)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction des routines d'affichage de <type>tsvector</type> et
      <type>tsquery</type> pour échapper correctement les antislashs (Teodor,
      Bruce)
     </para>
    </listitem>

    <listitem>
     <para>
      Correction d'un arrêt brutal de <function>to_tsvector()</function> sur
      les très grosses chaînes en entrée (Teodor)
     </para>
    </listitem>

    <listitem>
     <para>
      Nécessite l'utilisation d'une version spécifique
      d'<productname>Autoconf</productname> lors de la re-génération du script
      <command>configure</command> (Peter)
     </para>

     <para>
      Ceci affecte seulement les développeurs et les créateurs de package.
      La modification a pour but d'empêcher l'utilisation accidentelle de
      combinaisons non testées des versions d'<productname>Autoconf</productname>
      et de <productname>PostgreSQL</productname>. Vous pouvez supprimer la
      vérification de la version si vous voulez vraiment utiliser une version
      différente d'<productname>Autoconf</productname>, mais c'est de votre
      responsabilité.
     </para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

  <sect1 id="release-8-1-10">
   <title>Version 8.1.10</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2007-09-17</simpara>
   </note>

   <para>
    Cette version contient divers correctifs de la version 8.1.9.
   Pour plus d'informations sur les nouvelles fonctionnalités de la
   version majeure 8.1, voir <xref linkend="release-8-1"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.1.10</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.1.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.1.2, voir les notes de sortie de la 8.1.2.
    </para>

   </sect2>

   <sect2>
    <title>Modifications</title>

    <itemizedlist>

     <listitem>
      <para>
       <command>CREATE DOMAIN ... DEFAULT NULL</command> fonctionne
       correctement (Tom)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       le type de données <type>interval</type> accepte désormais les entrées
       constituées uniquement de millisecondes ou microsecondes (Neil)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       l'insertion des index rtree est accélérée (Teodor)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       la journalisation excessive des messages d'erreur <acronym>SSL</acronym>
       est corrigée (Tom)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       la journalisation est corrigée de sorte que les messages ne sont plus
       entremêlés lorsque syslog est utilisé (Andrew)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       le plantage lorsque la journalisation de
       <varname>log_min_error_statement</varname> n'a plus de mémoire
       disponible est corrigé (Tom)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       la gestion incorrecte de certains cas limites de clés étrangères est
       corrigée (Tom)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       <command>REINDEX</command> et <command>CLUSTER</command> ne plantent
       plus en tentant de travailler sur les tables temporaires d'autres
       sessions (Alvaro)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       les règles de la base de données concernant les fuseaux horaires, en
       particulier les changements prévus pour la Nouvelle-Zélande, sont mises
       à jour (Tom)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       les sockets et sémaphores Windows sont améliorés (Magnus)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       le nom du fuseau horaire (<literal>%Z</literal>) dans les estampilles
       temporelles des journaux sous Windows sont supprimés parce qu'il peut y
       avoir des incompatibilités d'encodage (Tom)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       les utilisateurs dépourvus de droit superutilisateur qui utilisent 
       <filename>/contrib/dblink</filename> ne peuvent utiliser que
       l'authentification par mot de passe, pour des raisons de sécurité
       (Joe).
      </para>
     </listitem>

    </itemizedlist>

   </sect2>
  </sect1>

  <sect1 id="release-8-1-9">
   <title>Version 8.1.9</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2007-04-23</simpara>
   </note>

   <para>
    Cette version contient quelques corrections de la 8.1.8, dont la
    correction d'une faille de sécurité.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.1, voir <xref linkend="release-8-1"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.1.9</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.1.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.1.2, voir les notes de sortie de la 8.1.2.
    </para>

   </sect2>

   <sect2>
    <title>Modifications</title>

    <itemizedlist>

     <listitem>
     <para>
      Supporte le placement explicite du schéma des tables temporaires dans
      <varname>search_path</varname>, et désactive sa recherche pour les fonctions
      et opérateurs (Tom)
     </para>
     <para>
      Ceci est nécessaire pour autoriser une fonction en mode security-definer
      à configurer une valeur sécurisée de <varname>search_path</varname>. Sans cela,
      un utilisateur SQL sans droit peut utiliser des objets temporaires pour
      exécuter du code avec une fonction possédant les droits du créateur de
      la fonction (CVE-2007-2138). Voir <command>CREATE FUNCTION</command> pour plus
      d'informations.
     </para>
     </listitem>

     <listitem>
     <para>
      Correction d'arrêts brutaux dans <filename>/contrib/tsearch2</filename> (Teodor)
     </para>
     </listitem>

     <listitem>
     <para>
      Nécessite l'exécution de <command>COMMIT PREPARED</command> dans la
      même base que celle utilisée par la transaction qui l'a préparé
      (Heikki)
     </para>
     </listitem>

     <listitem>
     <para>
      Correction d'un bogue pouvant corrompre des données dans la façon
      dont <command>VACUUM FULL</command> gère les chaînes <command>UPDATE</command>
      (Tom, Pavan Deolasee)
     </para>
     </listitem>

     <listitem>
     <para>
      Corrections du planificateur, avec des améliorations sur la logique de
      sélection des jointures externes et des parcours de bitmap (Tom)
     </para>
     </listitem>

     <listitem>
     <para>
      Correction d'un PANIC lors de l'élargissement d'un index haché
      (bug introduit en 7.4.15) (Tom)
     </para>
     </listitem>

     <listitem>
     <para>
      Correction des spécifications des fuseaux horaires POSIX
      pour suivre les nouvelles règles USA DST (Tom)
     </para>
     </listitem>

    </itemizedlist>

   </sect2>
  </sect1>

  <sect1 id="release-8-1-8">
   <title>Version 8.1.8</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2007-02-07</simpara>
   </note>

   <para>
    Cette version contient une correction de la 8.1.7.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.1, voir <xref linkend="release-8-1"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.1.8</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.1.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.1.2, voir les notes de sortie de la 8.1.2.
    </para>

   </sect2>

   <sect2>
    <title>Modifications</title>

    <itemizedlist>

     <listitem>
     <para>
      Suppression d'une vérification trop restrictive pour la longueur du type
      dans les contraintes et les index fonctionnels (Tom)
     </para>
     </listitem>

    </itemizedlist>

   </sect2>
  </sect1>

  <sect1 id="release-8-1-7">
   <title>Version 8.1.7</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2007-02-05</simpara>
   </note>

   <para>
    Cette version contient quelques corrections de la 8.1.6, dont la
    correction d'une faille de sécurité.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.1, voir <xref linkend="release-8-1"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.1.7</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.1.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.1.2, voir les notes de sortie de la 8.1.2.
    </para>

   </sect2>

   <sect2>
    <title>Modifications</title>

    <itemizedlist>

     <listitem>
     <para>
      Suppression de failles de sécurité qui permettent à des utilisateurs
      connectés de lire la mémoire du serveur (backend)
      (Tom)
     </para>
     <para>
      Ces vulnérabilités impliquent de supprimer la vérification habituelle
      qu'une fonction renvoie le type de données qu'elle a déclaré, et de
      modifier le type de données de la colonne d'une table utilisée dans une
      fonction SQL (CVE-2007-0555, CVE-2007-0556).
      Cette erreur peut être facilement exploitée pour causer un arrêt brutal
      du serveur et pourrait être utilisée, en principe, pour lire un contenu
      de la base, contenu que l'utilisateur ne devrait pas pouvoir accéder.
     </para>
     </listitem>

     <listitem>
     <para>
      Correction d'un bogue rare où la séparation de page d'un index btree
      pourrait échouer à cause du choix d'un point de séparation infaisable.
      (Heikki Linnakangas)
     </para>
     </listitem>

     <listitem>
     <para>
      Amélioration des performances de <command>VACUUM</command> pour les bases
      de données avec de nombreuses tables (Tom)
     </para>
     </listitem>

     <listitem>
     <para>
      Correction du autovacuum pour éviter de laisser des identifiants de
      transaction temporaires dans les bases non connectables (Alvaro)
     </para>

     <para>
      Ce bogue affecte seulement la branche 8.1.
     </para>
     </listitem>

     <listitem>
     <para>
      Correction d'un bogue rare dans Assert() déclenché par <literal>UNION</literal> (Tom)
     </para>
     </listitem>

     <listitem>
     <para>
      Correction d'échecs erronées de type <quote>droit refusé</quote> survenant
      sur Windows à cause de tentatives de fsync sur des fichiers déjà
      supprimés (Magnus, Tom)
     </para>
     </listitem>

     <listitem>
     <para>
      Correction d'arrêts brutaux possibles lorsqu'une fonction PL/pgSQL en
      cours d'utilisation est mise à jour (Tom)
     </para>
     </listitem>

    </itemizedlist>

   </sect2>
  </sect1>

  <sect1 id="release-8-1-6">
   <title>Version 8.1.6</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2007-01-08</simpara>
   </note>

   <para>
    Cette version contient quelques corrections de la 8.1.5.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.1, voir <xref linkend="release-8-1"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.1.6</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.1.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.1.2, voir les notes de sortie de la 8.1.2.
    </para>

   </sect2>

   <sect2>
    <title>Modifications</title>

    <itemizedlist>

     <listitem>
      <para>
       Amélioration de la gestion de <function>getaddrinfo()</function> sur AIX
       (Tom)
      </para>

      <para>
       Ceci corrige un problème lors du lancement, entre autres, du récupérateur
       de statistiques.
      </para>
     </listitem>

     <listitem>
      <para>
       Correction de <application>pg_restore</application> pour gérer une
       sauvegarde au format tar contenant les objets larges (blobs) avec
       commentaires (Tom)
      </para>
     </listitem>

      <listitem>
       <para>
        Correction des erreurs <quote>failed to re-find parent key</quote> du
        <command>VACUUM</command> (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Nettoyage des fichiers cache <filename>pg_internal.init</filename> lors
	du re-démarrage du serveur (Simon)
       </para>

       <para>
        Ceci évite que les fichiers cache contiennent des données obsolètes
	après une récupération PITR.
       </para>
      </listitem>

      <listitem>
       <para>
        Correction d'un cas rare de tronquage d'une grosse relation à la limite
	du Go par <command>VACUUM</command> (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Correction d'un bogue causant des erreurs de verrouillage mortelle
	inutiles sur des verrous niveau ligne (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Corrections de bogues affectant les index hash de plusieurs Go (Tom)
       </para>
      </listitem>

     <listitem>
      <para>
       Correction d'un possible blocage mortel dans la gestion des signaux sous
       Windows (Teodor)
      </para>
     </listitem>

     <listitem>
      <para>
       Correction de l'erreur lors de la construction d'un
       <literal>ARRAY[]</literal> contenant plusieurs éléments vides (Tom)
      </para>
     </listitem>

     <listitem>
      <para>
       Correction d'une perte mémoire dans ecpg lors d'une connexion (Michael)
      </para>
     </listitem>

     <listitem>
      <para>
       Correction de la compilation sur Darwin (OS X) (Tom)
      </para>
     </listitem>

     <listitem>
      <para>
       <function>to_number()</function> et <function>to_char(numeric)</function>
       sont maintenant <literal>STABLE</literal>, et non plus
       <literal>IMMUTABLE</literal>, pour les nouvelles installations
       (<application>initdb</application> nécessaire) (Tom)
      </para>

      <para>
       Ceci a été modifié car <literal>lc_numeric</literal> peut modifier la
       sortie de ces fonctions.
      </para>
     </listitem>

     <listitem>
      <para>
       Amélioration de l'utilisation des expressions rationnelles qui utilisent
       des parenthèses (Tom)
      </para>

      <para>
       Ceci améliore aussi les performances de l'<literal>\d</literal> de
       <application>psql</application>.
      </para>
     </listitem>

     <listitem>
      <para>
       Mise à jour de la base des fuseaux horaires
      </para>

      <para>
       Ceci affecte les règles de changements d'heure en Australie et au Canada.
      </para>
     </listitem>

    </itemizedlist>

   </sect2>
  </sect1>

  <sect1 id="release-8-1-5">
   <title>Version 8.1.5</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2006-10-16</simpara>
   </note>

   <para>
    Cette version contient quelques corrections de la 8.1.4.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.1, voir <xref linkend="release-8-1"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.1.4</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.1.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.1.2, voir les notes de sortie de la 8.1.2.
    </para>

   </sect2>

   <sect2>
    <title>Modifications</title>

<itemizedlist>
<listitem><para>Interdiction des fonctions d'agrégat dans des commandes
  <command>UPDATE</command>, sauf à l'intérieur de sous-sélections (Tom)</para>
<para>Le comportement d'un tel agrégat est non prévisible et, dans la version 8.1.X,
  peut causer un arrêt brutal. Donc, il a été désactivé. Le standard SQL ne le
  permet pas non plus.</para></listitem>
<listitem><para>Correction d'un <quote>core dump</quote> quand un litéral sans
  type est pris pour un ANYARRAY</para></listitem>
<listitem><para>Correction d'un <quote>core dump</quote> lors des traces sur les
  durées pour le protocole étendu de requêtes quand un <command>COMMIT</command>
  ou un <command>ROLLBACK</command> est exécuté</para></listitem>
<listitem><para>Correction d'une mauvaise gestion des déclencheurs après quand
  une requête contient une fonction SQL renvoyant plusieurs lignes
  (Tom)</para></listitem>
<listitem><para>Correction de <command>ALTER TABLE ... TYPE</command> pour qu'il vérifie
<literal>NOT NULL</literal> dans une clause <literal>USING</literal> (Tom)</para></listitem>
<listitem><para>Correction de <function>string_to_array()</function> pour gérer des
  correspondances se surchargeant pour la chaîne de séparation</para>
<para>Par exemple, <literal>string_to_array('123xx456xxx789', 'xx')</literal>.
</para></listitem>
<listitem><para>Correction de <function>to_timestamp()</function> pour les formats
<literal>AM</literal>/<literal>PM</literal> (Bruce)</para></listitem>
<listitem><para>Correction du calcul de l'autovacuum qui décide de l'exécution
  d'<command>ANALYZE</command> (Alvaro)</para></listitem>
<listitem><para>Correction de quelques cas rares dans la correspondance de modèles
  pour les commandes <literal>\d</literal> de <application>psql</application></para></listitem>
<listitem><para>Correction de bogues corrompant les index dans /contrib/ltree
  (Teodor)</para></listitem>
<listitem><para>Nombreuses corrections de fiabilité dans <application>ecpg</application> (Joachim
Wieland)</para></listitem>
<listitem><para>Correction de l'échappement des antislashs dans /contrib/dbmirror</para></listitem>
<listitem><para>Corrections mineures dans /contrib/dblink et /contrib/tsearch2</para>
</listitem>
<listitem><para>Amélioration de l'efficacité des tables hash et des parcours
  d'index bitmap (Tom)</para></listitem>
<listitem><para>Correction de l'instabilité de la récupération de statistiques
  sur Windows (Tom, Andrew)</para></listitem>
<listitem><para>Correction de <varname>statement_timeout</varname> pour utiliser
  les bonnes unités sur Win32 (Bruce)</para>
<para>Dans les versions précédentes de la 8.1.X sur Win32, le délai était
  décalé d'un facteur de 100.</para></listitem>
<listitem><para>Corrections pour les compilateurs <acronym>MSVC</acronym> et
  <productname>Borland C++</productname> (Hiroshi Saito)</para></listitem>
<listitem><para>Corrections pour les compilateurs <systemitem class="osname">AIX</systemitem> et
<productname>Intel</productname> (Tom)</para></listitem>
<listitem><para>Correction d'un bug rare dans l'archivage continu (Tom)</para></listitem>
</itemizedlist>

   </sect2>
  </sect1>

  <sect1 id="release-8-1-4">
   <title>Version 8.1.4</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2006-05-23</simpara>
   </note>

   <para>
    Cette version contient quelques corrections de la 8.1.3 incluant des
    correctifs pour des problèmes de sécurité extrêmement sérieux.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.1, voir <xref linkend="release-8-1"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.1.4</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.1.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.1.2, voir les notes de sortie de la 8.1.2.
    </para>

    <para>
     Assurer une sécurité complète contre les attaques par injection SQL décrites
     dans CVE-2006-2313 et CVE-2006-2314 peuvent demander des modifications dans
     le code de l'application. Si vous avez des applications embarquant des
     chaînes non sûres dans des commandes SQL, vous devriez les examiner aussi
     rapidement que possible pour vous assurer qu'elles utilisent les techniques
     d'échappement recommandées. Dans la plupart des cas, les applications
     devraient utiliser des sous-routines fournies par des bibliothèques ou des
     pilotes (comme <function>PQescapeStringConn()</function> de
     <application>libpq</application>) pour réaliser l'échappement des chaînes
     plutôt que de se fier à un code <foreignphrase>ad hoc</foreignphrase>.
    </para>
   </sect2>

   <sect2>
    <title>Modifications</title>

<itemizedlist>
<listitem><para>Modification du serveur pour qu'il rejette les caractères
multi-octets mal codés dans tous les cas (Tatsuo, Tom)</para>
<para>Bien que <productname>PostgreSQL</productname> va dans cette direction
depuis un certain temps, les vérifications sont maintenant appliquées
uniformément à tous les codages et toutes les entrées de texte. Ce sont
maintenant des erreurs, et non plus des messages d'avertissement. Ce changement
sert à se défendre contre les attaques à base d'injection SQL du type décrit
dans CVE-2006-2313.
</para></listitem>

<listitem><para>Rejette des utilisations non sûres de <literal>\'</literal> dans les
chaînes</para>
<para>En tant que défense côté serveur contre les attaques de type injection
SQL décrit dans CVE-2006-2314, le serveur accepte maintenant seulement
<literal>''</literal> et plus <literal>\'</literal> comme représentation d'un
guillemet simple ASCII dans des chaînes SQL. Par défaut, <literal>\'</literal>
est rejetté seulement quand <varname>client_encoding</varname> est configuré
avec un codage client seul (SJIS, BIG5, GBK, GB18030 ou UHC), qui est le scénario
dans lequel l'injection SQL est possible. Un nouveau paramètre de configuration
<varname>backslash_quote</varname> est disponible pour ajuster ce comportement si
nécessaire. Notez qu'une sécurité complète contre
CVE-2006-2314 pourrait nécessiter des modifications du côté client&nbsp;; le but
de <varname>backslash_quote</varname> est en partie de rendre évident que les
clients non sécurisés sont non sécurisés.
</para></listitem>

<listitem><para>Modification des routines d'échappement de texte de
<application>libpq</application> pour le rendre conscient des considérations de
codage</para>
<para>Ceci corrige les applications utilisant <application>libpq</application>
pour les problèmes de sécurité décrits dans CVE-2006-2313 et CVE-2006-2314. Les
applications qui utilisent les connections concurrentes multiples de
<productname>PostgreSQL</productname> devraient migrer vers
<function>PQescapeStringConn()</function> et <function>PQescapeByteaConn()</function>
pour s'assurer que l'échappement est réalisé correctement pour les paramétrages
utilisés dans chaque connexion de base de données. Les applications qui font
des échappements de chaînes <quote>à la main</quote> devraient être modifiées
pour se fier à aux routines de la bibliothèques à la place.
</para></listitem>

<listitem><para>Correction de la sélection d'une clé faible dans pgcrypto (Marko Kreen)</para>
<para>Des erreurs dans la logique de ré-échantillonage de PRNG peuvent causer
la sélection d'une clé de session prévisible par
<function>pgp_sym_encrypt()</function> dans certains cas.
Ceci affecte seulement les constructions n'utilisant pas OpenSSL.
</para></listitem>

<listitem><para>Correction de quelques fonctions de conversion de codage</para>
<para><function>win1251_to_iso</function>, <function>alt_to_iso</function>,
<function>euc_tw_to_big5</function>, <function>euc_tw_to_mic</function>,
<function>mic_to_euc_tw</function> étaient toutes cassées à différents niveaux.
</para></listitem>

<listitem><para>Nettoyage des utilisations restantes et parasites de 
<literal>\'</literal> dans les chaînes (Bruce, Jan)</para></listitem>

<listitem><para>Make autovacuum visible in <structname>pg_stat_activity</structname>
(Alvaro)</para></listitem>

<listitem><para>Déasctivation de <literal>full_page_writes</literal> (Tom)</para>
<para>Dans certains cas, désactiver <literal>full_page_writes</literal> sera la
cause d'un échec de la récupération après un arrêt brutal. Une meilleure
correction sera disponible en 8.2&nbsp;; maintenant, on ne fait que la
désactiver.
</para></listitem>

<listitem><para>Corrections diverses sur le planificateur, en particulier pour
les parcours d'index bitmap et l'optimisation de MIN/MAX (Tom)</para></listitem>

<listitem><para>Correction d'une mauvaise optimisation dans les jointures
de fusion (Tom)</para>
<para>Les jointures externes peuvent quelque fois émettre plusieurs copies de
lignes sans correspondance.
</para></listitem>

<listitem><para>Correction d'un arrêt brutal lors de l'utilisation et de la
modification d'une fonction plpgsql dans la même transaction</para></listitem>

<listitem><para>Correction d'un replay WAL pour le cas où un index B-Tree a été
tronqué</para></listitem>

<listitem><para>Correction de <literal>SIMILAR TO</literal> pour les modèles impliquant
<literal>|</literal> (Tom)</para></listitem>

<listitem><para>Correction de <command>SELECT INTO</command> et <command>CREATE TABLE AS</command>
pour créer des tables dans le tablespace par défaut, et non pas dans le répertoire
base (Kris Jurka)</para></listitem>

<listitem><para>Correction du serveur pour qu'il utilise les paramètres
personnalisés DH SSL correctement (Michael Fuhr)</para></listitem>

<listitem><para>Amélioration des performances de qsort (Dann Corbit)</para>
<para>Actuellement, ce code est seulement utilisé sur Solaris.
</para></listitem>

<listitem><para>Correction de Bonjour pour les Intel Macs (Ashley Clark)</para></listitem>

<listitem><para>Correction de quelques pertes mémoires mineures</para></listitem>

<listitem><para>Correction d'un problème pour la demande du mot de passe sur
certaines systèmes Win32 (Robert Kinberg)</para></listitem>

<listitem><para>Amélioration de la gestion des valeurs par défaut dans les
domaines pour <application>pg_dump</application></para></listitem>

<listitem><para>Correction de <application>pg_dumpall</application> pour gérer
raisonnablement les utilisateurs et les groupes nommés de façon identique
(uniquement possible lors d'une sauvegarde d'un serveur de version antérieure
à la 8.1) (Tom)</para>
<para>L'utilisateur et le groupe seront assemblés en un seul rôle avec le droit
<literal>LOGIN</literal>. Auparavant, le rôle créé n'avait pas le droit
<literal>LOGIN</literal> le rendant inutilisable en tant que rôle de connexion.
</para></listitem>

<listitem><para>Correction de l'option <literal>-n</literal> de
<application>pg_restore</application> pour qu'elle fonctionne comme sa
description dans la documentation (Tom)</para></listitem>
</itemizedlist>

   </sect2>
  </sect1>
 
  <sect1 id="release-8-1-3">
   <title>Version 8.1.3</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2006-02-14</simpara>
   </note>

   <para>
    Cette version contient quelques corrections de la 8.1.2 et un très sérieux
    problème de sécurité.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.1, voir <xref linkend="release-8-1"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.1.3</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.1.X. Néanmoins, si vous mettez à jour à partir d'une version
     antérieure à la 8.1.2, voir les notes de sortie de la 8.1.2.
    </para>
   </sect2>

   <sect2>
    <title>Modifications</title>

<itemizedlist>

<listitem><para>Correction d'un bogue qui permettait à tout utilisateur connecté
d'exécuter <command>SET ROLE</command> avec tout autre identifiant utilisateur de la
base de donnée (CVE-2006-0553)</para>
<para>À cause d'une vérification inadéquate de la validité, un utilisateur
pouvait exploiter le cas spécial utilisé habituellement par <command>SET
ROLE</command> pour restaurer le paramétrage du rôle précédent après une erreur.
Ceci permettait à des utilisateurs ordinaires d'acquérir le statut de
superutilisateur par exemple. Le risque d'augmentation des droits existe
seulement en 8.1.0-8.1.2. Néanmoins, dans toutes les versions y compris la
7.3, il existe un bogue en relation dans <command>SET
SESSION AUTHORIZATION</command> qui permet à des utilisateurs non privilégiés
d'arrêter brutalement le serveur s'il a été compilé en activant les
assertions (ce qui n'est pas la valeur par défaut).
Merci à Akio Ishida pour nous avoir rapporté ce problème.
</para></listitem>

<listitem><para>Correction d'un bogue avec la logique de visibilité des
lignes dans les lignes insérées soi-même (Tom)</para>
<para>Dans des circonstances rares, une ligne insérée par la commande en cours
pourrait déjà être vue comme valide alors qu'elle ne le devrait pas. Corrige
un bogue ajoutée dans les versions 8.0.4, 7.4.9 et 7.3.11.
</para></listitem>

<listitem><para>Correction d'une condition qui pourrait amener une erreur de type
<quote>le fichier existe déjà</quote> lors de la création d'un fichier pg_clog
(Tom)</para></listitem>

<listitem><para>Correction des cas pouvant amener des arrêts brutaux si un
message d'invalidation de cache arrive juste au mauvais moment (Tom)</para></listitem>

<listitem><para>Vérification correcte des contraintes <literal>DOMAIN</literal> pour
les paramètres <literal>UNKNOWN</literal> dans les instructions préparées
(Neil)</para></listitem>

<listitem><para>S'assure que <command>ALTER COLUMN TYPE</command> traitera les
contraintes <literal>FOREIGN KEY</literal>, <literal>UNIQUE</literal> et
<literal>PRIMARY KEY</literal> dans le bon ordre (Nakano Yoshihisa)</para></listitem>

<listitem><para>Correction pour permettre la restauration de sauvegardes qui
avaient des références croisées de schémas pour les opérateurs personnalisés
(Tom)</para></listitem>

<listitem><para>Autorise <application>pg_restore</application> à continuer tranquillement
après un échec de <command>COPY</command>&nbsp;; auparavant, il essayait de traiter
les données restantes du <command>COPY</command> comme des commandes SQL (Stephen
Frost)</para></listitem>

<listitem><para>Correction du bogue <literal>unregister</literal> de
<application>pg_ctl</application> quand le répertoire des données n'est pas
spécifié (Magnus)</para></listitem>

<listitem><para>Correction des balises HTML de <function>PQprint</function>
dans <application>libpq</application> (Christoph Zwerschke)</para></listitem>

<listitem><para>Correction du bogue sur <application>ecpg</application> pour AMD64 et
PPC (Neil)</para></listitem>

<listitem><para>Autorise l'utilisation de <literal>SETOF</literal> et de
<literal>%TYPE</literal> ensemble dans des déclarations de type de résultat
des fonctions</para></listitem>

<listitem><para>Récupère proprement si une erreur survient lors du passage
des arguments en <application>PL/python</application> (Neil)</para></listitem>

<listitem><para>Correction d'une perte mémoire dans <function>plperl_return_next</function>
(Neil)</para></listitem>

<listitem><para>Correction de la gestion des locales par <application>PL/perl</application>
sur Win32 pour correspondre au moteur (Andrew)</para></listitem>

<listitem><para>Différentes corrections de l'optimiseur (Tom)</para></listitem>

<listitem><para>Correction d'un bogue quand <literal>log_min_messages</literal> est
configuré à <literal>DEBUG3</literal> ou plus bas dans le fichier <filename>postgresql.conf</filename>
sur Win32 (Bruce)</para></listitem>

<listitem><para>Correction l'option <literal>-L</literal> de spécification du chemin
des bibliothèques de <application>pgxs</application> pour Win32, Cygwin, OS X, AIX
(Bruce)</para></listitem>

<listitem><para>Vérification de l'activation de SID lors de la vérification
des droits administrateur sous Win32 (Magnus)</para></listitem>

<listitem><para>Rejette proprement les données de type date en dehors de la
plage (Kris Jurka)</para></listitem>

<listitem><para>Correction de portabilité pour tester la présence de
<function>finite</function> et <function>isinf</function> lors du configure (Tom)</para></listitem>

<listitem><para>Amélioration de la rapidité de <command>COPY IN</command> via libpq,
en évitant un appel noyau par ligne de données (Alon Goldshuv)</para></listitem>

<listitem><para>Amélioration de la rapidité de création de l'index pour
<filename>/contrib/tsearch2</filename> (Tom)</para></listitem>

</itemizedlist>

   </sect2>
  </sect1>

  <sect1 id="release-8-1-2">
   <title>Version 8.1.2</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2006-01-09</simpara>
   </note>

   <para>
    Cette version contient quelques corrections de la version 8.1.1.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.1, voir <xref linkend="release-8-1"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.1.2</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux utilisant une
     version 8.1.X. Néanmoins, vous pourriez avoir besoin de lancer la commande
     <command>REINDEX</command> sur les index des colonnes de type texte après la
     mise à jour si vous êtes affectés par les problèmes de locale ou de
     <application>plperl</application> décrits ci-dessous.
    </para>
   </sect2>

   <sect2>
    <title>Modifications</title>

<itemizedlist>

<listitem><para>Correction d'un code Windows de façon à ce que postmaster
continue au lieu de quitter s'il n'y a plus de place dans
ShmemBackendArray (Magnus)</para>
<para>Le comportement précédent pouvait amener à une situation de déni de
service si trop de demandes de connexion arrivaient en même temps. Ceci
s'applique <emphasis>seulement</emphasis> au port Windows.</para></listitem>

<listitem><para>Correction d'un bogue introduit dans la version 8.0 permettant à
ReadBuffer de renvoyer une page déjà utilisée comme nouvelle, causant
potentiellement des pertes de données récemment validées (Tom)</para></listitem>

<listitem><para>Correction des messages Describe au niveau protocole lancés
de l'extérieur d'une transaction ou à partir d'une transaction échouée
(Tom)</para></listitem>

<listitem><para>Correction de la comparaison de chaînes de caractères pour les
locales qui considèrent des combinaisons différentes de caractères comme égales,
comme le hongrois (Tom)</para>
<para>Ceci pourrait nécessiter l'exécution de la commande <command>REINDEX</command>
pour corriger les index existants sur des colonnes de type texte.</para></listitem>

<listitem><para>Configuration des variables d'environnement de la locale lors
du démarrage de postmaster pour s'assurer que <application>plperl</application> ne
changera pas de locale après</para>
<para>Ceci corrige un problème qui survenait si le <application>postmaster</application>
était lancé avec les variables d'environnement spécifiant une locale différente
que celle indiquée par <application>initdb</application>. Sous ces conditions, toute
utilisation de <application>plperl</application> pouvait amener une corruption des index.
Vous pourriez avoir besoin de lancer <command>REINDEX</command> pour corriger des
index existant sur des colonnes de type texte si cela vous arrivait.
</para></listitem>

<listitem><para>Permet un déplacement plus simple des répertoires d'installation
(Tom)</para>
<para>Les anciennes versions supportaient seulement un déplacement si tous les
chemins d'installation étaient identiques sauf pour le dernier composant.
</para></listitem>

<listitem><para>Empêche les arrêts brutaux causés par l'utilisation des codages
<literal>ISO-8859-5</literal> et <literal>ISO-8859-9</literal> (Tatsuo)</para></listitem>

<listitem><para>Correction d'un ancien bogue dans strpos() et dans le gestion
des expressions rationnelles de certains ensembles de caractères asiatiques
rarement utilisés (Tatsuo)
</para></listitem>

<listitem><para>Correction d'un bogue où le mode COPY CSV considérait tout
<literal>\.</literal> comme la terminaison du fichier</para>
<para>Le nouveau code requiert que <literal>\.</literal> apparaisse seul sur une ligne,
comme l'indique la documentation.</para></listitem>

<listitem><para>Fait que le mode COPY CSV place entre guillemets la valeur
littérale <literal>\.</literal> pour s'assurer qu'il ne puisse pas être
interprété comme un marqueur de fin de données (Bruce)</para></listitem>

<listitem><para>Quelques corrections pour les fonctions renvoyant <literal>RECORD</literal>
(Tom) </para></listitem>

<listitem><para>Correction du traitement de <filename>postgresql.conf</filename> pour
qu'une ligne finale sans retour chariot soit traitée proprement (Tom)
</para></listitem>

<listitem><para>Correction d'un bogue dans gen_salt de <filename>/contrib/pgcrypto</filename>,
qui l'empêchait d'utiliser l'espace disponible des grains de sel (salt) pour les
algorithmes MD5 et XDES (Marko Kreen, Solar Designer)</para>
<para>Les grains de sel ne sont pas affectés pour Blowfish et le DES
standard.</para></listitem>

<listitem><para>Correction d'un arrêt brutal d'autovacuum lors du traitement
des index d'expression</para></listitem>

<listitem><para>Correction de <filename>/contrib/dblink</filename> pour renvoyer une
erreur plutôt que de s'arrêter brutalement quand le nombre de colonnes spécifié
est différent de ce qui est réellement renvoyé par la requête (Joe)</para></listitem>

</itemizedlist>

   </sect2>
  </sect1>
 
  <sect1 id="release-8-1-1">
   <title>Version 8.1.1</title>

   <note>
   <title>Date de sortie</title>
   <simpara>2005-12-12</simpara>
   </note>

   <para>
    Cette version contient quelques corrections vers la 8.1.0.
    Pour plus d'informations sur les nouvelles fonctionnalités de la
    version majeure 8.1, voir <xref linkend="release-8-1"/>.
   </para>

   <sect2>
    <title>Migration vers la version 8.1.1</title>

    <para>
     Une sauvegarde/restauration n'est pas requise pour ceux qui utilisent 8.1.X.
    </para>
   </sect2>

   <sect2>
    <title>Modifications</title>

<itemizedlist>

<listitem><para>Correction d'optimisations incorrectes des conditions de
jointures externes (Tom)</para></listitem>

<listitem><para>Correction des problèmes avec de mauvais noms de colonne
rapportés dans les cas impliquant des sous-sélections applaties par l'optimiseur
(Tom)</para></listitem>

<listitem><para>Correction des échecs de mise à jour dans les scénarios impliquant
les contraintes de vérification (CHECK), les colonnes TOAST <emphasis>et</emphasis> les
index (Tom)</para></listitem>

<listitem><para>Correction des problèmes du processus d'écriture en tâche de
fond après avoir récupéré des erreurs (Tom)</para>
<para>
Le processus d'écriture en tâche de fond was found to leak buffer pins after write errors.
Bien que non fatal en soi, ceci pourrait amener des blocages mystérieux sur des
commandes VACUUM ultérieures.
</para>
</listitem>

<listitem><para>Empêche un échec si le client envoie un message de protocole
Bind quand la transaction en cours est déjà annulée</para></listitem>

<listitem><para>Corrections sur <filename>/contrib/tsearch2</filename> et <filename>/contrib/ltree</filename>
(Teodor)</para></listitem>

<listitem><para>Corrections de problèmes avec les messages d'erreur traduits
dans des langues qui requièrent un réordonnancement des mots, comme en turc&nbsp;;
corrections de problèmes avec des troncatures inattendues de chaînes et mauvais
affichage de la plus petite valeur bigint possible (Andrew, Tom)</para>
<para>Ces problèmes apparaissaient seulement sur les plateformes qui utilisaient
notre code <filename>port/snprintf.c</filename>, qui inclut des variantes BSD si
<literal>--enable-nls</literal> était donné, et peut-être d'autres. De plus, une forme
différente du problème de message d'erreur traduit pourrait apparaître sur
Windows dépendant de la version de <filename>libintl</filename> utilisée.
</para></listitem>

<listitem><para>Autorise de nouveau les spécifications de format
<literal>AM</literal>/<literal>PM</literal>, <literal>HH</literal>, <literal>HH12</literal> et <literal>D</literal>
pour <function>to_char(time)</function> et <function>to_char(interval)</function>.
(<function>to_char(interval)</function> devrait probablement utiliser
<literal>HH24</literal>.) (Bruce)</para></listitem>

<listitem><para>Corrections de compilation sur AIX, HPUX et MSVC (Tom, Hiroshi
Saito)</para></listitem>

<listitem><para>Amélioration de l'optimiseur (Tom)</para></listitem>

<listitem><para>Tente de nouveau les lectures et écritures de fichiers après
une erreur NO_SYSTEM_RESOURCES sous Windows (Qingqing Zhou)</para></listitem>

<listitem><para>Correction d'un échec intermittent quand <varname>log_line_prefix</varname>
inclut <literal>%i</literal></para></listitem>

<listitem><para>Empêche <application>autovacuum</application> de s'arrêter brutalement
lors d'une analyse (ANALYZE) d'un index d'expression (Alvaro)</para></listitem>

<listitem><para>Correction de problèmes avec ON COMMIT DELETE ROWS sur des
tables temporaires</para></listitem>

<listitem><para>Correction de problèmes quand un déclencheur modifie la sortie
d'une requête SELECT DISTINCT</para></listitem>

<listitem><para>Ajout d'un élément dans les notes de sortie de la version 8.1.0
sur la façon de migrer des séquences d'octets <literal>UTF-8</literal> invalides (Paul
Lindner)</para></listitem>
</itemizedlist>

   </sect2>
  </sect1>

  <sect1 id="release-8-1">
   <title>Version 8.1</title>

   <note>
    <title>Date de sortie</title>
    <simpara>2005-11-08</simpara>
   </note>

   <sect2>
    <title>Aperçu</title>
 
    <para>
     Modifications principales apportées par cette version&nbsp;:
    </para>

    <variablelist>

     <varlistentry>
      <term>
       Amélioration des accès concurrents au cache de tampon partagé (Tom)&nbsp;;
      </term>

      <listitem>
       <para>
        L'accès au cache de tampon partagé posait des problèmes d'extensibilité, 
	en particulier sur les systèmes multi-CPU. Dans cette version, la pose
	de verrous dans le gestionnaire de tampons a été modifiée pour réduire
	les collisions de verrous et améliorer l'extensibilité. 
	Le gestionnaire de tampon a été changé pour une politique de
	remplacement fonction d'un <quote>balayage horaire</quote>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>
       Les parcours d'index peuvent utiliser une carte en mémoire (Tom)&nbsp;;
      </term>

      <listitem>
       <para>
        Dans les versions précédentes, un seul index pouvait être utilisé
	pour les recherches sur une table. Avec cette fonctionnalité, si
	une requête contient 
        <command>WHERE tab.col1 = 4 and tab.col2 = 9</command>, 
	et qu'il n'y a pas d'index multi-colonnes sur <literal>col1</literal>
	et <literal>col2</literal>, mais qu'il y a un index sur <literal>col1</literal>
	et un autre sur <literal>col2</literal>, il est possible de parcourir les 
	deux index et de combiner leur résultat en mémoire. La récupération
	ne concerne alors que les lignes qui satisfont les restrictions sur 
	<literal>col1</literal> et <literal>col2</literal> simultanément. 
	C'est très utile dans les environnements à requêtes non-structurées
	nombreuses et pour lesquels il est impossible de construire 
	les index pour toutes les conditions d'accès.
	Les parcours de cartes sont utiles même dans le cas d'index simple, 
	puisqu'ils réduisent les accès aléatoires nécessaires. Un parcours
	de carte d'index est efficace pour la récupération de larges
	portions de table, contrairement aux parcours d'index pleins.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>
       Ajout de la validation à deux-phases (two-phase commit)
       (Heikki Linnakangas, Alvaro, Tom)&nbsp;;
      </term>
      
      <listitem>
       <para>
        La validation à deux phases permet la
	&laquo;&nbsp;prépartion&nbsp;&raquo; de transactions sur plusieurs 
	ordinateurs, et lorque tous les ordinateurs ont correctement
	préparer leurs transactions (aucune n'a échoué), toutes les
	transactions sont validées. Si une machine tombe après la préparation, 
	la transaction ainsi préparée peut être validée après le redémarrage de
	la machine. La nouvelle syntaxe inclut <command>PREPARE TRANSACTION</command>
	et <command>COMMIT/ROLLBACK PREPARED</command>. Une nouvelle vue système 
	<literal>pg_prepared_xacts</literal> a également été ajoutée.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>
       Création d'un nouveau système de rôle en remplacement des utilisateurs et groupes
       (Stephen Frost)
      </term>

      <listitem>
       <para>
        Les rôles sont une combinaison des utilisateurs et groupes. Comme des 
        utilisateurs, ils peuvent avoir des possibilités de connexion, et comme 
        des groupes, un rôle peut avoir d'autres rôles comme membres.
        Les rôles enlèvent fondamentalement la distinction 
        entre les utilisateurs et les groupes. Par exemple, un rôle peu:
       </para>

       <itemizedlist>
  
        <listitem>
         <para>
          Avoir les possibilités de connexions (optionnel)
         </para>
        </listitem>

        <listitem>
         <para>
          Posséder des objets
         </para>
        </listitem>

        <listitem>
         <para>
          Détenir les autorisations d'accès pour des objets de base de données
         </para>
        </listitem>

        <listitem>
         <para>
          Hériter des permissions des autres rôles en tant que membre de
         </para>
        </listitem>

       </itemizedlist>
       <para>
        Une fois qu'un rôle se connecte en tant qu'un autre rôle, il obtient les
        droits du rôle de connexion et ceux des rôles hérités, et peut utiliser
        <command>SET ROLE</command> pour basculer sur d'autres rôles dont il
        est membre. Cette fonctionnalité est une généralisation du concept des
        rôles dans le standard SQL.
        Cette modification remplacer aussi <structname>pg_shadow</structname> et
        <structname>pg_group</structname> par les catalogues spécifiques aux
        rôles, <structname>pg_authid</structname> et
        <structname>pg_auth_members</structname>. Les anciennes tables sont
        redéfinies comme des vues en lecture seule qui se basent sur les
        nouvelles tables des rôles.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>
       Utiliser automatiquement les index pour <function>MIN()</function> et
       <function>MAX()</function> (Tom)
      </term>
 
      <listitem>
       <para>
        Dans les versions précédentes, la seule manière d'utiliser un index pour
        <function>MIN()</function> ou <function>MAX()</function> était d'écrire la requête
        <command>SELECT col FROM tab ORDER BY col LIMIT 1</command>.
        L'utilisation d'index se produit maintenant automatiquement. 
       </para> 
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>
       Déplacement de <filename>/contrib/pg_autovacuum</filename> dans le serveur principal
       (Alvaro)
      </term>

      <listitem>
       <para>
        L'intégration d'autovacuum dans le serveur lui permet d'être 
        automatiquement lancé et arrêté lors de la synchro avec le serveur
        de base de données, et permet à l'autovacuum d'être configuré dans
        <filename>postgresql.conf</filename>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>
       Ajout de verrous partagés au niveau ligne en utilisant
       <command>SELECT ... FOR SHARE</command>
       (Alvaro)
      </term>

      <listitem>
       <para>
        Bien que le système de verrous du MVCC de <productname>PostgreSQL</productname>
        permet aux <command>SELECT</command> de ne jamais bloquer les écritures
        et, du coup, n'a pas besoin de verrous ligne partagés pour des opérations
        typiques, les verrous partagés sont utiles pour les applications qui
        réclament un verrouillage partagé des lignes. En particulier, cela réduit
        les prérequis de verrouillage imposés par les vérifications d'intégrité
        référentielle.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>
       Ajout de dépendances sur les objets partagés, et plus particulièrement
       les rôles (Alvaro)
      </term>

      <listitem>
       <para>
        Cette extension du mécanisme de dépendances empêche la suppression de
        rôles quand il existe dans la base des objets qui leur appartiennent.
        Auparavant, il était possible de rendre <quote>orphelins</quote> des
        objets en supprimant leur propriétaire. Bien qu'il était possible de
        contourner le problème, c'était sale et déplaisant.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>
       Amélioration des performances sur les tables partitionnées (Simon)
      </term>

      <listitem>
       <para>
        Le nouveau paramètre de configuration, <varname>constraint_exclusion</varname>,
        évite la recherche de tables enfants où les contraintes indiquent
        qu'aucune ligne n'existe dans la table enfant.
       </para>
       <para>
        Ceci permet un type basique de partitionnement de tables. Si les tables
        enfants stockent des étendues séparées de clés et qu'elles sont forcées
        par des contraintes <command>CHECK</command> appropriées, l'optimiseur
        ne s'occupera pas des tables enfants où la contrainte ganratie
        qu'aucune ligne correspondante n'existe dans la table enfant.
       </para>
      </listitem>
     </varlistentry>

    </variablelist>
   </sect2>
 
   <sect2>
    <title>Migration vers la version 8.1</title>
                                       
    <para>
     Une sauvegarde/restauration utilisant <application>pg_dump</application>
     est requise pour ceux qui souhaitent migrer leurs données des versions
     précédentes.
    </para>
    
    <para>
     Les notes de la version 8.0 annonçaient la suppression de la fonction
     <function>to_char()</function> pour les intervalles en 8.1. Néanmoins,
     comme aucune API meilleure n'a été suggérée,
     <function>to_char(interval)</function> a été améliorée en 8.1 et restera
     dans le serveur.
    </para>

    <para>
     Il existe quelques incompatibilités&nbsp;:
    </para>

    <itemizedlist>

     <listitem>
      <para>
       <varname>add_missing_from</varname> est maintenant faux par défaut (Neil)
      </para>
      <para>
       Par défaut, nous générons une erreur si une table est utilisé dans une
       requête sans une référence <literal>FROM</literal>. L'ancien comportement
       est toujours disponible mais le paramètre doit être positionné à 'true'
       pour l'obtenir.
      </para>

      <para>
       Il pourrait être nécessaire de configurer <varname>add_missing_from</varname>
       à true pour charger une sauvegarde existante si la sauvegarde contient
       des vues ou des règles créées en utilisant la syntaxe du
       <literal>FROM</literal> implicite. Ceci n'arrivera qu'une fois car
       <productname>PostgreSQL</productname> 8.1 convertira ces vues et ces
       règles à la syntaxe standard du <literal>FROM</literal> explicite. Les
       sauvegardes suivantes n'auront donc plus le problème.
      </para>
     </listitem>

     <listitem>
      <para>
       Une chaîne de longueur nulle (<literal>''</literal>) pour une champ de
       type <type>float4</type>/<type>float8</type>/<type>oid</type> causera
       l'envoi d'une erreur. Elle ne sera plus traitée comme un zéro (Neil)
      </para>
      <para>
       Cette modification est cohérente avec la gestion actuelle des chaînes de
       longueur nulle pour les entiers. Ce changement avait été annoncé en 8.0.
      </para>
     </listitem>

     <listitem>
      <para>
       <varname>default_with_oids</varname> est maintenant faux par défaut (Neil)
      </para>
      <para>
       Avec cette option configurée à faux, les tables créées par l'utilisateur
       n'ont plus de colonne OID sauf si <command>WITH OIDS</command> est
       indiqué en option de <command>CREATE TABLE</command>. Bien que les OID
       ont existé sur toutes les versions de
       <productname>PostgreSQL</productname>, leut utilisation est limitée car
       elles sont uniquement sur quatre octets et le compteur est partagé sur
       toutes les bases installées dans le cluster. La façon préférée
       d'identifier les lignes de façon unique est via des séquences et le
       type <type>SERIAL</type> qui sont supportés depuis
       <productname>PostgreSQL</productname> 6.4.
      </para>
     </listitem>

     <listitem>
      <para>
       Ajout de la syntaxe <literal>E''</literal> pour que les chaînes ordinaires
       puissent éventuellement traiter les antislash littéralement (Bruce)
      </para>
      <para>
       Actuellement, <productname>PostgreSQL</productname> traite l'antislash
       dans une constante de type chaîne comme l'introduction d'une séquence
       d'échappement spéciale, par exemple <literal>\n</literal> ou
       <literal>\010</literal>. Bien que cela facilite la saisie de ces
       valeurs, c'est un comportement non standard qui rend difficile le
       portage des applications vers d'autres SGBD. Pour cette raison, le
       projet <productname>PostgreSQL</productname> planifie la suppression
       de la signification spéciale des antislashs dans les chaînes. Pour une
       compatibilité ascendante, une nouvelle syntaxe de chaîne a été créée.
       Cette nouvelle syntaxe correspond à un <literal>E</literal> immédiatement
       suivi d'un guillemet simple qui commence la chaîne, par exemple
       <literal>E'hi\n'</literal>. Bien que cette version ne modifie pas la
       gestion des antislashs dans les chaînes, elle ajoute de nouveaux
       paramètres de configuration pour aider les utilisateurs à migrer leurs
       applications vers les prochaines versions&nbsp;:
      </para>
      <itemizedlist>

       <listitem>
        <para>
         <varname>standard_conforming_strings</varname> &mdash; cette version
         traite-t'elle les antislashs de façon littérale dans les chaînes&nbsp;?
        </para>
       </listitem>
  
       <listitem>
       <para>
        <varname>escape_string_warning</varname> &mdash; avertit sur
        l'utilisation d'antislasgs dans des chaînes ordinaires (donc sans E).
       </para>
      </listitem>

      </itemizedlist>

      <para>
       La valeur de <varname>standard_conforming_strings</varname> est seulement
       disponible en lecture. Les applications peuvent récupérer la valeur pour
       savoir de quelle façon elles doivent traiter les antislashs. (La présence
       du paramètre est en soi une indication que la syntaxe de chaîne
       <literal>E''</literal> est supportée.)
       Dans une prochaine version, <varname>standard_conforming_strings</varname>
       vaudra vrai, signifiant que les antislashs devront être traités
       littéralement dans les chaînes non E. Pour vous préparer à ce changement,
       utilisez des chaînes <literal>E''</literal> pour celles qui nécessitent
       un traitement spécial des antislashs et activer
       <varname>escape_string_warning</varname> pour trouver les chaînes
       supplémentaires qui ont besoin d'être converties pour utiliser
       <literal>E''</literal>. De plus, utilisez deux guillemets simples
       (<literal>''</literal>) pour intégrer un guillemet simple littéral dans
       une chaîne plutôt que la syntaxe supportée par
       <productname>PostgreSQL</productname> de l'antislash suivi du guillemet
       (<literal>\'</literal>). Cette syntaxe est conforme au standard et ne
       nécessite pas l'utilisation de la syntaxe de chaîne
       <literal>E''</literal>. Vous pouvez aussi utiliser la syntaxe de chaîne
       <literal>$$</literal> qui ne traitent pas spécifiquement les antislashs.
      </para>
     </listitem>

     <listitem>
      <para>
       Fait que <command>REINDEX DATABASE</command> ré-indexe tous les index de
       la base (Tom)
      </para>
      <para>
       Auparavant, <command>REINDEX DATABASE</command> ré-indexait seulement les
       tables systèmes. Ce nouveau comportement semble plus intuitif. Une
       nouvelle commande <command>REINDEX SYSTEM</command> fournit l'ancienne
       fonctionnalité de réindexage des seules tables systèmes.
      </para>
     </listitem>

     <listitem>
      <para>
       Les descripteurs des objets larges en lecture seule respectent maintenant
       les images MVCC.
      </para>
      <para>
       Quand un objet large est ouvert avec <literal>INV_READ</literal> (et non
       pas <literal>INV_WRITE</literal>), la donnée lue du descripteur
       correspondra maintenant à une <quote>image</quote> de l'état de l'objet
       large au début de l'image de la transaction utilisée par la requête
       qui a fait appel à <function>lo_open()</function>. Pour obtenir l'ancien
       comportement renvoyant en permanence la dernière donnée validée, ajoutez
       <literal>INV_WRITE</literal> dans les options de <function>lo_open()</function>.
      </para>
     </listitem>

     <listitem>
      <para>
       Ajout des bonnes dépendances pour les arguments des fonctions sur les
       séquences (Tom)
      </para>
      <para>
       Dans les anciennes versions, les noms de séquence passés à
       <function>nextval()</function>, <function>currval()</function> et
       <function>setval()</function> étaient stockés sous la forme de simples
       chaînes de texte, signifiant que le renommage ou la suppression d'une
       séquence utilisée dans une clause <literal>DEFAULT</literal> rendait la
       clause invalide. Cette version stocke tous les arguments d'une fonction
       d'une séquence nouvellement créée en tant qu'OID interne, leur permettant
       de tracer le renommage des séquences et d'ajouter des informations de
       dépendances qui empêchent une suppression erronées d'une séquence.
       Cela assure aussi une certaine immunité des clauses
       <literal>DEFAULT</literal> au renommage de schéma et aux modifications
       du chemin de recherche des schémas.
      </para>
      <para>
       Certaines applications pourraient se fier à l'ancien comportement de
       recherche à l'exécution des noms de séquence. C'est toujours possible
       en convertissant explicitement l'argument en <type>text</type>, par exemple
       <literal>nextval('myseq'::text)</literal>.
      </para>
      <para>
       Les sauvegardes de bases antérieures à la 8.1 chargées en 8.1 utiliseront
       l'ancienne représentation textuelle et, du coup, ne bénéficieront pas
       des fonctionnalités des arguments stockés d'après leur OID. Néanmoins,
       il est possible de mettre à jour une base contenant des clauses
       <literal>DEFAULT</literal> en texte. Tout d'abord, sauvegardez cette
       requête dans un fichier, comme <filename>fixseq.sql</filename>&nbsp;:
<programlisting>SELECT  'ALTER TABLE ' ||
    pg_catalog.quote_ident(n.nspname) || '.' ||
    pg_catalog.quote_ident(c.relname) ||
    ' ALTER COLUMN ' || pg_catalog.quote_ident(a.attname) ||
    ' SET DEFAULT ' ||
    regexp_replace(d.adsrc,
                   $$val\(\(('[^']*')::text\)::regclass$$,
                   $$val\(\1$$,
                   'g') ||
    ';'
FROM    pg_namespace n, pg_class c, pg_attribute a, pg_attrdef d
WHERE   n.oid = c.relnamespace AND
    c.oid = a.attrelid AND
    a.attrelid = d.adrelid AND
    a.attnum = d.adnum AND
    d.adsrc ~ $$val\(\('[^']*'::text\)::regclass$$;
</programlisting>
       Ensuite, exécutez la requête sur une base pour découvrir les ajustements
       nécessaires, comme pour cette base <literal>db1</literal>&nbsp;:
<programlisting>psql -t -f fixseq.sql db1
</programlisting>
       Ceci affichera les commandes <command>ALTER TABLE</command> nécessaires
       pour convertir la base à la représentation OID la plus récente. Si les
       commandes semblent raisonnables, exécutez ceci pour mettre à jour la
       base de données&nbsp;:
<programlisting>psql -t -f fixseq.sql db1 | psql -e db1
</programlisting>
       Ce processus doit être répétée pour chaque base à mettre à jour.
      </para>
     </listitem>

     <listitem>
      <para>
       Dans <application>psql</application>, les séquences
       <literal>\{chiffre}+</literal> sans guillemets sont traités comme des
       nombres codés en octal (Bruce)
      </para>
      <para>
       Dans les versions précédentes, les séquences <literal>\{chiffre}+</literal>
       étaient traitées comme des nombres codés en décimal et les séquences
       <literal>\0{digit}+</literal> l'étaient comme des nombres codés en
       octal. Cette modification a pour but la cohérence de traitement.
      </para>
     </listitem>

     <listitem>
      <para>
       Suppression des grammaires utilisant les opérateurs <literal>%</literal>
       et <literal>^</literal> en préfixe et en suffixe.
       (Tom)
      </para>
      <para>
       Ils n'ont jamais été documentés et compliquaient l'utilisation de
       l'opérateur modulo (<literal>%</literal>) avec les nombres négatifs.
      </para>
     </listitem>

     <listitem>
      <para>
       Rend <literal>&amp;&lt;</literal> et <literal>&amp;&gt;</literal> cohérent
       pour les polygones abec les opérateurs "over" du type box (Tom)
      </para>
     </listitem>

     <listitem>
      <para>
       <command>CREATE LANGUAGE</command> peut ignorer les arguments fournis
       pour utiliser l'information provenant de <structname>pg_pltemplate</structname>
       (Tom)
      </para>
      <para>
       Un nouveau catalogue système nommé
       <structname>pg_pltemplate</structname> a été défini pour stocker des
       informations sur les définitions préférées des langages de procédure
       (comme par exemple si elles ont des fonctions de validation). Quand une
       telle entrée existe dans le catalogue pour le langage en cours de
       création, <command>CREATE LANGUAGE</command> ignorera tous ces paramètres
       sauf le nom du langage et utilisera à la place les informations du
       catalogue. Cette mesure a été prise à cause des problèmes de plus en plus
       fréquents de définition de langage obsolète chargée à partir d'anciennes
       sauvegardes. À partir de la 8.1, <application>pg_dump</application>
       sauvegardera les définitions de langage de procédures avec un simple
       <command>CREATE LANGUAGE <replaceable>nom</replaceable></command>, se
       reposant sur l'entrée modèle existant au moment du chargement. Nous nous
       attendons à ce que cela soit une représentation plus pérenne.
      </para>
     </listitem>

     <listitem>
      <para>
       Fait que <function>pg_cancel_backend(int)</function> renvoit une valeur
       de type <type>boolean</type> plutôt qu'un <type>integer</type> (Neil)
      </para>
     </listitem>

     <listitem>
      <para>
       Certains utilisateurs ont des problèmes en chargeant des données UTF-8
       en 8.1.X. Ceci est dû aux précédentes versions qui permettaient l'ajout
       de séquences d'octets UTF-8 invalides dans la base. Cette version
       accepte seulement les séquences UTF-8 valides. Vous pouvez corriger une
       sauvegarde en exécutant la commande <command>iconv -c -f UTF-8 -t
       UTF-8 -o bonnesauvegarde.sql sauvegarde.sql</command>. L'option
       <literal>-c</literal> supprime les séquences de caractères invalides.
       Un diff des deux fichiers affichera les séquences invalides.
       <command>iconv</command> lit le fichier en entrée en mémoire, donc il
       pourrait se révéler nécessaire de <application>diviser</application> la
       sauvegarde en plusieurs petits fichiers pour le traitement.
      </para>
     </listitem>

    </itemizedlist>
   </sect2>
 
   <sect2>
    <title>Modifications supplémentaires</title>
 
    <para>
     Vous trouverez ci-dessous une liste détaillée des modifications
     supplémentaires réalisées pour <productname>PostgreSQL</productname> 8.1.
    </para>
 
    <sect3>
     <title>Améliorations des performances</title>
     <itemizedlist>

      <listitem>
       <para>
        Amélioration des performances des index GiST et R-tree (Neil)
       </para>
      </listitem>

      <listitem>
       <para>
        Amélioration de l'optimiseur, ceci incluant le redimensionnement
        automatique des jointures hash (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Révision de l'API interne sur plusieurs domaines
       </para>
      </listitem>

      <listitem>
       <para>
        Changement des CRC, passés de 64 à 32 bits, pour l'enregistrement des
        WAL (Tom)
       </para>
       <para>
        Nous avons déterminé que le coût supplémentaire du calcul des CRC en 64
        bits était important et que le gain en fiabilité était trop marginal pour
        le justifier.
       </para>
      </listitem>

      <listitem>
       <para>
        Empêche la création de gros trous vides dans les pages WAL (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Amélioration du comportement du spinlock sur les machines SMP,
        particulièrement pour les Opterons (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Autorise l'utilisation de colonnes non consécutives d'un index dans
        un index multicolonnes (Tom)
       </para>
       <para>
        Par exemple, cela permet l'utilisation d'un index sur les colonnes
        a, b, c dans une requête dont le filtre est <command>WHERE a = 4 and
        c = 10</command>.
       </para>
      </listitem>

      <listitem>
       <para>
        Passe la journalisation WAL pour <command>CREATE TABLE AS</command> /
        <command>SELECT INTO</command> (Simon)
       </para>
       <para>
        Comme l'arrêt brutal durant un <command>CREATE TABLE AS</command>
        occasionnera la suppression de la table lors de l'opération de récupération,
        il n'y a aucune raison de conserver le chargement de la table dans les
        WAL. (Néanmoins, la journalisation se fait quand même si l'archivage des
        WAL est activé.)
       </para>
      </listitem>

      <listitem>
       <para>
        Autorise l'accès en parallèle d'index GiST (Teodor, Oleg)
       </para>
      </listitem>

      <listitem>
       <para>
        Ajout d'un paramètre de configuration <varname>full_page_writes</varname>
        pour contrôler l'écriture de pages complètes dans les WAL (Bruce)
       </para>
       <para>
        Pour empêcher que des écritures disques partielles corrompent la base
        de données, <productname>PostgreSQL</productname> écrit une copie
        complète de chaque page disque de la base dans les WAL la première fois
        que la page est modifiée après un point de vérification. Cette option
        désactive cette fonctionnalité pour gagner en rapidité. Ceci ne doit
        pas poser de problème avec des caches disques sur batterie où des
        écritures partielles de page ne peuvent pas arriver.
       </para>
      </listitem>

      <listitem>
       <para>
        Utilisation de <literal>O_DIRECT</literal> si disponible lors de
        l'utilisation de <literal>O_SYNC</literal> pour
        <varname>wal_sync_method</varname> (Itagaki Takahiro)
       </para>
       <para>
        <literal>O_DIRECT</literal> fait que les écritures disques contournent
        le cache du noyau et cela améliore les performances pour les écritures
        des WAL.
       </para>
      </listitem>

      <listitem>
       <para>
        Amélioration des performances du <command>COPY FROM</command> (Alon Goldshuv)
       </para>
       <para>
        Ceci se fait en lisant l'entrée de <command>COPY</command> par de plus
        gros morceaux, plutôt que caractère par caractère.
       </para>
      </listitem>

      <listitem>
       <para>
        Amélioration des performances de <function>COUNT()</function>,
        <function>SUM</function>, <function>AVG()</function>,
        <function>STDDEV()</function> et
        <function>VARIANCE()</function> (Neil, Tom)
       </para>
      </listitem>
     </itemizedlist>
    </sect3>

    <sect3>
     <title>Modifications du serveur</title>
     <itemizedlist>

      <listitem>
       <para>
        Empêche les problèmes dûs à la réinitialisation de l'ID de transaction
        (XID) (Tom)
       </para>
       <para>
        Maintenant, le serveur avertira quand le compteur de transaction approche
        du point de réinitialisation. Si le compteur s'en approche trop, le
        serveur refusera les requêtes. Ceci permet de s'assurer que des données
        ne seront pas perdues avant que le VACUUM nécessaire ne soit réalisé.
       </para>
      </listitem>

      <listitem>
       <para>
        Correction de problèmes avec des conflits entre des identifiants d'objets
        (OID) et des objets systèmes existants une fois que le compteur d'OID
        s'est réinitialisé (Tom)
       </para>
      </listitem>
  
      <listitem>
       <para>
        Ajout d'un avertissement sur le besoin d'augmenter
        <varname>max_fsm_relations</varname> et <varname>max_fsm_pages</varname>
        lors des <command>VACUUM</command> (Ron Mayer)
       </para>
      </listitem>

      <listitem>
       <para>
        Ajout du paramètre de configuration <varname>temp_buffers</varname>
        autorisant les utilisateurs à déterminer la taille du tampon local
        pour les accès aux tables temporaires (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Ajout de l'heure de début de la session et de l'adresse IP du client
        dans <literal>pg_stat_activity</literal> (Magnus)
       </para>
      </listitem>

      <listitem>
       <para>
        Ajustement des vues <literal>pg_stat</literal> pour les parcours de
        bitmap (Tom)
       </para>
       <para>
        La signification de certains champs a changé légèrement.
       </para>
      </listitem>

      <listitem>
       <para>
        Amélioration de la vue <literal>pg_locks</literal> (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Trace des requêtes côté client, <command>PREPARE</command> et
        <command>EXECUTE</command> (Simon)
       </para>
      </listitem>

      <listitem>
       <para>
        Autorise l'indication de la sensibilité à la casse pour le nom
        Kerberos et le nom utilisateur dans
        <filename>postgresql.conf</filename> (Magnus)
       </para>
      </listitem>

      <listitem>
       <para>
        Ajout du paramètre de configuration <varname>krb_server_hostname</varname>
        pour que le nom de l'hôte puisse être indiqué comme faisant parti du
        service principal (Todd Kover)
       </para>
       <para>
        S'il n'est pas configuré, aucun service principal correspondant à une
        entrée dans la table des clés ne peut être utilisé. Ceci est le nouveau
        comportement de Kerberos pour cette version.
       </para>
      </listitem>

      <listitem>
       <para>
        Ajout d'options pour <varname>log_line_prefix</varname> (datage à la
        milliseconde avec <literal>%m</literal> et hôte distant avec
        <literal>%h</literal>) (Ed L.)
       </para>
      </listitem>

      <listitem>
       <para>
        Ajout des journaux WAL pour les index GiST (Teodor, Oleg)
       </para>
       <para>
        Les index GiST sont maintenant fiables en ce qui concernent les arrêts
        brutaux et la récupération à un instant donné.
       </para>
      </listitem>

      <listitem>
       <para>
        Suppression des anciens fichiers <filename>*.backup</filename> lors du
        <function>pg_stop_backup()</function> (Bruce)
       </para>
       <para>
        Ceci empêche qu'un grand nombre de fichiers <filename>*.backup</filename>
        restent dans <filename>pg_xlog/</filename>.
       </para>
      </listitem>

      <listitem>
       <para>
        Ajout des paramètres de configuration contrôlant certaines constantes
        keep-alive de TCP/IP (idle, interval et count) (Oliver Jowett)
       </para>

       <para>
        Ces valeurs sont modifiables pour permettre une détection plus rapide
        de la perte de connexions clientes.
       </para>
      </listitem>

      <listitem>
       <para>
        Ajout de limites de connexion par utilisateur et par base de données
        (Petr Jelinek)
       </para>
       <para>
        En utilisant <command>ALTER USER</command> et <command>ALTER DATABASE</command>,
        des limites peuvent être enregistrées sur le nombre maximum de sessions
        connectées en même temps pour un utilisateur spécifique ou une base
        spécifique. Configurer la limite à zéro empêche l'utilisateur de se connecter
        ou empêche toute connexion sur cette base.
       </para>
      </listitem>

      <listitem>
       <para>
        Autorise plus de 2&nbsp;Go de mémoire partagé et de work_memory par
        processus serveur sur les machines 64 bits (Koichi Suzuki)
       </para>
      </listitem>

      <listitem>
       <para>
        Le nouveau catalogue système <structname>pg_pltemplate</structname> permet
        la surcharge des définitions obsolètes de langages de procédures dans
        les sauvegardes (Tom)
       </para>
      </listitem>

     </itemizedlist>
    </sect3>
  
  
    <sect3>
     <title>Modifications des requêtes</title>
     <itemizedlist>
  
      <listitem>
       <para>
        Ajout des vues temporaires (Koju Iijima, Neil) 
       </para>
      </listitem>

      <listitem>
       <para>
        Correction de <command>HAVING</command> sans fonctions d'agrégat ou
        <command>GROUP BY</command> pour que la requête ne renvoit qu'un seul
        groupe (Tom)
       </para>
       <para>
        Auparavant, la clause <command>HAVING</command> aurait été traitée comme
        une clause <command>WHERE</command>. Ce n'était pas conforme au
        standard.
       </para>
      </listitem>

      <listitem>
       <para>
        Ajout de la clause <command>USING</command> pour indiquer des tables
        supplémentaires dans une commande <command>DELETE</command> (Euler
        Taveira de Oliveira, Neil)
       </para>
       <para>
        Dans les versions précédentes, il n'existait pas de méthode claire pour
        utiliser des tables supplémentaires dans des jointures sur une instruction
        <command>DELETE</command>. <command>UPDATE</command> a déjà une clause
        <literal>FROM</literal> pour remplir ce but.
       </para>
      </listitem>

      <listitem>
       <para>
        Ajout du support de <literal>\x</literal> pour les échappements de nombres
        en hexadécimal dans les chaînes du moteur et dans celles d'ecpg (Bruce)
       </para>
       <para>
        Cela fonctionne comme la syntaxe d'échappement <literal>\x</literal>
        en C. Les échappements de nombres en octal sont déjà supportés.
       </para>
      </listitem>

      <listitem>
       <para>
        Ajout de la syntaxe de requête <command>BETWEEN SYMMETRIC</command>
        (Pavel Stehule)
       </para>
       <para>
        Cette fonctionnalité autorise l'utilisation de comparaisons
        <command>BETWEEN</command> sans nécessiter que la première valeur soit
        inférieure à la seconde. Par exemple, <command>2 BETWEEN [ASYMMETRIC]
        3 AND 1</command> renvoie faux alors que <command>2 BETWEEN SYMMETRIC
        3 AND 1</command> renvoie vrai. <command>BETWEEN ASYMMETRIC</command>
        était déjà supporté.
       </para>
      </listitem>

      <listitem>
       <para>
        Ajout de l'option <command>NOWAIT</command> pour <command>SELECT ... FOR
        UPDATE/SHARE</command> (Hans-Juergen Schoenig)
       </para>
       <para>
        Bien que le paramètre de configuration <varname>statement_timeout</varname>
        autorise l'annulation d'une requête prenant plus d'un certain temps à
        s'exécuter, l'option <command>NOWAIT</command> permet l'annulation d'une
        requête à partir du moment où la commande <command>SELECT ... FOR
        UPDATE/SHARE</command> n'acquiert pas immédiatement un verrou de ligne.
       </para>
      </listitem>
     </itemizedlist>
    </sect3>
  
  
    <sect3>
     <title>Changement des manipulations d'objets</title>
     <itemizedlist>
  
      <listitem>
       <para>
        Trace les dépendances des objets partagés (Alvaro)
       </para>
       <para>
        <productname>PostgreSQL</productname> allows global tables
        (users, databases, tablespaces) to reference information in
        multiple databases. This addition adds dependency information
        for global tables, so, for example, user ownership can be
        tracked across databases, so a user who owns something in any
        database can no longer be removed. Dependency tracking already
        existed for database-local objects.
       </para>
      </listitem>

      <listitem>
       <para>
        Allow limited <command>ALTER OWNER</command> commands to be performed 
        by the object owner (Stephen Frost)
       </para>
       <para>
        Prior releases allowed only superusers to change object owners.
        Now, ownership can be transferred if the user executing the command
        owns the object and would be able to create it as the new owner
        (that is, the user is a member of the new owning role and that role
        has the CREATE permission that would be needed to create the object
        afresh).
       </para>
      </listitem>

      <listitem>
       <para>
        Add <command>ALTER</command> object <command>SET SCHEMA</command> capability
        for some object types (tables, functions, types) (Bernd Helmle)
       </para>
       <para>
        This allows objects to be moved to different schemas.
       </para>
      </listitem>
    
      <listitem>
       <para>
        Ajout de <command>ALTER TABLE ENABLE/DISABLE TRIGGER</command> pour
        désactiver les déclencheurs (Satoshi Nagayasu)
       </para>
      </listitem>

     </itemizedlist>
    </sect3>
  
  
    <sect3>
     <title>Utility Command Changes</title>
     <itemizedlist>
  
      <listitem>
       <para>
        Allow <command>TRUNCATE</command> to truncate multiple tables in a
        single command (Alvaro)
       </para>
       <para>
        Because of referential integrity checks, it is not allowed to
        truncate a table that is part of a referential integrity
        constraint. Using this new functionality, <command>TRUNCATE</command>
        can be used to truncate such tables, if both tables involved in
        a referential integrity constraint are truncated in a single
        <command>TRUNCATE</command> command.
       </para>
      </listitem>

      <listitem>
       <para>
        Properly process carriage returns and line feeds in
        <command>COPY CSV</command> mode (Andrew)
       </para>
       <para>
        In release 8.0, carriage returns and line feeds in <command>CSV
        COPY TO</command> were processed in an inconsistent manner. (This was
        documented on the TODO list.)
       </para>
      </listitem>

      <listitem>
       <para>
        Add <command>COPY WITH CSV HEADER</command> to allow a header line as
        the first line in <command>COPY</command> (Andrew)
       </para>
       <para>
        This allows handling of the common <command>CSV</command> usage of
        placing the column names on the first line of the data file. For
        <command>COPY TO</command>, the first line contains the column names,
        and for <command>COPY FROM</command>, the first line is ignored.
       </para>
      </listitem>

      <listitem>
       <para>
        On Windows, display better sub-second precision in
        <command>EXPLAIN ANALYZE</command> (Magnus)
       </para>
      </listitem>

      <listitem>
       <para>
        Add trigger duration display to <command>EXPLAIN ANALYZE</command>
        (Tom)
       </para>
       <para>
        Prior releases included trigger execution time as part of the
        total execution time, but did not show it separately.  It is now
        possible to see how much time is spent in each trigger.
       </para>
      </listitem>

      <listitem>
       <para>
        Add support for <literal>\x</literal> hex escapes in <command>COPY</command>
        (Sergey Ten)
       </para>
       <para>
        Previous releases only supported octal escapes.
       </para>
      </listitem>

      <listitem>
       <para>
        Make <command>SHOW ALL</command> include variable descriptions
        (Matthias Schmidt)
       </para>
       <para>
        <command>SHOW</command> varname still only displays the variable's
        value and does not include the description.
       </para>
      </listitem>

      <listitem>
       <para>
        Make <application>initdb</application> create a new standard
        database called <literal>postgres</literal>, and convert utilities to
        use <literal>postgres</literal> rather than <literal>template1</literal> for
        standard lookups (Dave)
       </para>
       <para>
        In prior releases, <literal>template1</literal> was used both as a
        default connection for utilities like
        <application>createuser</application>, and as a template for
        new databases. This caused <command>CREATE DATABASE</command> to
        sometimes fail, because a new database cannot be created if
        anyone else is in the template database. With this change, the
        default connection database is now <literal>postgres</literal>,
        meaning it is much less likely someone will be using
        <literal>template1</literal> during <command>CREATE DATABASE</command>.
       </para>
      </listitem>

      <listitem>
       <para>
        Create new <application>reindexdb</application> command-line
        utility by moving <filename>/contrib/reindexdb</filename> into the
        server (Euler Taveira de Oliveira)
       </para>
      </listitem>

     </itemizedlist>
    </sect3>
  
  
    <sect3>
     <title>Data Type and Function Changes</title>
     <itemizedlist>
  
      <listitem>
       <para>
        Add <function>MAX()</function> and <function>MIN()</function> aggregates for
        array types (Koju Iijima)
       </para>
      </listitem>

      <listitem>
       <para>
        Fix <function>to_date()</function> and <function>to_timestamp()</function> to
        behave reasonably when <literal>CC</literal> and <literal>YY</literal> fields
        are both used (Karel Zak)
       </para>
       <para>
        If the format specification contains <literal>CC</literal> and a year
        specification is <literal>YYY</literal> or longer, ignore the
        <literal>CC</literal>. If the year specification is <literal>YY</literal> or
        shorter, interpret <literal>CC</literal> as the previous century.
       </para>
      </listitem>

      <listitem>
       <para>
        Add <function>md5(bytea)</function> (Abhijit Menon-Sen)
       </para>
       <para>
        <function>md5(text)</function> already existed.
       </para>
      </listitem>

      <listitem>
       <para>
        Add support for <command>numeric ^ numeric</command> based on
        <function>power(numeric, numeric)</function>
       </para>
       <para>
        The function already existed, but there was no operator assigned
        to it.
       </para>
      </listitem>

      <listitem>
       <para>
        Fix <type>NUMERIC</type> modulus by properly truncating the quotient
        during computation (Bruce)
       </para>
       <para>
        In previous releases, modulus for large values sometimes
        returned negative results due to rounding of the quotient.
       </para>
      </listitem>

      <listitem>
       <para>
        Add a function <function>lastval()</function>(Dennis Bj&ouml;rklund)
       </para>
       <para>
        <function>lastval()</function> is a simplified version of
        <function>currval()</function>. It automatically determines the proper
        sequence name based on the most recent <function>nextval()</function> or
        <function>setval()</function> call performed by the current session.
       </para>
      </listitem>

      <listitem>
       <para>
        Add <function>to_timestamp(DOUBLE PRECISION) (Michael Glaesemann)</function>
       </para>
       <para>
        Converts Unix seconds since 1970 to a <type>TIMESTAMP WITH
        TIMEZONE</type>.
       </para>
      </listitem>

      <listitem>
       <para>
        Add <function>pg_postmaster_start_time()</function> function (Euler
        Taveira de Oliveira, Matthias Schmidt)
       </para>
      </listitem>

      <listitem>
       <para>
        Allow the full use of time zone names in <command>AT TIME
        ZONE</command>, not just the short list previously available (Magnus)
       </para>
       <para>
        Previously, only a predefined list of time zone names were
        supported by <command>AT TIME ZONE</command>. Now any supported time
        zone name can be used, e.g.:
        <programlisting>         SELECT CURRENT_TIMESTAMP AT TIME ZONE 'Europe/London';
        </programlisting>
        In the above query, the time zone used is adjusted based on the
        daylight saving time rules that were in effect on the supplied
        date.
       </para>
      </listitem>

      <listitem>
       <para>
        Add <function>GREATEST()</function> and <function>LEAST()</function> variadic
        functions (Pavel Stehule)
       </para>
       <para>
        These functions take a variable number of arguments and return
        the greatest or least value among the arguments.
       </para>
      </listitem>

      <listitem>
       <para>
        Add <function>pg_column_size()</function> (Mark Kirkwood)
       </para>
       <para>
        This returns storage size of a column, which might be compressed.
       </para>
      </listitem>

      <listitem>
       <para>
        Add <function>regexp_replace()</function> (Atsushi Ogawa)
       </para>
       <para>
        This allows regular expression replacement, like sed. An optional
        flag argument allows selection of global (replace all) and
        case-insensitive modes.
       </para>
      </listitem>

      <listitem>
       <para>
        Fix interval division and multiplication (Bruce)
       </para>
       <para>
        Previous versions sometimes returned unjustified results, like
        <command>'4 months'::interval / 5</command> returning <command>'1 mon
        -6 days'</command>.
       </para>
      </listitem>

      <listitem>
       <para>
        Fix roundoff behavior in timestamp, time, and interval output (Tom)
       </para>
       <para>
        This fixes some cases in which the seconds field would be shown as
        <literal>60</literal> instead of incrementing the higher-order fields.
       </para>
      </listitem>

      <listitem>
       <para>
        Add a separate day field to type <type>interval</type> so a one day
        interval can be distinguished from a 24 hour interval (Michael
        Glaesemann)
       </para>
       <para>
        Days that contain a daylight saving time adjustment are not 24
        hours long, but typically 23 or 25 hours.  This change creates a
        conceptual distinction between intervals of <quote>so many days</quote>
        and intervals of <quote>so many hours</quote>.  Adding
        <literal>1 day</literal> to a timestamp now gives the same local time on
        the next day even if a daylight saving time adjustment occurs
        between, whereas adding <literal>24 hours</literal> will give a different
        local time when this happens.  For example, under US DST rules:
        <programlisting>         '2005-04-03 00:00:00-05' + '1 day' = '2005-04-04 00:00:00-04'
         '2005-04-03 00:00:00-05' + '24 hours' = '2005-04-04 01:00:00-04'
        </programlisting>
       </para>
      </listitem>

      <listitem>
       <para>
        Add <function>justify_days()</function> and <function>justify_hours()</function>
        (Michael Glaesemann)
       </para>
       <para>
        These functions, respectively, adjust days to an appropriate
        number of full months and days, and adjust hours to an
        appropriate number of full days and hours.
       </para>
      </listitem>

      <listitem>
       <para>
        Move <filename>/contrib/dbsize</filename> into the backend, and rename
        some of the functions (Dave Page, Andreas Pflug)
       </para>
       <para>
        <itemizedlist>
  
         <listitem>
          <para>
            <function>pg_tablespace_size()</function>
          </para>
         </listitem>

         <listitem>
          <para>
           <function>pg_database_size()</function>
          </para>
         </listitem>

         <listitem>
          <para>
           <function>pg_relation_size()</function>
          </para>
         </listitem>

         <listitem>
          <para>
           <function>pg_total_relation_size()</function>
          </para>
         </listitem>

         <listitem>
          <para>
           <function>pg_size_pretty()</function>
          </para>
         </listitem>
 
        </itemizedlist>
       </para>
       <para>
        <function>pg_total_relation_size()</function> includes indexes and TOAST
        tables.
       </para>
      </listitem>

      <listitem>
       <para>
        Add functions for read-only file access to the cluster directory
        (Dave Page, Andreas Pflug)
       </para>
       <para>
        <itemizedlist>
  
         <listitem>
          <para>
           <function>pg_stat_file()</function>
          </para>
         </listitem>

         <listitem>
          <para>
           <function>pg_read_file()</function>
          </para>
         </listitem>

         <listitem>
          <para>
           <function>pg_ls_dir()</function>
          </para>
         </listitem>

        </itemizedlist>
       </para>
      </listitem>
      
      <listitem>
       <para>
        Add <function>pg_reload_conf()</function> to force reloading of the
        configuration files (Dave Page, Andreas Pflug)
       </para>
      </listitem>

      <listitem>
       <para>
        Add <function>pg_rotate_logfile()</function> to force rotation of the
        server log file (Dave Page, Andreas Pflug)
       </para>
      </listitem>

      <listitem>
       <para>
        Change <literal>pg_stat_*</literal> views to include TOAST tables (Tom)
       </para>
      </listitem>

     </itemizedlist>
    </sect3>
  
  
    <sect3>
     <title>Encoding and Locale Changes</title>
     <itemizedlist>
  
      <listitem>
       <para>
        Rename some encodings to be more consistent and to follow
        international standards (Bruce)
       </para>
       <para>
        <itemizedlist>
  
         <listitem>
          <para>
           <literal>UNICODE</literal> is now <literal>UTF8</literal>
          </para>
         </listitem>

         <listitem>
          <para>
           <literal>ALT</literal> is now <literal>WIN866</literal>
          </para>
         </listitem>

         <listitem>
          <para>
           <literal>WIN</literal> is now <literal>WIN1251</literal>
          </para>
         </listitem>

         <listitem>
          <para>
          <literal>TCVN</literal> is now <literal>WIN1258</literal>
          </para>
         </listitem>

        </itemizedlist>
       </para>

       <para>
        The original names still work.
       </para>
      </listitem>

      <listitem>
       <para>
        Add support for <literal>WIN1252</literal> encoding (Roland Volkmann)
       </para>
      </listitem>

      <listitem>
       <para>
        Add support for four-byte <literal>UTF8</literal> characters (John
        Hansen)
       </para>
       <para>
        Previously only one, two, and three-byte <literal>UTF8</literal> characters
        were supported. This is particularly important for support for
        some Chinese character sets.
       </para>
      </listitem>

      <listitem>
       <para>
        Allow direct conversion between <literal>EUC_JP</literal> and
        <literal>SJIS</literal> to improve performance (Atsushi Ogawa)
       </para>
      </listitem>

      <listitem>
       <para>
        Allow the UTF8 encoding to work on Windows (Magnus)
       </para>
       <para>
        This is done by mapping UTF8 to the Windows-native UTF16 
        implementation.
       </para>
      </listitem>

     </itemizedlist>
    </sect3>
  
  
    <sect3>
     <title>General Server-Side Language Changes</title>
     <itemizedlist>
  
      <listitem>
       <para>
        Fix <command>ALTER LANGUAGE RENAME</command> (Sergey Yatskevich)
       </para>
      </listitem>

      <listitem>
       <para>
        Allow function characteristics, like strictness and volatility,
        to be modified via <command>ALTER FUNCTION</command> (Neil)
       </para>
      </listitem>

      <listitem>
       <para>
        Increase the maximum number of function arguments to 100 (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Allow SQL and PL/PgSQL functions to use <command>OUT</command> and
        <command>INOUT</command> parameters (Tom)
       </para>
       <para>
        <command>OUT</command> is an alternate way for a function to return
        values. Instead of using <command>RETURN</command>, values can be
        returned by assigning to parameters declared as <command>OUT</command> or
        <command>INOUT</command>.  This is notationally simpler in some cases,
        particularly so when multiple values need to be returned.
        While returning multiple values from a function
        was possible in previous releases, this greatly simplifies the
        process.  (The feature will be extended to other server-side
        languages in future releases.)
       </para>
      </listitem>

      <listitem>
       <para>
        Move language handler functions into the <literal>pg_catalog</literal> schema
       </para>
       <para>
        This makes it easier to drop the public schema if desired.
       </para>
      </listitem>

      <listitem>
       <para>
        Add <function>SPI_getnspname()</function> to SPI (Neil)
       </para>
      </listitem>

     </itemizedlist>
    </sect3>
  
    <sect3>
     <title>PL/PgSQL Server-Side Language Changes</title>
     <itemizedlist>
  
      <listitem>
       <para>
        Overhaul the memory management of PL/PgSQL functions (Neil)
       </para>
       <para>
        The parsetree of each function is now stored in a separate
        memory context. This allows this memory to be easily reclaimed
        when it is no longer needed.
       </para>
      </listitem>

      <listitem>
       <para>
        Check function syntax at <command>CREATE FUNCTION</command> time,
        rather than at runtime (Neil)
       </para>
       <para>
        Previously, most syntax errors were reported only when the
        function was executed.
       </para>
      </listitem>

      <listitem>
       <para>
        Allow <command>OPEN</command> to open non-<command>SELECT</command> queries
        like <command>EXPLAIN</command> and <command>SHOW</command> (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        No longer require functions to issue a <command>RETURN</command>
        statement (Tom)
       </para>
       <para>
        This is a byproduct of the newly added <command>OUT</command> and
        <command>INOUT</command> functionality.  <command>RETURN</command> can
        be omitted when it is not needed to provide the function's
        return value.
       </para>
      </listitem>

      <listitem>
       <para>
        Add support for an optional <command>INTO</command> clause to
        PL/PgSQL's <command>EXECUTE</command> statement (Pavel Stehule, Neil)
       </para>
      </listitem>

      <listitem>
       <para>
        Make <command>CREATE TABLE AS</command> set <command>ROW_COUNT</command> (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Define <literal>SQLSTATE</literal> and <literal>SQLERRM</literal> to return
        the <literal>SQLSTATE</literal> and error message of the current
        exception (Pavel Stehule, Neil)
       </para>
       <para>
        These variables are only defined inside exception blocks.
       </para>
      </listitem>

      <listitem>
       <para>
        Allow the parameters to the <command>RAISE</command> statement to be
        expressions (Pavel Stehule, Neil)
       </para>
      </listitem>

      <listitem>
       <para>
        Add a loop <command>CONTINUE</command> statement (Pavel Stehule, Neil)
       </para>
      </listitem>

      <listitem>
       <para>
        Allow block and loop labels (Pavel Stehule)
       </para>
      </listitem>

     </itemizedlist>
    </sect3>
  
  
    <sect3>
     <title>PL/Perl Server-Side Language Changes</title>
     <itemizedlist>

      <listitem>
       <para>
        Allow large result sets to be returned efficiently (Abhijit
        Menon-Sen)
       </para>
       <para>
        This allows functions to use <function>return_next()</function> to avoid
        building the entire result set in memory.
       </para>
      </listitem>

      <listitem>
       <para>
        Allow one-row-at-a-time retrieval of query results (Abhijit Menon-Sen)
       </para>
       <para>
        This allows functions to use <function>spi_query()</function> and
        <function>spi_fetchrow()</function> to avoid accumulating the entire
        result set in memory.
       </para>
      </listitem>

      <listitem>
       <para>
        Force PL/Perl to handle strings as <literal>UTF8</literal> if the
        server encoding is <literal>UTF8</literal> (David Kamholz)
       </para>
      </listitem>

      <listitem>
       <para>
        Add a validator function for PL/Perl (Andrew)
       </para>
       <para>
        This allows syntax errors to be reported at definition time,
        rather than execution time.
       </para>
      </listitem>

      <listitem>
       <para>
        Allow PL/Perl to return a Perl array when the function returns
        an array type (Andrew)
       </para>
       <para>
        This basically maps <productname>PostgreSQL</productname> arrays
        to Perl arrays.
       </para>
      </listitem>

      <listitem>
       <para>
        Allow Perl nonfatal warnings to generate <command>NOTICE</command>
        messages (Andrew)
       </para>
      </listitem>

      <listitem>
       <para>
        Allow Perl's <literal>strict</literal> mode to be enabled (Andrew)
       </para>
      </listitem>

     </itemizedlist>
    </sect3>


    <sect3>
     <title><application>psql</application> Changes</title>
     <itemizedlist>
  
      <listitem>
       <para>
        Add <command>\set ON_ERROR_ROLLBACK</command> to allow statements in
        a transaction to error without affecting the rest of the
        transaction (Greg Sabino Mullane)
       </para>
       <para>
        This is basically implemented by wrapping every statement in a
        sub-transaction.
       </para>
      </listitem>

      <listitem>
       <para>
        Add support for <literal>\x</literal> hex strings in
        <application>psql</application> variables (Bruce)
       </para>
       <para>
        Octal escapes were already supported.
       </para>
      </listitem>

      <listitem>
       <para>
        Add support for <command>troff -ms</command> output format (Roger
        Leigh)
       </para>
      </listitem>

      <listitem>
       <para>
        Allow the history file location to be controlled by
        <envar>HISTFILE</envar> (Andreas Seltenreich)
       </para>
       <para>
        This allows configuration of per-database history storage.
       </para>
      </listitem>

      <listitem>
       <para>
        Prevent <command>\x</command> (expanded mode) from affecting
        the output of <command>\d tablename</command> (Neil)
       </para>
      </listitem>

      <listitem>
       <para>
        Add <option>-L</option> option to <application>psql</application> to
        log sessions (Lorne Sunley)
       </para>
       <para>
        This option was added because some operating systems do not have
        simple command-line activity logging functionality.
       </para>
      </listitem>

      <listitem>
       <para>
        Make <command>\d</command> show the tablespaces of indexes (Qingqing
        Zhou)
       </para>
      </listitem>

      <listitem>
       <para>
        Allow <application>psql</application> help (<command>\h</command>) to
        make a best guess on the proper help information (Greg Sabino
        Mullane)
       </para>
       <para>
        This allows the user to just add <command>\h</command> to the front of
        the syntax error query and get help on the supported syntax.
        Previously any additional query text beyond the command name
        had to be removed to use <command>\h</command>.
       </para>
      </listitem>

      <listitem>
       <para>
        Add <command>\pset numericlocale</command> to allow numbers to be
        output in a locale-aware format (Eugen Nedelcu)
       </para>
       <para>
        For example, using <literal>C</literal> locale <literal>100000</literal> would
        be output as <literal>100,000.0</literal> while a European locale might
        output this value as <literal>100.000,0</literal>.
       </para>
      </listitem>

      <listitem>
       <para>
        Make startup banner show both server version number and
        <application>psql</application>'s version number, when they are different (Bruce)
       </para>
       <para>
        Also, a warning will be shown if the server and <application>psql</application>
        are from different major releases.
       </para>
      </listitem>

     </itemizedlist>
    </sect3>
  
  
    <sect3>
     <title><application>pg_dump</application> Changes</title>
     <itemizedlist>
  
      <listitem>
       <para>
        Add <option>-n</option> / <option>--schema</option> switch to 
        <application>pg_restore</application> (Richard van den Berg)
       </para>
       <para>
        This allows just the objects in a specified schema to be restored.
       </para>
      </listitem>

      <listitem>
       <para>
        Allow <application>pg_dump</application> to dump large objects even in 
        text mode (Tom)
       </para>
       <para>
        With this change, large objects are now always dumped; the former
        <option>-b</option> switch is a no-op.
       </para>
      </listitem>

      <listitem>
       <para>
        Allow <application>pg_dump</application> to dump a consistent snapshot of 
        large objects (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Dump comments for large objects (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Add <option>--encoding</option> to <application>pg_dump</application> 
        (Magnus Hagander)
       </para>
       <para>
        This allows a database to be dumped in an encoding that is
        different from the server's encoding. This is valuable when
        transferring the dump to a machine with a different encoding.
       </para>
      </listitem>

      <listitem>
       <para>
        Rely on <structname>pg_pltemplate</structname> for procedural languages (Tom)
       </para>
       <para>
        If the call handler for a procedural language is in the
        <literal>pg_catalog</literal> schema, <application>pg_dump</application> does not
        dump the handler.  Instead, it dumps the language using just
        <command>CREATE LANGUAGE <replaceable>name</replaceable></command>,
        relying on the <structname>pg_pltemplate</structname> catalog to provide
        the language's creation parameters at load time.
       </para>
      </listitem>

     </itemizedlist>
    </sect3>
  
  
    <sect3>
     <title><application>libpq</application> Changes</title>
     <itemizedlist>
  
      <listitem>
       <para>
        Add a <envar>PGPASSFILE</envar> environment variable to specify the
        password file's filename (Andrew)
       </para>
      </listitem>

      <listitem>
       <para>
        Add <function>lo_create()</function>, that is similar to
        <function>lo_creat()</function> but allows the OID of the large object
        to be specified (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Make <application>libpq</application> consistently return an error
        to the client application on <function>malloc()</function>
        failure (Neil)
       </para>
      </listitem>
     </itemizedlist>
    </sect3>
  
  
    <sect3>
     <title>Source Code Changes</title>
     <itemizedlist>
  
      <listitem>
       <para>
        Fix <application>pgxs</application> to support building against a relocated
        installation
       </para>
      </listitem>
  
      <listitem>
       <para>
        Add spinlock support for the Itanium processor using Intel
        compiler (Vikram Kalsi)
       </para>
      </listitem>

      <listitem>
       <para>
        Add Kerberos 5 support for Windows (Magnus)
       </para>
      </listitem>

      <listitem>
       <para>
        Add Chinese FAQ (laser@pgsqldb.com)
       </para>
      </listitem>

      <listitem>
       <para>
        Rename Rendezvous to Bonjour to match OS/X feature renaming
        (Bruce)
       </para>
      </listitem>

      <listitem>
       <para>
        Add support for <literal>fsync_writethrough</literal> on
        Darwin (Chris Campbell)
       </para>
      </listitem>

      <listitem>
       <para>
        Streamline the passing of information within the server, the
        optimizer, and the lock system (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Allow <application>pg_config</application> to be compiled using MSVC (Andrew)
       </para>
       <para>
        This is required to build DBD::Pg using <application>MSVC</application>.
       </para>
      </listitem>

      <listitem>
       <para>
        Remove support for Kerberos V4 (Magnus)
       </para>
       <para>
        Kerberos 4 had security vulnerabilities and is no longer
        maintained.
       </para>
      </listitem>

      <listitem>
       <para>
        Code cleanups (Coverity static analysis performed by
        EnterpriseDB)
       </para>
      </listitem>

      <listitem>
       <para>
        Modify <filename>postgresql.conf</filename> to use documentation defaults
        <literal>on</literal>/<literal>off</literal> rather than
        <literal>true</literal>/<literal>false</literal> (Bruce)
       </para>
      </listitem>

      <listitem>
       <para>
        Enhance <application>pg_config</application> to be able to report more
        build-time values (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Allow <application>libpq</application> to be built thread-safe
        on Windows (Dave Page)
       </para>
      </listitem>

      <listitem>
       <para>
        Allow IPv6 connections to be used on Windows (Andrew)
       </para>
      </listitem>

      <listitem>
       <para>
        Add Server Administration documentation about I/O subsystem
        reliability (Bruce)
       </para>
      </listitem>

      <listitem>
       <para>
        Move private declarations from <filename>gist.h</filename> to
        <filename>gist_private.h</filename> (Neil)
       </para>

       <para>
        In previous releases, <filename>gist.h</filename> contained both the
        public GiST API (intended for use by authors of GiST index
        implementations) as well as some private declarations used by
        the implementation of GiST itself. The latter have been moved
        to a separate file, <filename>gist_private.h</filename>. Most GiST
        index implementations should be unaffected.
       </para>
      </listitem>

      <listitem>
       <para>
        Overhaul GiST memory management (Neil)
       </para>

       <para>
        GiST methods are now always invoked in a short-lived memory
        context. Therefore, memory allocated via <function>palloc()</function>
        will be reclaimed automatically, so GiST index implementations
        do not need to manually release allocated memory via
        <function>pfree()</function>.
       </para>
      </listitem>
     </itemizedlist>
    </sect3>


    <sect3>
     <title>Modifications des modules contrib</title>
     <itemizedlist>
  
      <listitem>
       <para>
        Ajout du module contrib <filename>/contrib/pg_buffercache</filename>
        (Mark Kirkwood)
       </para>
       <para>
        Ceci affiche le contenu du cache tampon pour le débogage et pour des
        tests de performance.
       </para>
      </listitem>

      <listitem>
       <para>
        Suppression de <filename>/contrib/array</filename> car il est devenu
        obsolète (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Nettoyage du module <filename>/contrib/lo</filename> (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Déplacement de <filename>/contrib/findoidjoins</filename> dans
        <filename>/src/tools</filename> (Tom)
       </para>
      </listitem>

      <listitem>
       <para>
        Renommage des opérateurs <literal>&lt;&lt;</literal>, <literal>&gt;&gt;</literal>,
        <literal>&amp;&lt;</literal> et <literal>&amp;&gt;</literal> dans
        <filename>/contrib/cube</filename>
       </para>
       <para>
        Ces opérateurs n'étaient plus utiles.
       </para>
      </listitem>

      <listitem>
       <para>
        Amélioration de <filename>/contrib/btree_gist</filename> (Janko Richter)
       </para>
      </listitem>

      <listitem>
       <para>
        Amélioration de <filename>/contrib/pgbench</filename> (Tomoaki Sato, Tatsuo)
       </para>
       <para>
        Il existe maintenant une fonctionnalité pour tester avec des scripts SQL
        fournis par l'utilisateur, plutôt que par des séquences de commandes
        codées en dur.
       </para>
      </listitem>

      <listitem>
       <para>
        Amélioration de <filename>/contrib/pgcrypto</filename> (Marko Kreen)
       </para>

       <itemizedlist>
  
        <listitem>
         <para>
          Implémentation du chiffrement des clés OpenPGP symétriques et public
         </para>
         <para>
          Les algorithmes à clé publique RSA et Elgamal sont supportés.
         </para>
        </listitem>

        <listitem>
         <para>
          Construction autonome&nbsp;: inclut les hashs SHA256/384/512, et Fortuna PRNG
         </para>
        </listitem>

        <listitem>
         <para>
          Construction OpenSSL&nbsp;: support de 3DES, utilisation d'un AES
          interne avec OpenSSL &lt; 0.9.7
         </para>
        </listitem>

        <listitem>
         <para>
          Prend les paramètres de constructions (OpenSSL, zlib) à partir du
          résultat de <filename>configure</filename>
         </para>
         <para>
          Il n'est plus nécessaire de modifier le fichier
          <filename>Makefile</filename>.
         </para>
        </listitem>

        <listitem>
         <para>
          Suppression du support pour <filename>libmhash</filename> et
          <filename>libmcrypt</filename>
         </para>
        </listitem>

       </itemizedlist>
      </listitem>

     </itemizedlist>
    </sect3>
  
   </sect2>
  </sect1>
