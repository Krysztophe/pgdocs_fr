<!-- $Header: /var/lib/cvs/pgsql-fr/sgml/installation.sgml,v 1.8.2.1 2005/07/15 06:33:41 guillaume Exp $ -->

<chapter id="installation">
 <title><![%standalone-include[<productname>PostgreSQL</>]]>
  Procédure d'installation</title>

 <indexterm zone="installation">
  <primary>installation</primary>
 </indexterm>

 <para>
  Ce <![%standalone-include;[document]]>
  <![%standalone-ignore;[chapitre]]> décrit l'installation de
  <productname>PostgreSQL</productname> à partir du code source.
 </para>

 <sect1 id="install-short">
  <title>Version courte</title>

  <para>
<synopsis>
./configure
gmake
su
gmake install
adduser postgres
mkdir /usr/local/pgsql/data
chown postgres /usr/local/pgsql/data
su - postgres
/usr/local/pgsql/bin/initdb -D /usr/local/pgsql/data
/usr/local/pgsql/bin/postmaster -D /usr/local/pgsql/data &gt;logfile 2&gt;&amp;1 &amp;
/usr/local/pgsql/bin/createdb test
/usr/local/pgsql/bin/psql test
</synopsis>
   Le reste du 
   <![%standalone-include;[document.]]> 
   <![%standalone-ignore;[chapitre.]]>
   est la version longue.
  </para>
 </sect1>


 <sect1 id="install-requirements">
  <title>Prérequis</title>

  <para>
   En général, les plateformes style unix modernes doivent être capables
   d'exécuter <productname>PostgreSQL</>.
   Les plateformes sur lesquelles des tests ont été effectuées sont listées
   dans la <xref linkend="supported-platforms"> ci-après.
   Dans le répertoire <filename>doc</> de la distribution, il y a plusieurs 
   <acronym>FAQ</> spécifiques à des plateformes particulières que vous pouvez
   consulter si vous avez des problèmes.
  </para>

  <para>
   Les logiciels suivants sont nécessaires pour compiler
   <productname>PostgreSQL</>&nbsp;:

   <itemizedlist>
    <listitem>
     <para>
      <indexterm>
       <primary>make</primary>
      </indexterm>

      Le <application>make</> <acronym>GNU</> est nécessaire&nbsp;; les autres
      programmes <application>make</> <emphasis>ne</> devraient pas fonctionner.
      <application>make</> <acronym>GNU</> est souvent installé sous le nom 
      <filename>gmake</filename>&nbsp;; ce document fera toujours référence à
      lui sous ce nom. (Sur certains système, le <application>make</> 
      <acronym>GNU</acronym> est l'outil par défaut avec 
      <filename>make</> comme nom.) Pour savoir quelle version vous utilisez,
      entrez 
<screen>
<userinput>gmake --version</userinput>
</screen>
      Il est recommandé d'avoir une version postérieure à la version 3.76.1.
     </para>
    </listitem>

    <listitem>
     <para>
      Il est nécessaire d'avoir un compilateur C
      <acronym>ISO</>/<acronym>ANSI</>. Une version récente de
      <productname>GCC</> est recommandée, mais
      <productname>PostgreSQL</> est connu pour être compilable avec de 
      nombreux compilateurs de divers vendeurs.
     </para>
    </listitem>

    <listitem>
     <para>
      <application>gzip</> est nécessaire pour décompresser l'archive.
      <![%standalone-include;[ Si vous lisez ceci, c'est que vous avez très
      certainement passé ce point d'achoppement. ]]>
     </para>
    </listitem>

    <listitem>
     <para>
      <indexterm>
       <primary>readline</primary>
      </indexterm>

      La bibliothèque <acronym>GNU</> <productname>Readline</> sera utilisée par
      défaut (pour une édition facile des lignes et une recherche de
      l'historique des commandes). Si vous ne voulez pas l'utiliser, il vous
      faut spécifier <option>--without-readline</option> au moment d'exécuter
      la commande <filename>configure</>. (Sous
      <productname>NetBSD</productname>, la bibliothèque
      <filename>libedit</filename> est compatible
      <productname>Readline</productname> et est utilisée si le fichier 
      <filename>libreadline</filename> n'est pas trouvé.)
     </para>
    </listitem>

    <listitem>
     <para>
      <indexterm>
       <primary>installation</primary>
       <secondary>sous Windows</secondary>
      </indexterm>

      Pour compiler sous <productname>Windows NT</> ou <productname>Windows
      2000</>, vous avez besoin des packages <productname>Cygwin</> et
      <productname>cygipc</>. Consultez le fichier 
      <filename>doc/FAQ_MSWIN</> pour plus d'informations.
     </para>
    </listitem>
   </itemizedlist>
  </para>

  <para>
   Les paquetages suivants sont optionnels. Ils ne sont pas obligatoires pour
   une compilation par défaut, mais le sont lorsque certaines options sont
   utilisées ainsi que c'est expliqué par la suite.

   <itemizedlist>
    <listitem>
     <para>
      Pour installer le langage de procédures PL/Perl, vous devez avoir une
      installation de <productname>Perl</productname> complète, comprenant la
      bibliothèque <filename>libperl</filename> et les fichiers d'en-tête.
      Comme PL/Perl est une bibliothèque partagée, la bibliothèque
      <indexterm><primary>libperl</primary></indexterm>
      <filename>libperl</filename> doit aussi, sur la plupart des plateformes,
      être partagée. Ce qui n'est le cas que dans les versions récentes de Perl
      et en général c'est le choix de ceux qui installent Perl. 
     </para>

     <para>
      Si vous n'avez pas de bibliothèque partagée alors qu'il vous en faut une,
      un message tel que celui-ci apparaîtra durant la compilation pour vous en
      avertir&nbsp;:
<screen>
*** Cannot build PL/Perl because libperl is not a shared library.
*** You might have to rebuild your Perl installation.  Refer to
*** the documentation for details.
</screen>
      (Si vous ne suivez pas la sortie écran, vous pourrez constater que la
      bibliothèque <filename>plperl.so</filename> de PL/Perl, ou similaire,
      n'est pas installée.) Si c'est le cas, il vous faudra recompiler et
      ré-installer <productname>Perl</productname> manuellement pour être
      capable de compiler PL/Perl. Lors de la phase de configuration de 
      <productname>Perl</productname>, demandez que les bibliothèques soient
      partagées.
     </para>
    </listitem>

    <listitem>
     <para>
      Pour compiler le langage de procédures PL/Python, il faut que Python soit
      installé, y compris les fichiers d'en-tête.
      Puisque PL/Python devra être une bibliothèque partagée, la bibliothèque
      <indexterm><primary>libpython</primary></indexterm>
      <filename>libpython</filename> doit l'être aussi sur la plupart des
      plateformes. Ce n'est pas le cas pour une installation par défaut de
      Python.
     </para>

     <para>
      Si, après la compilation et l'installation, vous avez un fichier nommé
      <filename>plpython.so</filename> (des extensions différentes sont
      possibles), alors tout va pour le mieux. Sinon, vous devriez avoir vu un
      avertissement semblable à&nbsp;:
<screen>
*** Cannot build PL/Python because libpython is not a shared library.
*** You might have to rebuild your Python installation.  Refer to
*** the documentation for details.
</screen>
      Ce qui signifie que vous devez recompiler Python (ou une partie) pour
      activer cette bibliothèque partagée.
     </para>

     <para>
      Le problème est que la distribution de Python ne fournit pas de moyen
      direct de le faire. L'avantage est que nous vous offrons les informations
      pour le faire à l'adresse <ulink
      url="http://www.python.org/doc/FAQ.html#3.30">Python FAQ
      3.30</ulink>. Sur certains systèmes d'exploitation, vous n'avez pas
      vraiment besoin de la bibliothèque partagée, mais il vous faudra en
      convaincre <productname>PostgreSQL</>. Consultez le fichier
      <filename>Makefile</filename> dans le répertoire
      <filename>src/pl/plpython</filename> pour plus de détails.
     </para>
    </listitem>

    <listitem>
     <para>
      Si vous voulez compiler les composantes Tcl ou Tk (clients et langage de
      procédures PL/Tcl), vous avez, bien sûr, besoin que Tcl soit installé.
     </para>
    </listitem>

    <listitem>
     <para>
      Pour compiler le driver JDBC, il vous faut
      <application>Ant</application> 1.5 ou postérieur et
      <acronym>JDK</acronym>. <application>Ant</application> est un outil 
      spécifique pour compiler les paquetages java. Il peut être téléchargé sur
      <ulink
      url="http://jakarta.apache.org/ant/index.html"><application>Ant</application>
      </ulink>.
     </para>

     <para>
      Si vous avez installé différents compilateurs Java, Ant utilisera
      celui défini dans sa configuration. Les distributions précompilées de
      <application>Ant</application> font typiquement appel au fichier de
      configuration <filename>.antrc</filename> dans le répertoire de
      connexion de l'utilisateur. Par exemple, pour utiliser un
      <acronym>JDK</acronym> différent de celui défini par défaut, il vous faut
      les lignes suivantes&nbsp;:

<programlisting>
JAVA_HOME=/usr/local/sun-jdk1.3
JAVACMD=$JAVA_HOME/bin/java
</programlisting>
     </para>

     <note>
      <para>
       N'essayez pas de compiler le pilote d'application en appelant
       <command>ant</command> ou même <command>javac</command> directement.
       Cela ne fonctionne pas. Utilisez <command>gmake</command> normalement
       comme décrit ci après.
      </para>
     </note>
    </listitem>

    <listitem>
     <para>
      Pour activer le support de langage natif (<acronym>NLS</acronym>), qui 
      permet d'afficher les messages dans une langue autre que l'anglais, vous
      avez besoin d'une implémentation de l'<acronym>API</acronym>
      <application>Gettext</>. Certains systèmes d'exploitation l'ont intégré.
      (Par exemple, <systemitem class="osname">Linux</>,
      <systemitem class="osname">NetBSD</>,
      <systemitem class="osname">Solaris</>), pour les autres systèmes vous
      pouvez télécharger les paquetages nécessaires <ulink
      url="http://developer.postgresql.org/~petere/bsd-gettext"></ulink>.
      Si vous utilisez l'implémentation de <application>Gettext</> des
      bibliothèques C <acronym>GNU</acronym>, vous devrez en plus utiliser le 
      paquetage <productname>GNU Gettext</productname> pour certains
      utilitaires. Pour toutes les autres implémentations, vous n'en avez pas
      besoin.
     </para>
    </listitem>

    <listitem>
     <para>
      <application>Kerberos</>, <application>OpenSSL</> ou <application>PAM</>,
      si vous voulez une authentification supportant ces services.
     </para>
    </listitem>
   </itemizedlist>
  </para>

  <para>
   Si vous compilez à partir d'une arborescence <acronym>CVS</acronym> au lieu
   d'utiliser un paquetage contenant les sources, ou si vous faites du
   développement, vous aurez aussi besoin des paquetages suivants&nbsp;:

   <itemizedlist>
    <listitem>
     <para>
      <indexterm>
       <primary>flex</primary>
      </indexterm>
      <indexterm>
       <primary>bison</primary>
      </indexterm>
      <indexterm>
       <primary>yacc</primary>
      </indexterm>

      <application>Flex</> et <application>Bison</>
      sont nécessaires pour compiler à partir d'une récupération du CVS ou si
      vous modifiez les fichiers de recherche et d'analyse. Si vous en avez
      besoin, vérifiez que vous avez <application>Flex</> 2.5.4 ou postérieur
      et <application>Bison</> 1.875 ou postérieur. D'autres programmes
      <application>yacc</> peuvent parfois d'être utilisés, ce qui n'est pas
      recommandé vu les efforts supplémentaires que cela demande. 
      D'autres programmes <application>lex</> ne fonctionneront définitivement
      pas.
     </para>
    </listitem>
   </itemizedlist>
  </para>

  <para>
   Si vous avez besoin de paquetages <acronym>GNU</acronym>, vous pourrez les
   trouver sur un site miroir de <acronym>GNU</acronym> (voir <ulink
   url="http://www.gnu.org/order/ftp.html"></> pour en avoir la liste) ou sur
   <ulink url="ftp://ftp.gnu.org/gnu/"></ulink>.
  </para>

  <para>
   Vérifiez aussi que vous avez assez d'espace disque de disponible. Il vous
   faudra 65&nbsp;Mo pour l'espace de compilation et 15&nbsp;Mo pour le
   répertoire d'installation. Une base de données vide en cluster nécessite
   25&nbsp;Mo, les fichiers de la base prenant 5 fois plus d'espace que des
   fichiers texte contenant les mêmes données. Si vous voulez faire des tests de
   régression, vous aurez besoin temporairement de 90&nbsp;Mo supplémentaires.
   Utilisez la commande <command>df</command> pour vérifier l'espace disque.
  </para>
 </sect1>

<![%standalone-ignore;[
 <sect1 id="install-getsource">
  <title>Obtenir les sources</title>

  <para>
   Les sources de <productname>PostgreSQL</> &version; peuvent être obtenues
   par ftp anonyme à <ulink
   url="ftp://ftp.postgresql.org/pub/source/v&version;/postgresql-&version;.tar.gz"></ulink>.
   Utilisez un site miroir si possible. Après avoir téléchargé le fichier,
   décompressez-le&nbsp;:
<screen>
<userinput>gunzip postgresql-&version;.tar.gz</userinput>
<userinput>tar xf postgresql-&version;.tar</userinput>
</screen>
   Cela créera un répertoire <filename>postgresql-&version;</filename>
   contenant les sources de <productname>PostgreSQL</> dans le répertoire
   courant. Allez dans ce nouveau répertoire pour continuer la procédure
   d'installation.
  </para>
 </sect1>
]]>

 <sect1 id="install-upgrading">
  <title>Si vous effectuez une mise à jour</title>

  <indexterm zone="install-upgrading">
   <primary>Mise à jour</primary>
  </indexterm>

  <para>
   Le format de stockage interne des données a changé avec cette nouvelle
   version de <productname>PostgreSQL</>. Toutefois, si vous faites une mise
   à jour qui n'a pas un de numéro de version de la forme 
   <quote>&majorversion;.x</quote>, vous devrez faire une sauvegarde et une
   restauration des données ainsi que c'est montré ici. Les instructions
   considèrent que votre installation existante est dans le répertoire
   <filename>/usr/local/pgsql</> et que la zone de données est dans
   <filename>/usr/local/pgsql/data</>. Remplacez les chemins de façon
   approprié.
  </para>

  <procedure>
   <step>
    <para>
     Assurez-vous que vos données ne sont pas mises à jour pendant ou après la
     sauvegarde. Cela n'affecterait en rien l'intégrité de la sauvegarde, mais
     les données modifiées ne seraient bien sûr pas incluses. Si nécessaire,
     éditez le fichier
     <filename>/usr/local/pgsql/data/pg_hba.conf</> (ou équivalent) pour 
     verrouiller tous les accès sauf les vôtres.
    </para>
   </step>

   <step>
    <para>
     <indexterm>
      <primary>pg_dumpall</primary>
      <secondary>utilisé pendant la mise à jour</secondary>
     </indexterm>

     Pour effectuer une sauvegarde de votre base, saisissez&nbsp;:
<screen>
<userinput>pg_dumpall &gt; <replaceable>fichierdesortie</></userinput>
</screen>
     Si vous souhaitez conserver les identifiants d'objets (lorsqu'ils sont
     utilisés comme clé étrangère), utilisez l'option <option>-o</option>
     lors de l'exécution de <command>pg_dumpall</>.
    </para>

    <para>
     <command>pg_dumpall</command> ne sauvegarde pas les gros objets.  Lisez
     <![%standalone-include[la documentation]]>
     <![%standalone-ignore[la <xref linkend="backup-dump-caveats">]]>
     si vous en avez besoin.
    </para>

    <para>
     Pour effectuer une sauvegarde, vous pouvez exécuter la commande
     <command>pg_dumpall</command> incluse dans la distribution de votre
     version actuelle. Cependant, pour de meilleurs résultats, essayez
     d'utiliser la commande <command>pg_dumpall</command> contenue dans
     <productname>PostgreSQL</productname> &version; puisqu'elle corrige les
     erreurs des versions précédentes. Ce conseil est absurde tant que vous
     n'avez pas encore installé la nouvelle version. Il devient valable si vous
     souhaitez installer la nouvelle version en parallèle. Dans ce cas, vous
     pouvez faire l'installation normalement et ne transférer les données
     qu'après, ce qui réduira le temps d'indisponibilité.
    </para>
   </step>

   <step>
    <para>
     Si vous installez la nouvelle version à la place de l'ancienne, arrêtez
     l'ancien serveur, au plus tard avant d'installer les nouveaux
     fichiers&nbsp;:
<screen>
<userinput>kill -INT `cat /usr/local/pgsql/data/postmaster.pid | sed 1q`</>
</screen>
     Les versions antérieures à la 7.0 n'ont pas le fichier
     <filename>postmaster.pid</>. Si vous utilisez une telle version, vous
     devez trouver le PID du serveur vous même, par exemple en saisissant 
     <userinput>ps ax | grep postmaster</>, et utiliser la commande
     <command>kill</> avec ce PID.
    </para>

    <para>
     Sur les systèmes qui lancent <productname>PostgreSQL</> au démarrage, il y
     a probablement un fichier de démarrage qui peut faire la même chose. Par
     exemple, sur un système <systemitem class="osname">Red Hat Linux</> la
     commande
<screen>
<userinput>/etc/rc.d/init.d/postgresql stop</userinput>
</screen>
     devrait fonctionner. Une autre possibilité est <userinput>pg_ctl stop</>.
    </para>
   </step>

   <step>
    <para>
     Si vous faites l'installation au même endroit que l'ancienne, il peut être
     une bonne idée de déplacer l'ancienne version, au cas où vous auriez des
     problèmes et que vous ayez besoin de revenir en arrière. Utilisez une
     commande telle que&nbsp;:
<screen>
<userinput>mv /usr/local/pgsql /usr/local/pgsql.old</>
</screen>
    </para>
   </step>
  </procedure>

  <para>
   Après l'installation de <productname>PostgreSQL</> &version;, créez un
   répertoire pour les données et démarrez le nouveau serveur. Rappelez-vous
   que vous devez exécuter ces commandes en étant connecté avec l'utilisateur
   dédié à la base (qui doit déjà exister si vous changez juste de version).
<programlisting>
<userinput>/usr/local/pgsql/bin/initdb -D /usr/local/pgsql/data</>
<userinput>/usr/local/pgsql/bin/postmaster -D /usr/local/pgsql/data</>
</programlisting>
   Enfin, restaurez vos données avec
<screen>
<userinput>/usr/local/pgsql/bin/psql -d template1 -f <replaceable>outputfile</></userinput>
</screen>
   en utilisant le <emphasis>nouveau</> <application>psql</>.
  </para>

  <para>
   Ces principes sont étudiés plus en détails dans <![%standalone-include[the
   documentation,]]> <![%standalone-ignore[la <xref
   linkend="migration">,]]> que vous êtes vivement encouragez à lire dans tous
   les cas.
  </para>
 </sect1>


 <sect1 id="install-procedure">
  <title>Procédure d'installation </title>

  <procedure>

  <step id="configure">
   <title>Configuration</>

   <indexterm zone="configure">
    <primary>configure</primary>
   </indexterm>

   <para>
    La première étape de la procédure d'installation est de configurer votre
    arborescence système et de choisir les options qui vous intéressent.
    Ce qui est fait en exécutant le script <filename>configure</>. Pour une
    installation par défaut, entrez simplement
<screen>
<userinput>./configure</userinput>
</screen>
    Ce script exécutera de nombreux tests afin de déterminer les valeurs
    de certaines variables dépendantes du système et détecter certains aléas
    relatifs à votre système d'exploitation, et, finalement, il créera divers
    fichiers dans l'arborescence de compilation pour enregistrer ce qui a été
    trouvé. (Vous pouvez aussi exécuter <filename>configure</filename> à
    partir d'un répertoire hors de l'arborescence des sources si vous voulez
    conserver l'arborescence de compilation séparé.)
   </para>

   <para>
    La configuration par défaut compilera le serveur et les utilitaires, aussi
    bien que toutes les applications clientes et interfaces qui requièrent
    seulement un compilateur C. Tous les fichiers seront installés par défaut 
    sous <filename>/usr/local/pgsql</>.
   </para>

   <para>
    Vous pouvez personnaliser les processus de compilation et d'installation en
    mettant une ou plusieurs options sur la ligne de commande après
    <filename>configure</filename>&nbsp;:

     <variablelist>
      <varlistentry>
       <term><option>--prefix=<replaceable>PREFIX</></option></term>
       <listitem>
        <para>
         Installe tous les fichiers dans le répertoire <replaceable>PREFIX</>
         au lieu du répertoire <filename>/usr/local/pgsql</filename>. 
         Les fichiers actuels seront installés dans divers
         sous-répertoires&nbsp;; aucun fichier ne sera directement installés
         sous <replaceable>PREFIX</>.
        </para>

        <para>
         Si vous avez des besoins spécifiques, vous pouvez de plus
         personnaliser les sous-répertoires à l'aide des options suivantes.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--exec-prefix=<replaceable>EXEC-PREFIX</></option></term>
       <listitem>
        <para>
         Vous pouvez installer les fichiers dépendants de l'architecture dans
         un répertoire différent, <replaceable>EXEC-PREFIX</>, de celui donné
         par <replaceable>PREFIX</>. Ce qui peut être utile pour partager
         les fichiers dépendants de l'architecture entre plusieurs machines.
         Si vous l'omettez, <replaceable>EXEC-PREFIX</> est égal à 
         <replaceable>PREFIX</> et les fichiers dépendants seront installés
         sous la même arborescence que les fichiers indépendants de
         l'architecture, ce qui est probablement ce que vous voulez.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--bindir=<replaceable>REPERTOIRE</></option></term>
       <listitem>
        <para>
         Spécifie le répertoire des exécutables. Par défaut, il s'agit de
         <filename><replaceable>EXEC-PREFIX</>/bin</>, ce qui signifie
         <filename>/usr/local/pgsql/bin</>.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--datadir=<replaceable>REPERTOIRE</></option></term>
       <listitem>
        <para>
         Prépare le répertoire pour des fichiers de données en lecture seule
         utilisés par les programmes d'installation. Par défaut, il s'agit de
         <filename><replaceable>PREFIX</>/share</>. Il est bon de noter que
         cela n'a rien à voir avec l'emplacement des fichiers de votre base de
         données.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--sysconfdir=<replaceable>REPERTOIRE</></option></term>
       <listitem>
        <para>
         Le répertoire contenant divers fichiers de configuration. Par défaut,
         il s'agit de <filename><replaceable>PREFIX</>/etc</>.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--libdir=<replaceable>REPERTOIRE</></option></term>
       <listitem>
        <para>
         L'endroit où installer les bibliothèques et les modules chargeables
         dynamiquement. Par défaut, il s'agit de
         <filename><replaceable>EXEC-PREFIX</>/lib</>.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--includedir=<replaceable>REPERTOIRE</></option></term>
       <listitem>
        <para>
         Le répertoire où sont installées les en-têtes C et C++. Par défaut, il
         s'agit de <filename><replaceable>PREFIX</>/include</>.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--docdir=<replaceable>REPERTOIRE</></option></term>
       <listitem>
        <para>
         Les fichiers de documentation, sauf les pages <quote>man</>,
         seront installés dans ce répertoire. Par défaut, il s'agit de
         <filename><replaceable>PREFIX</>/doc</>.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--mandir=<replaceable>REPERTOIRE</></option></term>
       <listitem>
        <para>
         Les pages man fournies avec <productname>PostgreSQL</> seront
         installées sous ce répertoire, dans leur sous-répertoire
         <filename>man<replaceable>x</></> respectif.
         Par défaut, il s'agit de <filename><replaceable>PREFIX</>/man</>.
        </para>
       </listitem>
      </varlistentry>
     </variablelist>

     <note>
      <para>
       Une attention toute particulière a été prise afin de rendre possible
       l'installation de <productname>PostgreSQL</> dans des répertoires
       partagés (comme <filename>/usr/local/include</filename>) sans
       interférer avec des noms de fichiers relatifs au reste du système.
       En premier lieu, le mot <quote><literal>/postgresql</literal></quote>
       est automatiquement ajouté au répertoire <varname>datadir</varname>,
       <varname>sysconfdir</varname> et <varname>docdir</varname>,
       à moins que le nom du répertoire à partir de la racine contienne déjà
       le mot <quote><literal>postgres</></quote> où
       <quote><literal>pgsql</></quote>. Par exemple, si vous choisissez
       <filename>/usr/local</filename> comme préfixe, la documentation sera 
       installée dans
       <filename>/usr/local/doc/postgresql</filename>, mais si le 
       préfixe est <filename>/opt/postgres</filename>, alors il sera dans
       <filename>/opt/postgres/doc</filename>.  Les fichiers d'en-têtes
       publiques C de l'interface cliente seront installés sous
       <varname>includedir</varname> et sont propres par rapport aux noms de
       fichiers relatifs au reste du système. Les fichiers d'en-têtes privés et
       les fichiers d'en-têtes du serveur sont installés dans des répertoires
       privés sous <varname>includedir</varname>.
       Voir la documentation de chaque interface pour savoir comment obtenir
       ces fichiers d'en-tête.
       Enfin, un répertoire privé sera aussi créé si nécessaire sous
       <varname>libdir</varname> pour les modules chargeables dynamiquement.
      </para>
     </note>
    </para>

    <para>
     <variablelist>
      <varlistentry>
       <term><option>--with-includes=<replaceable>REPERTOIRES</></option></term>
       <listitem>
        <para>
         <replaceable>REPERTOIRES</> est une liste de répertoires séparés par
         des caractères deux points (:) qui sera ajoutée à la liste de recherche
         des fichiers d'en-tête. Si vous avez des paquetages optionnels (tels
         que <application>Readline</> GNU) installés dans des répertoires non
         conventionnels, vous pouvez utiliser cette option et certainement
         l'option <option>--with-libraries</> correspondante.
        </para>
        <para>
         Exemple&nbsp;:
         <literal>--with-includes=/opt/gnu/include:/usr/sup/include</>.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--with-libraries=<replaceable>REPERTOIRES</></option></term>
       <listitem>
        <para>
         <replaceable>REPERTOIRES</> est une liste de recherche de répertoires
         de bibliothèques séparés par des caractères deux points (:). Vous
         aurez probablement à utiliser cette option (et l'option correspondante
         <option>--with-includes</>) si vous avez des paquetages installés dans
         des répertoires non conventionnels.
        </para>
        <para>
         Exemple&nbsp;: <literal>--with-libraries=/opt/gnu/lib:/usr/sup/lib</>.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--enable-nls<optional>=<replaceable>LANGUES</replaceable></optional></option></term>
       <listitem>
        <para>
         Permet de mettre en place le support des langues natives
         (<acronym>NLS</acronym>). C'est la possibilité d'afficher les messages
         des programmes dans une langue autre que l'anglais.
         <replaceable>LANGUE</replaceable> est une liste de codes des langues
         que vous voulez supporter séparés par un espace. Par 
         exemple, <literal>--enable-nls='de fr'</>.  (L'intersection entre votre
         liste et l'ensemble des langues traduites actuellement sera calculée
         automatiquement.) Si vous ne spécifiez pas de liste, alors toutes les
         traductions disponibles seront installées.
        </para>

        <para>
         Pour utiliser cette option, vous avez besoin d'une implémentation de
         l'API <application>Gettext</>&nbsp;; voir après.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--with-pgport=<replaceable>NUMERO</></option></term>
       <listitem>
        <para>
         Positionne <replaceable>NUMERO</> comme numéro de port par défaut
         pour le serveur et les clients. La valeur par défaut est 5432. Le port
         peut toujours être changé ultérieurement mais, si vous le faites ici,
         alors les exécutables du serveur et des clients auront la même valeur
         par défaut, ce qui est vraiment très pratique. Habituellement, la
         seule bonne raison de choisir une valeur autre que celle par défaut
         est si vous souhaitez exécuter plusieurs serveurs
	 <productname>PostgreSQL</> sur la même machine.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--with-perl</option></term>
       <listitem>
        <para>
         Permet l'utilisation du langage PL/Perl côté serveur.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--with-python</option></term>
       <listitem>
        <para>
         Permet la compilation du langage de procédures PL/Python.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--with-tcl</option></term>
       <listitem>
        <para>
         Compile les composants demandés par Tcl/Tk, qui sont
         <application>libpgtcl</>, <application>pgtclsh</>,
         <application>pgtksh</application>,
         et <application>PL/Tcl</>. Voir après au sujet de
         <option>--without-tk</>.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--without-tk</option></term>
       <listitem>
        <para>
         Si vous spécifiez <option>--with-tcl</> et cette option, alors
         le programme qui nécessite <productname>Tk</>
         (<application>pgtksh</>) sera exclu.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--with-tclconfig=<replaceable>REPERTOIRE</replaceable></option></term>
       <term><option>--with-tkconfig=<replaceable>REPERTOIRE</replaceable></option></term>
       <listitem>
        <para>
         Tcl/Tk installe les fichiers <filename>tclConfig.sh</filename> et
         <filename>tkConfig.sh</filename>, ces fichiers contiennent certaines
         informations de configuration nécessaires pour compiler le module
         d'interfaçage avec Tcl ou Tk. Ces fichiers sont normalement trouvés
         automatiquement à leur place bien connue, mais si vous voulez utiliser
         une version différente de Tcl ou Tk, vous pouvez spécifier le
         répertoire où les trouver.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--with-java</option></term>
       <listitem>
        <para>
         Compile le pilote <acronym>JDBC</acronym> et les paquetages java
         associés.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--with-krb4<optional>=<replaceable>REPERTOIRE</></></option></term>
       <term><option>--with-krb5<optional>=<replaceable>REPERTOIRE</></></option></term>
       <listitem>
        <para>
         Compile le support d'authentification Kerberos. Vous pouvez utiliser
         soit la version 4 soit la version 5 de Kerberos, mais pas
         les deux. L'argument <replaceable>REPERTOIRE</> spécifie le répertoire
         racine de l'installation de Kerberos.
         La valeur <filename>/usr/athena</> est prise par défaut. Si les
         fichiers d'en-tête et bibliothèques correspondants ne sont pas sous
         un répertoire commun, vous devez utiliser les options
         <option>--with-includes</> et <option>--with-libraries</> en plus
         de cette option. Si, d'autre part, les fichiers requis sont dans
         un répertoire qui fait partie de la liste de recherche par défaut
         (par exemple <filename>/usr/lib</>), alors vous pouvez ne pas tenir
         compte de cet argument.
        </para>

        <para>
         <filename>configure</> cherchera les en-têtes et bibliothèques requis
         pour s'assurer que votre installation de Kerberos est correcte
         avant d'effectuer la compilation.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--with-krb-srvnam=<replaceable>NOM</></option></term>
       <listitem>
        <para>
         Le nom du service principal de Kerberos.
         <literal>postgres</literal> est pris par défaut. Il n'y a 
         probablement pas de raison de le changer.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <indexterm>
        <primary>OpenSSL</primary>
        <seealso>SSL</seealso>
       </indexterm>

       <term><option>--with-openssl<optional>=<replaceable>REPERTOIRE</></></option></term>
       <listitem>
        <para>
         Compile le support de connexion <acronym>SSL</> (cryptage). 
         Il est nécessaire que le paquetage <productname>OpenSSL</> soit
         installé. L'argument <replaceable>REPERTOIRE</> spécifie la racine du
         répertoire d'installation de <productname>OpenSSL</>&nbsp;; la valeur
         par défaut est <filename>/usr/local/ssl</>.
        </para>

        <para>
         <filename>configure</> cherchera les en-têtes et bibliothèques requis
         pour s'assurer que votre installation d'<productname>OpenSSL</>
         est correcte avant de lancer la compilation.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--with-pam</option></term>
       <listitem>
        <para>
	 Compile le support <acronym>PAM</><indexterm><primary>PAM</></>
         (<foreignphrase>Modules d'Authentification Pluggable</foreignphrase>).
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--without-readline</option></term>
       <listitem>
        <para>
         Évite l'utilisation de la bibliothèque <application>Readline</>.
         Cela désactive l'édition de la ligne de commande et l'historique dans 
         <application>psql</application>, ce n'est donc pas recommandé.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--with-rendezvous</option></term>
       <listitem>
        <para>
	 Compile le support Rendezvous.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--disable-spinlocks</option></term>
       <listitem>
        <para>
         Autorise le succès de la construction y compris lorsque PostgreSQL n'a
         pas le support spinlock du CPU pour la plateforme. Ce manque de support
         résultera en des performances faibles&nbsp;; du coup, cette option
         devra seulement être utilisée si la construction échoue et vous informe
         du manque de support de spinlock sur votre plateforme.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--enable-thread-safety</option></term>
       <listitem>
        <para>
         Rend les bibliothèques clientes compatibles avec les threads. Ceci
         permet des threads concurrents dans les programmes
         <application>libpq</application> et <application>ECPG</application>
         ce qui leur permet de gérer en toute sûreté leur connexions privées.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--without-zlib</option></term>
       <listitem>
        <para>
         Évite l'utilisation de la bibliothèque <application>Zlib</>. Cela
         désactive le support de la compression dans 
         <application>pg_dump</application>.
         Cette option est seulement là pour les rares systèmes qui ne 
         disposent pas de la bibliothèque.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--enable-debogue</option></term>
       <listitem>
        <para>
         Compile tous les programmes et bibliothèques en mode de débogage.
         Cela signifie que vous pouvez exécuter les programmes via un
         débogueur pour analyser les problèmes. Ce qui grossit considérablement
         la taille des exécutables et, avec des compilateurs autres que GCC,
         habituellement, cela désactive les optimisations du compilateur,
         provocant des ralentissements. Cependant, mettre ce mode en place est
         extrêmement utile pour repérer les problèmes. Actuellement, cette
         option est recommandée pour les installations en production seulement
         si vous utilisez GCC. Néanmoins, vous devriez l'utiliser si vous
         développez ou si vous utilisez une version béta.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--enable-cassert</option></term>
       <listitem>
        <para>
         Permet la vérification des <firstterm>assertions</> par le serveur qui
         teste de nombreux cas de conditions <quote>impossibles</>. Ce qui est
         inestimable dans le cas de développement, mais les tests ralentissent
         le système. Activer cette option n'influe pas sur la stabilité de
         votre serveur&nbsp;! Les assertions vérifiées ne sont pas classées par
         ordre de sévérité et il se peut qu'un bogue anodin fasse redémarrer le
         serveur s'il y a un échec de vérification. 
         Actuellement, cette option n'est pas recommandée dans un
         environnement de production mais vous devriez l'utiliser lors de 
         développement ou pour les versions béta.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry>
       <term><option>--enable-depend</option></term>
       <listitem>
        <para>
         Active la recherche automatique des dépendances. Avec cette option,
         les fichiers makefile sont appelés pour recompiler les fichiers objet
         dès qu'un fichier d'en-tête est modifié. C'est pratique si vous faites
         du développement, mais inutile si vous ne voulez que compiler une fois
         et installer. Pour le moment, cette option ne fonctionne qu'avec GCC.
        </para>
       </listitem>
      </varlistentry>

     </variablelist>
    </para>

    <para>
     Si vous préférez utiliser un compilateur C différent de ceux listés par
     <filename>configure</filename>, alors positionnez la variable
     d'environnement <envar>CC</> pour qu'elle pointe sur le compilateur de 
     votre choix.
     Par défaut, <filename>configure</filename> pointe sur 
     <filename>gcc</filename> à moins qu'il ne soit celui de la plateforme.
     De façon similaire, vous pouvez repositionner les options par défaut du
     compilateur à l'aide de la variable <envar>CFLAGS</envar>.
    </para>

    <para>
     Vous pouvez spécifier les variables d'environnement sur la ligne de
     commande <filename>configure</filename>, par exemple&nbsp;:
<screen>
<userinput>./configure CC=/opt/bin/gcc CFLAGS='-O2 -pipe'</>
</screen>
    </para>
   </step>

  <step>
   <title>Compilation</title>

   <para>
    Pour démarrer la compilation, saisissez
<screen>
<userinput>gmake</userinput>
</screen>
    (Rappelez-vous d'utiliser <application>make</> <acronym>GNU</>). La 
    compilation peut prendre entre cinq minutes et une demi-heure en fonction
    de votre matériel. La dernière ligne affichée devrait être
<screen>
All of PostgreSQL is successfully made. Ready to install.
</screen>
   </para>
  </step>

  <step>
   <title>Tests de régression</title>

   <indexterm>
    <primary>tests de régression</primary>
   </indexterm>

   <para>
    Si vous souhaitez tester le serveur nouvellement compiler avant de
    l'installer, vous pouvez exécuter les tests de régression à ce moment. Les
    tests de régression sont une suite de tests qui vérifient que
    <productname>PostgreSQL</> fonctionne sur votre machine tel que les
    développeurs l'espèrent. Saisissez
<screen>
<userinput>gmake check</userinput>
</screen>
    (Cela ne fonctionne pas en tant que root&nbsp;; faites-le en tant
    qu'utilisateur sans droits.)
    <![%standalone-include[Le fichier
    <filename>src/test/regress/README</> et la
    documentation incluent]]>
    <![%standalone-ignore[Le <xref linkend="regress"> contient]]>
    des détails sur l'interprétation des résultats de ces tests. Vous pouvez
    les répéter autant de fois que vous le voulez en utilisant la même
    commande.
   </para>
  </step>

  <step id="install">
   <title>Installer les fichiers</title>

   <note>
    <para>
     Si vous mettez à jour une version existante et que vous placez
     les fichiers au même endroit que les anciens, alors vous devrez
     sauvegarder vos données et arrêter l'ancien serveur, comme expliqué
     dans la <xref linkend="install-upgrading"> ci-après.
    </para>
   </note>

   <para>
    Pour installer <productname>PostgreSQL</> ,entrez
<screen>
<userinput>gmake install</userinput>
</screen>
    Cela installera les fichiers dans les répertoires spécifiés dans
    l'<xref linkend="configure">. Assurez-vous d'avoir les droits appropriés
    pour écrire dans ces répertoires. Normalement, vous avez besoin d'être
    superutilisateur pour cette étape. Une alternative consiste à créer les
    répertoires cibles à l'avance et à leurs donner les droits appropriées.
   </para>

   <para>
    Vous pouvez utiliser <literal>gmake install-strip</literal> en lieu et
    place de <literal>gmake install</literal> pour dépouiller l'installation
    des exécutables et des bibliothèques. Cela économise un peu d'espace disque.
    Si vous avez effectué la compilation en mode de débogage, ce dépouillage
    l'enlèvera, donc ce n'est à faire seulement si ce mode n'est plus
    nécessaire. <literal>install-strip</literal> essaie d'être raisonnable
    en sauvegardant de l'espace disque, mais il n'a pas une connaissance
    parfaite de la façon de dépouiller un exécutable de tous les octets
    inutiles, ainsi, si vous voulez sauvegarder le maximum d'espace disque, vous
    devrez faire le travail à la main.
   </para>

   <para>
    L'installation standard fournit seulement les fichiers en-têtes nécessaires
    pour le développement d'applications clientes. Si vous prévoyez de faire
    du développement côté serveur (comme des fonction personnelles ou des
    types de données écrits en C), alors vous pouvez vouloir installer toute
    l'arborescence des fichiers d'en-tête de <productname>PostgreSQL</> dans
    votre répertoire de fichiers d'en-tête d'arrivée. Pour cela, saisissez
<screen>
<userinput>gmake install-all-headers</userinput>
</screen>
    Cela ajoute un ou deux mégaoctets à l'installation de base et est utile
    seulement si vous ne prévoyez pas de conserver toute l'arborescence source
    comme référence. (Si vous faites cela, vous pouvez n'utiliser que les
    fichiers en-têtes du répertoire source pour compiler les applicatifs côté
    serveur.)
   </para>

   <formalpara>
    <title>Installation du client uniquement&nbsp;:</title>
    <para>
     Si vous ne voulez qu'installer les applications clientes et les
     bibliothèques d'interface, alors vous pouvez utilisez ces commandes&nbsp;:
<screen>
<userinput>gmake -C src/bin install</>
<userinput>gmake -C src/include install</>
<userinput>gmake -C src/interfaces install</>
<userinput>gmake -C doc install</>
</screen>
    </para>
   </formalpara>
  </step>
  </procedure>

  <formalpara>
   <title>Désinstallation&nbsp;:</title>
   <para>
    Pour désinstaller, utilisez la commande<command>gmake
    uninstall</>. Cependant, cela ne supprimera pas les répertoires créés.
   </para>
  </formalpara>

  <formalpara>
   <title>Ménage&nbsp;:</title>

   <para>
    Après l'installation, vous pouvez faire le ménage en supprimant les
    fichiers issus de la compilation des répertoires sources à l'aide de la
    commande <command>gmake clean</>. Cela conservera les fichiers créés par
    la commande <command>configure</command>, ainsi vous pourrez tout recompiler
    ultérieurement avec <command>gmake</>. Pour remettre l'arborescence
    source dans l'état initial, utilisez <command>gmake distclean</>.
    Si vous voulez effectuer la compilation pour diverses plateformes à partir
    des mêmes sources vous devrez d'abord refaire la configuration à chaque
    fois.
   </para>
  </formalpara>

  <para>
   Si vous avez compilé et que vous vous êtes rendu compte que les options de
   <command>configure</> sont fausses, ou si vous changez quoique ce soit que 
   <command>configure</> prenne en compte (par exemple, la mise à jour
   d'applications), alors c'est une bonne idée de faire un
   <command>gmake distclean</> avant de reconfigurer et recompiler. Sans ça
   vos changement dans les choix de configuration ne seront pas répercutés
   partout où il faut.
  </para>
 </sect1>

 <sect1 id="install-post">
  <title>Initialisation Post-Installation</title>

  <sect2>
   <title>Bibliothèques partagées</title>

   <indexterm>
    <primary>bibliothèque partagée</primary>
   </indexterm>

   <para>
    Sur certains systèmes qui utilisent les bibliothèques partagées (ce que font
    de nombreux systèmes), vous avez besoin de leurs spécifier comment trouver
    les nouvelles bibliothèques partagées. Les systèmes sur lesquels ce
    <emphasis>n'est</emphasis> pas nécessaire comprennent <systemitem
    class="osname">BSD/OS</>, <systemitem class="osname">FreeBSD</>,
    <systemitem class="osname">HP-UX</>, <systemitem
    class="osname">IRIX</>, <systemitem class="osname">Linux</>,
    <systemitem class="osname">NetBSD</>, <systemitem
    class="osname">OpenBSD</>, <systemitem class="osname">Tru64
    UNIX</> (formellement <systemitem class="osname">Digital UNIX</>) et
    <systemitem class="osname">Solaris</>.
   </para>

   <para>
    La méthode pour le faire varie selon la plateforme, mais la méthode la plus
    répandue consiste à positionner des variables d'environnement comme
    <envar>LD_LIBRARY_PATH</>&nbsp;: avec les shells Bourne
    (<command>sh</>, <command>ksh</>, <command>bash</>, <command>zsh</>)
<programlisting>
LD_LIBRARY_PATH=/usr/local/pgsql/lib
export LD_LIBRARY_PATH
</programlisting>
    ou en <command>csh</> ou <command>tcsh</>
<programlisting>
setenv LD_LIBRARY_PATH /usr/local/pgsql/lib
</programlisting>
    Remplacez <literal>/usr/local/pgsql/lib</> par la valeur donnée à
    <option><literal>--libdir</></> dans <xref linkend="configure">.
    Vous pouvez mettre ces commandes dans un script shell de démarrage tel
    que <filename>/etc/profile</> ou <filename>~/.bash_profile</>. Certaines
    informations pertinentes au sujet de mises en garde associées à cette
    méthode peuvent être trouvées sur
    <ulink url="http://www.visi.com/~barr/ldpath.html"></ulink>.
   </para>

   <para>
    Sur certains systèmes, il peut être préférable de renseigner la
    variable d'environnement
    <envar>LD_RUN_PATH</envar> <emphasis>avant</emphasis>
    la compilation.
   </para>

   <para>
    Avec <systemitem class="osname">Cygwin</systemitem>, mettez le répertoire
    des bibliothèques dans la variable <envar>PATH</envar> ou déplacez les
    fichiers <filename>.dll</filename> dans le répertoire
    <filename>bin</filename>.
   </para>

   <para>
    En cas de doute, référez-vous aux pages de man de votre système (peut-être
    <command>ld.so</command> ou <command>rld</command>). Si vous avez
    ultérieurement un message tel que
<screen>
psql: error in loading shared libraries
libpq.so.2.1: cannot open shared object file: No such file or directory
</screen>
    alors cette étape est vraiment nécessaire. Faites-y attention.
   </para>

   <para>
    <indexterm>
     <primary>ldconfig</primary>
    </indexterm>
    Si votre système d'exploitation est 
    <systemitem class="osname">BSD/OS</>, <systemitem
    class="osname">Linux</> ou <systemitem class="osname">SunOS 4</>
    et que vous avez les accès de superutilisateur, vous pouvez exécuter
<programlisting>
/sbin/ldconfig /usr/local/pgsql/lib
</programlisting>
    (ou le répertoire équivalent) après l'installation pour permettre à
    l'éditeur de liens de trouver les bibliothèques partagées plus rapidement.
    Référez-vous aux pages man portant sur <command>ldconfig</> pour plus
    d'informations. Pour les systèmes d'exploitation <systemitem
    class="osname">FreeBSD</>, <systemitem
    class="osname">NetBSD</> et <systemitem class="osname">OpenBSD</>,
    la commande est
<programlisting>
/sbin/ldconfig -m /usr/local/pgsql/lib
</programlisting>
    Les autres systèmes d'exploitation ne sont pas connus pour avoir de
    commande équivalente.
   </para>
  </sect2>

  <sect2>
   <title>Variables d'environnement</title>

   <indexterm>
    <primary><envar>PATH</envar></primary>
   </indexterm>

   <para>
    Si l'installation a été faite dans
    <filename>/usr/local/pgsql</> ou à un autre endroit qui n'est pas dans les
    répertoires contenant les exécutables par défaut, vous devez ajouter
    <filename>/usr/local/pgsql/bin</> (ou le répertoire fourni à
    <option><literal>--bindir</></> au moment du <xref linkend="configure">)
    dans votre <envar>PATH</>. Techniquement, ce n'est pas une obligation mais
    cela rendra l'utilisation de <productname>PostgreSQL</> plus confortable.
   </para>

   <para>
    Pour ce faire, ajoutez ce qui suit dans le fichier d'initialisation de
    votre shell, par exemple
    <filename>~/.bash_profile</> (ou <filename>/etc/profile</>, si vous voulez
    que tous les utilisateurs l'aient)&nbsp;:
<programlisting>
PATH=/usr/local/pgsql/bin:$PATH
export PATH
</programlisting>
    Si vous utilisez le <command>csh</> ou le <command>tcsh</>, alors utilisez
    la commande&nbsp;:
<programlisting>
set path = ( /usr/local/pgsql/bin $path )
</programlisting>
   </para>

   <para>
    <indexterm>
     <primary><envar>MANPATH</envar></primary>
    </indexterm>
    Pour que votre système trouve la documentation <application>man</>,
    il vous faut ajouter des lignes telles que celles qui suivent à votre
    fichier d'initialisation du shell, à moins que vous installiez ces pages
    dans un répertoire où elles sont mises normalement.
<programlisting>
MANPATH=/usr/local/pgsql/man:$MANPATH
export MANPATH
</programlisting>
   </para>

   <para>
    Les variables d'environnement <envar>PGHOST</> et <envar>PGPORT</>
    indiquent aux applications clientes l'hôte et le port du serveur de base.
    Elles surchargent les valeurs utilisées lors de la compilation. Si vous
    exécutez des applications clientes à distance, alors c'est plus pratique si
    tous les utilisateurs peuvent paramétrer <envar>PGHOST</>. Ce n'est pas une
    obligation, cependant, la configuration peut être communiquée via les 
    options de lignes de commande à la plupart des programmes clients.
   </para>
  </sect2>
 </sect1>


<![%standalone-include;[
 <sect1 id="install-getting-started">
  <title>Démarrer</title>

  <para>
   La suite est un résumé rapide de la façon de faire fonctionner
   <productname>PostgreSQL</> une fois l'installation terminée. La
   documentation principale contient plus d'informations.
  </para>

  <procedure>
   <step>
    <para>
     Créer un compte utilisateur pour le serveur <productname>PostgreSQL</>.
     C'est cet utilisateur qui fera démarrer le serveur. Pour un usage
     en production, vous devez créer un compte sans droits
     (<quote>postgres</> est habituellement utilisé). Si vous n'avez pas les
     accès superutilisateur ou si vous voulez juste regarder, votre propre 
     compte utilisateur est suffisant. Mais, utiliser le compte superutilisateur
     pour démarrer le serveur est risqué (au point de vue sécurité) et ne
     fonctionnera pas.
<screen>
<userinput>adduser postgres</>
</screen>
    </para>
   </step>

   <step>
    <para>
     Faire l'installation de la base de données avec la commande
     <command>initdb</>. Pour exécuter <command>initdb</>, vous devez être
     connecté sur votre serveur avec le compte <productname>PostgreSQL</>.
     Cela ne fonctionnera pas avec le compte superutilisateur.
<screen>
root# <userinput>mkdir /usr/local/pgsql/data</>
root# <userinput>chown postgres /usr/local/pgsql/data</>
root# <userinput>su - postgres</>
postgres$ <userinput>/usr/local/pgsql/bin/initdb -D /usr/local/pgsql/data</>
</screen>
    </para>

    <para>
     L'option <option>-D</> spécifie le répertoire où les données seront
     stockées. Vous pouvez utiliser le chemin que vous voulez, il n'a pas à
     être sous le répertoire de l'installation. Avant de lancer
     <command>initdb</>, assurez-vous que le compte serveur peut écrire dans ce
     répertoire (ou le créer s'il n'existe pas), comme c'est montré ici.
    </para>
   </step>

   <step>
    <para>
     L'étape précédente vous a indiqué comment démarrer le serveur de base.
     Maintenant, faites-le. La commande doit ressembler à
<programlisting>
/usr/local/pgsql/bin/postmaster -D /usr/local/pgsql/data
</programlisting>
     Cela démarrera le serveur en avant-plan. Pour le mettre en arrière plan
     faites quelque chose comme
<programlisting>
nohup /usr/local/pgsql/bin/postmaster -D /usr/local/pgsql/data \
    &lt;/dev/NULL &gt;&gt;server.log 2&gt;&amp;1 &lt;/dev/NULL &amp;
</programlisting>
    </para>

    <para>
     Pour arrêter le serveur fonctionnant en arrière-plan, vous pouvez saisir
<programlisting>
kill `cat /usr/local/pgsql/data/postmaster.pid`
</programlisting>
    </para>

    <para>
     Dans le but d'autoriser les connexions TCP/IP (plutôt que de n'utiliser
     que les sockets Unix) il vous faut passer l'option <option>-i</> à
     <filename>postmaster</>.
    </para>
   </step>

   <step>
    <para>
     Créer une base de données&nbsp;:
<screen>
<userinput>createdb testdb</>
</screen>
     Ensuite, entrez
<screen>
<userinput>psql testdb</>
</screen>
     pour vous connecter à la base. À l'invite, vous pouvez saisir des
     commandes SQL et commencer l'expérimentation.
    </para>
   </step>
  </procedure>
 </sect1>

 <sect1 id="install-whatnow">
  <title>Et maintenant&nbsp;?</title>

  <para>
   <itemizedlist>
    <listitem>
     <para>
      La distribution de <productname>PostgreSQL</> comprend un 
      document compréhensible que vous devriez lire de temps en temps.
      Après l'installation, le document peut être lu en faisant pointer
      votre navigateur internet sur
      <filename>/usr/local/pgsql/doc/html/index.html</>, excepté si vous avez
      changé les répertoires d'installation.
     </para>

     <para>
      Le premier chapitre de la documentation est un tutoriel qui devrait être
      votre première lecture si vous êtes nouveau dans le monde des bases
      de données <acronym>SQL</>. Si vous êtes familier avec les concepts des
      bases de données, alors vous voudrez commencer avec la partie
      administration du serveur qui contient des informations sur la façon de
      mettre en place le serveur de base, les bases des utilisateurs et
      l'authentification.
     </para>
    </listitem>

    <listitem>
     <para>
      Normalement, vous voudrez faire en sorte que le serveur de base démarre
      automatiquement au boot de la machine. Pour ce faire, quelques
      suggestions se trouvent dans la documentation.
     </para>
    </listitem>

    <listitem>
     <para>
      Faire les tests de régression sur le serveur installé (en utilisant
      <command>gmake installcheck</command>). Si vous ne l'avez pas fait auparavant,
      vous devriez définitivement le faire maintenant. C'est aussi expliqué
      dans la documentation.
     </para>
    </listitem>

    <listitem>
     <para>
      Par défaut, <productname>PostgreSQL</> est configuré pour fonctionner sur
      un matériel mimimal. Ceci lui permet de fonctionner sur pratiquement
      toutes les configurations matérielles. Néanmoins, la configuration par
      défaut n'est pas conçue pour des performances optimales. Pour disposer des
      meilleures performances, plusieurs paramètres serveurs doivent être
      ajustés, les deux plus communs étant <varname>shared_buffers</varname> et
      <varname>sort_mem</varname> mentionnés dans la documentation.
      Les autres paramètres mentionnés dans la documentation affectent aussi les
      performances.
     </para>
    </listitem>
   </itemizedlist>
  </para>

 </sect1>
]]>


 <sect1 id="supported-platforms">
  <title>Plateformes supportées</title>

  <para>
   La communauté de développeurs a vérifié que <productname>PostgreSQL</>
   fonctionne sur les plateformes listées ci-après. Dire qu'une plateforme
   est supportée signifie en général que la compilation et l'installation de
   <productname>PostgreSQL</> peuvent être faites en suivant les instructions et
   que les tests de régression sont valides.
  </para>

  <note>
   <para>
    Si vous avez des problèmes avec une installation sur une plateforme
    supportée, veuillez écrire à <email>pgsql-bogues@postgresql.org</email>
    ou à <email>pgsql-ports@postgresql.org</email> et non aux personnes
    listées dans ce document.
   </para>
  </note>

    <informaltable>
     <tgroup cols="5">
      <thead>
       <row>
	<entry><acronym>Système d'exploitation</acronym></entry>
	<entry>Processeur</entry>
	<entry>Version</entry>
	<entry>Date du rapport</entry>
	<entry>Remarques</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry><systemitem class="osname">AIX</></entry>
        <entry><systemitem>RS6000</></entry>
        <entry>7.4</entry>
        <entry>25/10/2003,
          Hans-J&uuml;rgen Sch&ouml;nig (<email>hs@cybertec.at</email>)</entry>
        <entry>voir aussi <filename>doc/FAQ_AIX</filename></entry>
       </row>
       <row>
        <entry><systemitem class="osname">BSD/OS</></entry>
        <entry><systemitem>x86</></entry>
        <entry>7.4</entry>
        <entry>24/10/2003,
         Bruce Momjian (<email>pgman@candle.pha.pa.us</email>)</entry>
        <entry>4.3</entry>
       </row>
       <row>
        <entry><systemitem class="osname">FreeBSD</></entry>
        <entry><systemitem>Alpha</></entry>
        <entry>7.4</entry>
        <entry>25/10/2003,
         Peter Eisentraut (<email>peter_e@gmx.net</email>)</entry>
        <entry>4.8</entry>
       </row>
       <row>
        <entry><systemitem class="osname">FreeBSD</></entry>
        <entry><systemitem>x86</></entry>
        <entry>7.4</entry>
        <entry>24/10/2003,
         Peter Eisentraut (<email>peter_e@gmx.net</email>)</entry>
        <entry>4.9</entry>
       </row>
       <row>
        <entry><systemitem class="osname">HP-UX</></entry>
        <entry><systemitem>PA-RISC</></entry>
        <entry>7.4</entry>
        <entry>
         31/10/2003, 10.20, Tom Lane (<email>tgl@sss.pgh.pa.us</email>);
         04/11/2003, 11.00, Peter Eisentraut (<email>peter_e@gmx.net</email>)
        </entry>
        <entry><command>gcc</> and <command>cc</>; voir aussi <filename>doc/FAQ_HPUX</filename></entry>
       </row>
       <row>
        <entry><systemitem class="osname">IRIX</></entry>
        <entry><systemitem>MIPS</></entry>
        <entry>7.4</entry>
        <entry>12/11/2003,
         Robert E. Bruccoleri (<email>bruc@stone.congenomics.com</email>)</entry>
        <entry>6.5.20, <command>cc</command> only</entry>
       </row>
       <row>
        <entry><systemitem class="osname">Linux</></entry>
        <entry><systemitem>Alpha</></entry>
        <entry>7.4</entry>
        <entry>25/10/2003,
         No&egrave;l K&ouml;the (<email>noel@debian.org</email>)</entry>
        <entry>2.4</entry>
       </row>
       <row>
        <entry><systemitem class="osname">Linux</></entry>
        <entry><systemitem>arm41</></entry>
        <entry>7.4</entry>
        <entry>25/10/2003,
         No&egrave;l K&ouml;the (<email>noel@debian.org</email>)</entry>
        <entry>2.4</entry>
       </row>
       <row>
        <entry><systemitem class="osname">Linux</></entry>
        <entry><systemitem>Itanium</></entry>
        <entry>7.4</entry>
        <entry>25/10/2003,
         No&egrave;l K&ouml;the (<email>noel@debian.org</email>)</entry>
        <entry>2.4</entry>
       </row>
       <row>
        <entry><systemitem class="osname">Linux</></entry>
        <entry><systemitem>m68k</></entry>
        <entry>7.4</entry>
        <entry>25/10/2003,
         No&egrave;l K&ouml;the (<email>noel@debian.org</email>)</entry>
        <entry>2.4</entry>
       </row>
       <row>
        <entry><systemitem class="osname">Linux</></entry>
        <entry><systemitem>MIPS</></entry>
        <entry>7.4</entry>
        <entry>25/10/2003,
         No&egrave;l K&ouml;the (<email>noel@debian.org</email>)</entry>
        <entry>2.4</entry>
       </row>
       <row>
        <entry><systemitem class="osname">Linux</></entry>
        <entry><systemitem>Opteron</></entry>
        <entry>7.4</entry>
        <entry>01/11/2003,
         Jani Averbach (<email>jaa@cc.jyu.fi</email>)</entry>
        <entry>2.6</entry>
       </row>
       <row>
        <entry><systemitem class="osname">Linux</></entry>
        <entry><systemitem>PPC</></entry>
        <entry>7.4</entry>
        <entry>25/10/2003,
         No&egrave;l K&ouml;the (<email>noel@debian.org</email>)</entry>
        <entry></entry>
       </row>
       <row>
        <entry><systemitem class="osname">Linux</></entry>
        <entry><systemitem>S/390</></entry>
        <entry>7.4</entry>
        <entry>25/10/2003,
         No&egrave;l K&ouml;the (<email>noel@debian.org</email>)</entry>
        <entry>2.4</entry>
       </row>
       <row>
        <entry><systemitem class="osname">Linux</></entry>
        <entry><systemitem>Sparc</></entry>
        <entry>7.4</entry>
        <entry>24/10/2003,
         Peter Eisentraut (<email>peter_e@gmx.net</email>)</entry>
        <entry>2.4, 32-bit</entry>
       </row>
       <row>
        <entry><systemitem class="osname">Linux</></entry>
        <entry><systemitem>x86</></entry>
        <entry>7.4</entry>
        <entry>24/10/2003,
         Peter Eisentraut (<email>peter_e@gmx.net</email>)</entry>
        <entry>2.4</entry>
       </row>
       <row>
        <entry><systemitem class="osname">Mac OS X</></entry>
        <entry><systemitem>PPC</></entry>
        <entry>7.4</entry>
        <entry>24/10/2003,
         10.2.8, Adam Witney (<email>awitney@sghms.ac.uk</email>),
         10.3, Marko Karppinen (<email>marko@karppinen.fi</email>)</entry>
        <entry></entry>
       </row>
       <row>
        <entry><systemitem class="osname">NetBSD</></entry>
        <entry><systemitem>arm32</></entry>
        <entry>7.4</entry>
        <entry>12/11/2003,
         Patrick Welche (<email>prlw1@newn.cam.ac.uk</email>)</entry>
        <entry>1.6ZE/acorn32</entry>
       </row>
       <row>
        <entry><systemitem class="osname">NetBSD</></entry>
        <entry><systemitem>Sparc</></entry>
        <entry>7.4.1</entry>
        <entry>26/11/2003,
         Peter Eisentraut (<email>peter_e@gmx.net</email>)</entry>
        <entry>1.6.1, 32-bit</entry>
       </row>
       <row>
        <entry><systemitem class="osname">NetBSD</></entry>
        <entry><systemitem>x86</></entry>
        <entry>7.4</entry>
        <entry>24/10/2003,
         Peter Eisentraut (<email>peter_e@gmx.net</email>)</entry>
        <entry>1.6</entry>
       </row>
       <row>
        <entry><systemitem class="osname">OpenBSD</></entry>
        <entry><systemitem>Sparc</></entry>
        <entry>7.4</entry>
        <entry>01/11/2003,
         Peter Eisentraut (<email>peter_e@gmx.net</email>)</entry>
        <entry>3.4</entry>
       </row>
       <row>
        <entry><systemitem class="osname">OpenBSD</></entry>
        <entry><systemitem>x86</></entry>
        <entry>7.4</entry>
        <entry>24/10/2003,
         Peter Eisentraut (<email>peter_e@gmx.net</email>)</entry>
        <entry>3.2</entry>
       </row>
       <row>
        <entry><systemitem class="osname">Solaris</></entry>
        <entry><systemitem>Sparc</></entry>
        <entry>7.4</entry>
        <entry>26/10/2003,
         Christopher Browne (<email>cbbrowne@libertyrms.info</email>)</entry>
        <entry>2.8; voir aussi <filename>doc/FAQ_Solaris</filename></entry>
       </row>
       <row>
        <entry><systemitem class="osname">Solaris</></entry>
        <entry><systemitem>x86</></entry>
        <entry>7.4</entry>
        <entry>26/10/2003,
         Kurt Roeckx (<email>Q@ping.be</email>)</entry>
        <entry>2.6; voir aussi <filename>doc/FAQ_Solaris</filename></entry>
       </row>
       <row>
        <entry><systemitem class="osname">Tru64 UNIX</></entry>
        <entry><systemitem>Alpha</></entry>
        <entry>7.4</entry>
        <entry>25/10/2003, 5.1b, Peter Eisentraut (<email>peter_e@gmx.net</email>);
         29/10/2003, 4.0g, Alessio Bragadini (<email>alessio@albourne.com</email>)</entry>
        <entry></entry>
       </row>
       <row>
        <entry><systemitem class="osname">UnixWare</></entry>
        <entry><systemitem>x86</></entry>
        <entry>7.4</entry>
        <entry>03/11/2003, Larry Rosenman (<email>ler@lerctr.org</email>)</entry>
        <entry>7.1.3; les tests de jointure peuvent échouer, voir aussi <filename>doc/FAQ_SCO</filename></entry>
       </row>
       <row>
        <entry><systemitem class="osname">Windows with <application>Cygwin</application></></entry>
        <entry><systemitem>x86</></entry>
        <entry>7.4</entry>
        <entry>24/10/2003,
         Peter Eisentraut (<email>peter_e@gmx.net</email>)</entry>
        <entry>voir <filename>doc/FAQ_MSWIN</filename></entry>
       </row>
       <row>
        <entry><systemitem class="osname">Windows</></entry>
        <entry><systemitem>x86</></entry>
        <entry>7.4</entry>
        <entry>27/10/2003, 
         Dave Page (<email>dpage@vale-housing.co.uk</email>)</entry>
        <entry>
         la version native concerne uniquement le client
<![%standalone-include[voir la documentation]]>
<![%standalone-ignore[voir le <xref linkend="install-win32">]]>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>

  <formalpara>
   <title>Plateformes non supportées&nbsp;:</title>
   <para>
    Les plateformes suivantes sont connues pour ne pas fonctionner, ou
    fonctionnaient pour des versions antérieures et nous n'avons pas reçu de
    rapport explicite avec la version &majorversion; au moment où cette liste
    a été écrite. Nous les plaçons ici afin de vous prévenir qu'elles
    <emphasis>peuvent</> être supportées avec quelques efforts.
   </para>
  </formalpara>

  <informaltable>
   <tgroup cols="5">
    <thead>
     <row>
      <entry><acronym>Système d'exploitation</acronym></entry>
      <entry>Processeur</entry>
      <entry>Version</entry>
      <entry>Date du rapport</entry>
      <entry>Remarques</entry>
     </row>
    </thead>

    <tbody>
     <row>
      <entry><systemitem class="osname">BeOS</></entry>
      <entry><systemitem>x86</></entry>
      <entry>7.2</entry>
      <entry>29/11/2001,
       Cyril Velter (<email>cyril.velter@libertysurf.fr</email>)</entry>
      <entry>nécessite une mise à jour du code des sémaphores</entry>
     </row>
     <row>
      <entry><systemitem class="osname">Linux</></entry>
      <entry><systemitem>PlayStation 2</></entry>
      <entry>7.4</entry>
      <entry>02/11/2003,
       Peter Eisentraut (<email>peter_e@gmx.net</email>)</entry>
      <entry>
       nécessite un nouveau <filename>config.guess</filename>,
       <option>--disable-spinlocks</option>, <literal>#undef
       HAS_TEST_AND_SET</>, et la désactivation de <function>tas_dummy()</>
      </entry>
     </row>
     <row>
      <entry><systemitem class="osname">Linux</></entry>
      <entry><systemitem>PA-RISC</></entry>
      <entry>7.4</entry>
      <entry>25/10/2003,
       No&egrave;l K&ouml;the (<email>noel@debian.org</email>)</entry>
      <entry>nécessite <option>--disable-spinlocks</option>, sinon OK</entry>
     </row>
     <row>
      <entry><systemitem class="osname">NetBSD</></entry>
      <entry><systemitem>Alpha</></entry>
      <entry>7.2</entry>
      <entry>20/11/2001,
       Thomas Thai (<email>tom@minnesota.com</email>)</entry>
      <entry>1.5W</entry>
     </row>
     <row>
      <entry><systemitem class="osname">NetBSD</></entry>
      <entry><systemitem>MIPS</></entry>
      <entry>7.2.1</entry>
      <entry>13/06/2002,
       Warwick Hunter (<email>whunter@agile.tv</email>)</entry>
      <entry>1.5.3</entry>
     </row>
     <row>
      <entry><systemitem class="osname">NetBSD</></entry>
      <entry><systemitem>PPC</></entry>
      <entry>7.2</entry>
      <entry>28/11/2001,
       Bill Studenmund (<email>wrstuden@netbsd.org</email>)</entry>
      <entry>1.5</entry>
     </row>
     <row>
      <entry><systemitem class="osname">NetBSD</></entry>
      <entry><systemitem>VAX</></entry>
      <entry>7.1</entry>
      <entry>30/03/2001,
       Tom I. Helbekkmo (<email>tih@kpnQwest.no</email>)</entry>
      <entry>1.5</entry>
     </row>
     <row>
      <entry><systemitem class="osname">QNX 4 RTOS</></entry>
      <entry><systemitem>x86</></entry>
      <entry>7.2</entry>
      <entry>10/12/2001,
       Bernd Tegge (<email>tegge@repas-aeg.de</email>)
      </entry>
      <entry>nécessite la mise à jour du code des sémaphores,
       voir aussi <filename>doc/FAQ_QNX4</filename></entry>
     </row>
     <row>
      <entry><systemitem class="osname">QNX RTOS v6</></entry>
      <entry><systemitem>x86</></entry>
      <entry>7.2</entry>
      <entry>20/11/2001, Igor Kovalenko (<email>Igor.Kovalenko@motorola.com</email>)</entry>
      <entry>correctifs disponibles dans les archives, mais trop tard pour la 7.2</entry>
     </row>
     <row>
      <entry><systemitem class="osname">SCO OpenServer</></entry>
      <entry><systemitem>x86</></entry>
      <entry>7.3.1</entry>
      <entry>11/12/2002, 
       Shibashish Satpathy (<email>shib@postmark.net</>)</entry>
      <entry>5.0.4, <command>gcc</>&nbsp;;  voir aussi
       <filename>doc/FAQ_SCO</filename></entry>
     </row>
     <row>
      <entry><systemitem class="osname">SunOS 4</></entry>
      <entry><systemitem>Sparc</></entry>
      <entry>7.2</entry>
      <entry>04/12/2001, Tatsuo Ishii (<email>t-ishii@sra.co.jp</email>)</entry>
      <entry></entry>
     </row>
    </tbody>
   </tgroup>
  </informaltable>
 </sect1>

</chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode:sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-tabs-mode:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"./reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:("/usr/share/sgml/catalog")
sgml-local-ecat-files:nil
End:
-->
