<!--
$Header: /var/lib/cvs/pgsql-fr/sgml/ref/alter_domain.sgml,v 1.6 2004/12/21 23:09:11 guillaume Exp $
PostgreSQL documentation
-->

<refentry id="SQL-ALTERDOMAIN">
 <refmeta>
  <refentrytitle id="sql-alterdomain-title">ALTER DOMAIN</refentrytitle>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>
   ALTER DOMAIN
  </refname>
  <refpurpose>
   change la définition d'un domaine
  </refpurpose>
 </refnamediv>

 <indexterm zone="sql-alterdomain">
  <primary>ALTER DOMAIN</primary>
 </indexterm>

 <refsynopsisdiv>
  <synopsis>
ALTER DOMAIN <replaceable class="PARAMETER">nom</replaceable>
    { SET DEFAULT <replaceable class="PARAMETER">expression</replaceable> | DROP DEFAULT }
ALTER DOMAIN <replaceable class="PARAMETER">nom</replaceable>
    { SET | DROP } NOT NULL
ALTER DOMAIN <replaceable class="PARAMETER">nom</replaceable>
    ADD <replaceable class="PARAMETER">contrainte de domaine</replaceable>
ALTER DOMAIN <replaceable class="PARAMETER">nom</replaceable>
    DROP CONSTRAINT <replaceable class="PARAMETER">nom de contrainte</replaceable> [ RESTRICT | CASCADE ]
ALTER DOMAIN <replaceable class="PARAMETER">nom</replaceable>
    OWNER TO <replaceable class="PARAMETER">nouveau propriètaire</replaceable> 
  </synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>

  <para>
   <command>ALTER DOMAIN</command> change la définition d'un domaine existant.
   Il existe plusieurs sous-formes:
  </para>

  <variablelist>
   <varlistentry>
    <term>SET/DROP DEFAULT</term>
    <listitem>
     <para>
      Ces formes placent ou suppriment la valeur par défaut d'un domaine. Notez
que ces valeurs par défaut s'appliquent seulement aux commandes <command>INSERT</command> subséquentes; elles n'affectent pas les lignes d'une table utilisant
dèja le domaine.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term>SET/DROP NOT NULL</term>
    <listitem>
     <para>
Ces formes modifient soit un domaine marqué pour permettre les valeurs
NULL ou soit pour rejeter les valeurs NULL.
        Vous pouvez faire seulement <literal>SET NOT NULL</>
quand les colonnes utilisant le domaine contiennent des valeurs non nulles.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term>ADD <replaceable class="PARAMETER">contrainte de domaine</replaceable></term>
    <listitem>
     <para>
Cette forme ajoute une nouvelle contrainte à un domaine utilisant la même
syntaxe que
      <xref linkend="SQL-CREATEDOMAIN" endterm="SQL-CREATEDOMAIN-TITLE">.
Ceci fonctionnera seulement si toutes les colonnes utilisant le domaine
satisfont à la nouvelle contrainte.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term>DROP CONSTRAINT</term>
    <listitem>
     <para>
      Cette forme supprime les contraintes sur un domaine.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term>OWNER</term>
    <listitem>
     <para>
      Cette forme change le propriétaire du domaine.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   Vous devez être le propriétaire du domaine pour utiliser <command>ALTER DOMAIN</>; sauf pour
   <command>ALTER DOMAIN OWNER</>, lequel peut seulement être exécuté par
le super-utilisateur.
  </para>
 </refsect1>

 <refsect1>
  <title>Paramètres</title>

   <para>
    <variablelist>
     <varlistentry>
      <term><replaceable class="PARAMETER">nom</replaceable></term>
      <listitem>
       <para>
	Le nom d'un domaine existant à modifier.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="PARAMETER">contrainte de domaine</replaceable></term>
      <listitem>
       <para>
	Nouvelle contrainte de domaine pour le domaine.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="PARAMETER">nom de contrainte</replaceable></term>
      <listitem>
       <para>
	Nom d'une contrainte existante a supprimer.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>CASCADE</term>
      <listitem>
       <para>
        Supprime automatiquement les objets qui dépendent de la contrainte.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term>RESTRICT</term>
      <listitem>
       <para>
Refuse de supprimer la contrainte s'il y a divers objets dépendants.
Ce qui est le comportement par défaut.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="PARAMETER">nouveau propriétaire</replaceable></term>
      <listitem>
       <para>
	Le nom utilisateur du nouveau propriétaire du domaine.
       </para>
      </listitem>
     </varlistentry>

    </variablelist>
   </para>
  </refsect1>

 <refsect1>
  <title>Exemples</title>

  <para>
   Pour ajouter une contrainte NOT NULL à un domaine:
   <programlisting>
ALTER DOMAIN zipcode SET NOT NULL;
   </programlisting>
   Pour supprimer une contrainte NOT NULL d'un domaine:
   <programlisting>
ALTER DOMAIN zipcode DROP NOT NULL;
   </programlisting>
  </para>

  <para> 
   Pour ajouter une contrainte de contrôle à un domaine:
   <programlisting>
ALTER DOMAIN zipcode ADD CONSTRAINT zipchk CHECK (char_length(VALUE) = 5);
   </programlisting>
  </para>

  <para> 
   Pour supprimer une contrainte de contrôle d'un domaine:
   <programlisting>
ALTER DOMAIN zipcode DROP CONSTRAINT zipchk;
   </programlisting>
  </para>
 </refsect1>

 <refsect1>
  <title>Compatibilité</title>
    
  <para>
   La relation <command>ALTER DOMAIN</command> est compatible avec SQL99,
   sauf pour la variante <literal>OWNER</>, laquelle est une extension
   <productname>PostgreSQL</productname>.
  </para>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:"/usr/lib/sgml/catalog"
sgml-local-ecat-files:nil
End:
-->
