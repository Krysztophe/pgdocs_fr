<!--
$Header: /var/lib/cvs/pgsql-fr/sgml/ref/alter_user.sgml,v 1.8 2005/07/10 17:28:01 guillaume Exp $
PostgreSQL documentation
-->

<refentry id="SQL-ALTERUSER">
 <refmeta>
  <refentrytitle id="sql-alteruser-title">ALTER USER</refentrytitle>
  <refmiscinfo>SQL - Commandes du language</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>ALTER USER</refname>
  <refpurpose>modifie le compte d'un utilisateur de la base de données</refpurpose>
 </refnamediv>

 <indexterm zone="sql-alteruser">
  <primary>ALTER USER</primary>
 </indexterm>

 <refsynopsisdiv>
<synopsis>
ALTER USER <replaceable class="PARAMETER">nom</replaceable> [ [ WITH ] <replaceable class="PARAMETER">option</replaceable> [ ... ] ]

où <replaceable class="PARAMETER">option</replaceable> peut être&nbsp;:

    CREATEDB | NOCREATEDB
    | CREATEUSER | NOCREATEUSER 
    | [ ENCRYPTED | UNENCRYPTED ] PASSWORD '<replaceable
class="PARAMETER">mot_de_passe</replaceable>' 
    | VALID UNTIL '<replaceable class="PARAMETER">dateheure</replaceable>'

ALTER USER <replaceable class="PARAMETER">nom</replaceable> RENAME TO <replaceable>nouveaunom</replaceable>

ALTER USER <replaceable class="PARAMETER">nom</replaceable> SET <replaceable>parametre</replaceable> { TO | = } { <replaceable>valeur</replaceable> | DEFAULT }
ALTER USER <replaceable class="PARAMETER">nom</replaceable> RESET <replaceable>parametre</replaceable>
</synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>

  <para>
   <command>ALTER USER</command> change les attributs d'un compte 
   utilisateur de <productname>PostgreSQL</productname>. Les attributs non 
   mentionnés dans la commande gardent leur valeur précédente.
   </para>

  <para>
   La première variante de cette commande listée dans les synopsis change
   certains droits par utilisateur et les paramètres d'authentification.
   (Voir plus bas pour les détails.) Les super-utilisateurs des bases de
   données peuvent changer tous ces privilèges pour tout utilisateur. Les
   utilisateurs ordinaires peuvent seulement changer leur mot de passe.
  </para>

  <para>
   La deuxième variante change le nom de l'utilisateur. Seul un super-
   utilisateur peut renommer des comptes utilisateurs. L'utilisateur
   de la session actuelle ne peut être renommé. (Connectez-vous avec un autre
   utilisateur si vous avez besoin de le faire.) Comme les mots de passe
   cryptés avec <literal>MD5</> utilisent le nom de l'utilisateur en utilisant
   un élément cryptographique, renommer un utilisateur efface leur mot de passe
   <literal>MD5</>.
  </para>

  <para>
   La troisième et la quatrième variante changent les paramètres de session 
   par défaut pour une variable de configuration donnée. À chaque fois que
   l'utilisateur débute une nouvelle session, les valeurs spécifiées
   deviennent les valeurs par défaut de la session, quels que soient les 
   paramètres présents dans <filename>postgresql.conf</> ou ceux reçus
   sur la ligne de commande par le <command>postmaster</command>.
   Les utilisateurs ordinaires peuvent changer les valeurs par défaut de 
   leur propre session. Les super-utilisateurs peuvent changer les valeurs
   de session par défaut de tout le monde. Certaines variables ne peuvent pas
   être configurées de cette façon ou peuvent seulement être configurées par un
   superutilisateur.
  </para>
 </refsect1>

 <refsect1>
  <title>Paramètres</title>

    <variablelist>
     <varlistentry>
      <term><replaceable class="PARAMETER">nom</replaceable></term>
      <listitem>
       <para>
    Le nom de l'utilisateur dont les attributs doivent être modifiés.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>CREATEDB</literal></term>
      <term><literal>NOCREATEDB</literal></term>
      <listitem>
       <para>
        Ces clauses définissent la capacité d'un utilisateur à créer des bases
        de données. Si <literal>CREATEDB</literal> est spécifié, l'utilisateur
        aura le droit de créer ses propres bases de données. Utiliser
        <literal>NOCREATEDB</literal> interdira à l'utilisateur de créer des
        bases de données. (Si l'utilisateur est aussi un superutilisateur, alors
        ce paramètre n'aura aucun effet réel.)
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>CREATEUSER</literal></term>
      <term><literal>NOCREATEUSER</literal></term>
      <listitem>
       <para>
        Ces clauses déterminent si un utilisateur sera autorisé à créer de
        nouveaux utilisateurs lui-même. <literal>CREATEUSER</literal> fera
        aussi de l'utilisateur un superutilisateur, qui dépassera toutes les
        restrictions d'accès.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="PARAMETER">mot_de_passe</replaceable></term>
      <listitem>
       <para>
        Le nouveau mot de passe à utiliser pour ce compte.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>ENCRYPTED</literal></term>
      <term><literal>UNENCRYPTED</literal></term>
      <listitem>
       <para>
        Ces mots clés contrôlent si le mot de passe est stocké crypté dans
        <literal>pg_shadow</>. (Voir <xref linkend="SQL-CREATEUSER"
        endterm="SQL-CREATEUSER-title"> pour plus d'informations sur ce choix.)
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="PARAMETER">dateheure</replaceable></term>
      <listitem>
       <para>
	La date (et optionnellement l'heure) à laquelle le mot de passe de
    l'utilisateur expire. Pour indiquer que le mot de passe n'expire jamais,
    utilisez le littéral <literal>'infinity'</>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable>nouveaunom</replaceable></term>
      <listitem>
       <para>
    Le nouveau nom de l'utilisateur.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable>paramètre</replaceable></term>
      <term><replaceable>valeur</replaceable></term>
      <listitem>
       <para>
        Remet la valeur de ce paramètre de configuration de session à 
        sa valeur par défaut.
        Si <replaceable>valeur</replaceable> vaut <literal>DEFAULT</literal>
        ou <literal>RESET</literal> (les deux sont équivalents), alors la valeur
        spécifique à l'utilisateur qui était enregistrée est supprimée, donc
        l'utilisateur héritera des valeurs générales du système dans ses 
        nouvelles sessions.
        Utilisez <literal>RESET ALL</literal> pour supprimer toutes les
        valeurs enregistrées spécifiques à l'utilisateur.
       </para>

       <para>
        Voir <xref linkend="sql-set" endterm="sql-set-title"> et <xref
        linkend="runtime-config"> pour plus d'informations sur les
        valeurs possibles pour les paramètres et leurs valeurs.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
 </refsect1>

 <refsect1>
  <title>Notes</title>

  <para>
   Utilisez <xref linkend="SQL-CREATEUSER" endterm="SQL-CREATEUSER-title">
   pour ajouter de nouveaux utilisateurs, et <xref linkend="SQL-DROPUSER"
   endterm="SQL-DROPUSER-title"> pour supprimer un utilisateur.
  </para>

  <para>
   <command>ALTER USER</command> ne permet pas de changer les groupes d'un
   utilisateur.
   Utilisez <xref linkend="SQL-ALTERGROUP" endterm="SQL-ALTERGROUP-title">
   pour cela.
  </para>

  <para>
   La clause <literal>VALID UNTIL</> définit une date d'expiration pour un mot
de passe seulement, pas pour le compte utilisateur lui-même. En particulier, la
date d'expiration n'est pas requise lors de la connexion en utilisant une
méthode d'authentification par mot de passe.
  </para>

  <para>
   Il est aussi possible de lier les valeurs par défaut d'une session sur une
   base de données spécifique plutôt que sur un utilisateur&nbsp;; voir <xref
   linkend="sql-alterdatabase" endterm="sql-alterdatabase-title">. Les
   paramétrages spécifiques de l'utilisateur surchargent ceux de la base de
   données s'il y a un conflit.
  </para>
 </refsect1>

 <refsect1>
  <title>Exemples</title>

  <para>
   Changer le mot de passe d'un utilisateur&nbsp;:

<programlisting>
ALTER USER davide WITH PASSWORD 'hu8jmn3';
</programlisting>
  </para>

  <para>
   Changer la date de fin de validité du mot de passe d'un utilisateur&nbsp;:

<programlisting>
ALTER USER manuel VALID UNTIL 'Jan 31 2030';
</programlisting>
  </para>

  <para>
   Changer la date de fin de validité d'un utilisateur, 
   en indiquant que son autorisation doit expirer à midi
   le 4 mai 2005 pour le fuseau horaire <acronym>UTC</>+1&nbsp;:
<programlisting>
ALTER USER chris VALID UNTIL 'May 4 12:00:00 2005 +1';
</programlisting>
  </para>

  <para>
   Rendre un mot de passe valide indéfiniment&nbsp;:
<programlisting>
ALTER USER fred VALID UNTIL 'infinity';
</programlisting>
  </para>

  <para>
   Donner à un utilisateur le droit de créer de nouvelles bases de données
   et de nouveaux utilisateurs&nbsp;:

<programlisting>
ALTER USER miriam CREATEUSER CREATEDB;
</programlisting>
  </para>
 </refsect1>

 <refsect1>
  <title>Compatibilité</title>
    
  <para>
   La commande <command>ALTER USER</command> est une extension de
   <productname>PostgreSQL</productname>. En effet, le standard SQL laisse
   la façon de définir les utilisateurs au choix du SGBD.
  </para>
 </refsect1>

 <refsect1>
  <title>Voir aussi</title>

  <simplelist type="inline">
   <member><xref linkend="sql-createuser" endterm="sql-createuser-title"></member>
   <member><xref linkend="sql-dropuser" endterm="sql-dropuser-title"></member>
   <member><xref linkend="sql-set" endterm="sql-set-title"></member>
  </simplelist>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:"/usr/lib/sgml/catalog"
sgml-local-ecat-files:nil
End:
-->
