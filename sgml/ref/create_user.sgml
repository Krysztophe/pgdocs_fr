<!--
$Header: /var/lib/cvs/pgsql-fr/sgml/ref/create_user.sgml,v 1.8 2005/03/14 06:03:52 guillaume Exp $
PostgreSQL documentation
-->

<refentry id="SQL-CREATEUSER">
 <refmeta>
  <refentrytitle id="sql-createuser-title">CREATE USER</refentrytitle>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>CREATE USER</refname>
  <refpurpose>définit un nouveau compte utilisateur dans la base de
   données</refpurpose>
 </refnamediv>

 <indexterm zone="sql-createuser">
  <primary>CREATE USER</primary>
 </indexterm>

 <refsynopsisdiv>
<synopsis>
CREATE USER <replaceable class="PARAMETER">nom</replaceable> [ [ WITH ]
<replaceable class="PARAMETER">option</replaceable> [ ... ] ]

where <replaceable class="PARAMETER">option</replaceable> can be:
    
      SYSID <replaceable class="PARAMETER">uid</replaceable> 
    | CREATEDB | NOCREATEDB
    | CREATEUSER | NOCREATEUSER
    | IN GROUP <replaceable class="PARAMETER">nomgroupe</replaceable> [, ...]
    | [ ENCRYPTED | UNENCRYPTED ] PASSWORD '<replaceable
class="PARAMETER">mot_de_passe</replaceable>'
    | VALID UNTIL '<replaceable class="PARAMETER">temps_absolu</replaceable>' 
</synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>

  <para>
   <command>CREATE USER</command> ajoute un nouvel utilisateur dans le groupe
   de bases de données <productname>PostgreSQL</productname>.
   Référez-vous à <xref linkend="user-manag"> et <xref
   linkend="client-authentication"> pour des informations sur la gestion des
   utilisateurs et l'authentification. Vous devez être le superutilisateur de la
   base de données pour utiliser cette commande.
  </para>
 </refsect1>

 <refsect1>
  <title>Paramètres</title>

    <variablelist>
     <varlistentry>
      <term><replaceable class="parameter">nom</replaceable></term>
      <listitem>
       <para>
	Le nom du nouvel utilisateur.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">uid</replaceable></term>
      <listitem>
       <para>
        La clause <literal>SYSID</literal> peut être utilisée pour choisir
	l'identifiant du nouvel utilisateur
	<productname>PostgreSQL</productname>. Ceci n'est normalement pas
	nécessaire mais pourrait être utile si vous avez besoin de recréer le
	propriétaire d'un objet orphelin.
       </para>
       <para>
        Si ceci n'est pas spécifié, la valeur la plus haute des identifiants
	déjà créée plus un (avec un minimum de 100) sera utilisée par défaut.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>CREATEDB</></term>
      <term><literal>NOCREATEDB</></term>
      <listitem>
       <para>
	Ces clauses définissent la capacité de l'utilisateur pour créer des
	bases de données. Si <literal>CREATEDB</literal> est spécifié,
	l'utilisateur en cours de définition sera autorisé à créer ses propres
	bases de données. Utiliser <literal>NOCREATEDB</literal> interdira la
	capacité de créer des bases de données à cet utilisateur. Si cette
	clause est omise, <literal>NOCREATEDB</literal> est utilisé par défaut.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>CREATEUSER</literal></term>
      <term><literal>NOCREATEUSER</literal></term>
      <listitem>
       <para>
	Ces clauses déterminent si un utilisateur aura la permission de créer 
	des nouveaux utilisateurs lui-même. Cette option fait aussi de
	l'utilisateur un superutilisateur qui peut dépasser toutes les
	restrictions d'accès. Oublier cette clause initialisera la valeur de
	cet attribut à <literal>NOCREATEUSER</literal>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">nomgroupe</replaceable></term>
      <listitem>
       <para>
	Un nom de groupe dans lequel insérer l'utilisateur. Plusieurs noms de
	groupe peuvent être cités.
       </para>
      </listitem>
     </varlistentry>
     
     <varlistentry>
      <term><replaceable class="parameter">mot_de_passe</replaceable></term>
      <listitem>
       <para>
        Initialise le mot de passe de l'utilisateur. Si vous ne pensez pas
	utiliser l'authentification par mot de passe, vous pouvez oublier cette
	option, mais l'utilisateur ne sera pas capable ensuite de se connecter
	si vous décidez de basculer à une authentification par mot de passe. Le
	mot de passe peut être initialisé ou changé plus tard en utilisant <xref
	linkend="SQL-ALTERUSER" endterm="SQL-ALTERUSER-title">.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>ENCRYPTED</></term>
      <term><literal>UNENCRYPTED</></term>
      <listitem>
       <para>
	Ces mots clés contrôlent si le mot de passe doit être stocké crypté dans
	les catalogues système. (Si aucun des deux n'est spécifié, le
	comportement par défaut est déterminé par le paramètre de configuration
	<varname>PASSWORD_ENCRYPTION</varname>.) Si la chaîne de mot de passe
	fournie est déjà dans le format crypté MD5, alors il est stocké
	directement, que <literal>ENCRYPTED</> ou <literal>UNENCRYPTED</> soit
	founi ou non (car le système ne peut pas décrypter la chaîne de mot de
	passe cryptée). Ceci permet le rechargement des mots de passe cryptés
	lors de la sauvegarde/restauration.
       </para>

       <para>
        Notez que les anciens clients pourraient ne pas disposer des
	mécanismes d'authentification MD5 nécessaires pour travailler avec des
	mots de passe stockés en cryptés.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">temps_absolu</replaceable></term>
      <listitem>
       <para>
	La clause <literal>VALID UNTIL</literal> initialise le temps absolu
	après lequel le mot de passe de l'utilisateur n'est plus valide. Si
	cette clause est omise, le mot de passe sera valide en permanence.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
 </refsect1> 

 <refsect1>
  <title>Notes</title>

  <para>
   Utilisez <xref linkend="SQL-ALTERUSER" endterm="SQL-ALTERUSER-title"> pour
   changer les attributs d'un utilisateur, et <xref linkend="SQL-DROPUSER"
   endterm="SQL-DROPUSER-title"> pour le supprimer. Utilisez <xref
   linkend="SQL-ALTERGROUP" endterm="SQL-ALTERGROUP-title"> pour ajouter
   l'utilisateur aux groupes ou supprimer cet utilisateur de ces groupes.
  </para>

  <para>
   <productname>PostgreSQL</productname> inclut un programme <xref
   linkend="APP-CREATEUSER" endterm="APP-CREATEUSER-title"> qui a les mêmes
   fonctionnalités que <command>CREATE USER</command> (en fait, il appelle cette
   commande) mais peut être lancé à partir du shell.
  </para>

  <para>
   La clause <literal>VALID UNTIL</> définit une date d'expiration pour un mot
   de passe seulement, pas pour le compte utilisateur en lui-même. En
   particulier, la date d'expiration n'est pas obligatoire lors d'une connexion
   avec une méthode d'authentification non basée sur un mot de passe.
  </para>
 </refsect1>

 <refsect1>
  <title>Exemples</title>

  <para>
   Créez un utilisateur sans mot de passe&nbsp;:
<programlisting>
CREATE USER jonathan;
</programlisting>
  </para>

  <para>
   Créez un utilisateur avec un mot de passe&nbsp;:
<programlisting>
CREATE USER davide WITH PASSWORD 'jw8s0F4';
</programlisting>
  </para>

  <para>
   Créez un utilisateur avec un mot de passe qui est valide jusqu'à la fin 2004.
   Après une seconde dans 2005, le mot de passe n'est plus valide.

<programlisting>
CREATE USER miriam WITH PASSWORD 'jw8s0F4' VALID UNTIL '2005-01-01';
</programlisting>
  </para>

  <para> 
   Créez un compte où l'utilisateur peut créer des bases de données&nbsp;:
<programlisting>
CREATE USER manuel WITH PASSWORD 'jw8s0F4' CREATEDB;
</programlisting>
  </para>
 </refsect1>
 
 <refsect1>
  <title>Compatibilité</title>
  
  <para>
   L'instruction <command>CREATE USER</command> est une extension
   <productname>PostgreSQL</productname>. Le standard SQL laisse la définition
   des utilisateurs à l'implémentation.
  </para>
 </refsect1>

 <refsect1>
  <title>Voir aussi</title>

  <simplelist type="inline">
   <member><xref linkend="sql-alteruser" endterm="sql-alteruser-title"></member>
   <member><xref linkend="sql-dropuser" endterm="sql-dropuser-title"></member>
   <member><xref linkend="app-createuser"></member>
  </simplelist>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:"/usr/lib/sgml/catalog"
sgml-local-ecat-files:nil
End:
-->
