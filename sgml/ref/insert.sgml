<!--
$Header: /var/lib/cvs/pgsql-fr/sgml/ref/insert.sgml,v 1.7.2.1 2005/03/14 06:03:02 guillaume Exp $
PostgreSQL documentation
-->

<refentry id="SQL-INSERT">
 <refmeta>
  <refentrytitle id="SQL-INSERT-TITLE">INSERT</refentrytitle>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>INSERT</refname>
  <refpurpose>crée de nouvelles lignes dans une table</refpurpose>
 </refnamediv>

 <indexterm zone="sql-insert">
  <primary>INSERT</primary>
 </indexterm>

 <refsynopsisdiv>
<synopsis>
INSERT INTO <replaceable class="PARAMETER">table</replaceable> [ ( <replaceable
class="PARAMETER">colonne</replaceable> [, ...] ) ]
    { DEFAULT VALUES | VALUES ( { <replaceable
class="PARAMETER">expression</replaceable> | DEFAULT } [, ...] ) | <replaceable
class="PARAMETER">requête</replaceable> }
</synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>

  <para>
   <command>INSERT</command> permet d'insérer de nouvelles lignes dans une
   table. Il est possible d'insérer une ligne à la fois ou plusieurs lignes
   comme résultat d'une requête.
  </para>

  <para>
   Les colonnes de la liste cible peuvent être données dans n'importe quel
   ordre. Chaque colonne absente de la liste cible sera insérée en utilisant une
   valeur par défaut, que sa valeur par défaut soit déclarée ou NULL.
  </para>

  <para>
   Si l'expression pour chaque colonne n'est pas du bon type de données, la
   conversion automatique de type sera tentée.
  </para>

  <para>
   Vous devez avoir le droit <literal>INSERT</literal> sur une table pour
   pouvoir lui insérer des lignes. Si vous utilisez la clause <replaceable
   class="PARAMETER">requête</replaceable> pour insérer des lignes à partir
   d'une requête, vous avez aussi besoin d'avoir un droit
   <literal>SELECT</literal> sur toute table utilisée dans la requête.
  </para>
 </refsect1>

 <refsect1>
  <title>Paramètres</title>

  <variablelist>
   <varlistentry>
    <term><replaceable class="PARAMETER">table</replaceable></term>
    <listitem>
     <para>
      Le nom d'une table existante (pouvant être qualifié du nom du schéma).
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="PARAMETER">colonne</replaceable></term>
    <listitem>
     <para>
      Le nom d'une colonne dans <replaceable
      class="PARAMETER">table</replaceable>.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><literal>DEFAULT VALUES</literal></term>
    <listitem>
     <para>
      Toutes les colonnes auront leur valeurs par défaut.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="PARAMETER">expression</replaceable></term>
    <listitem>
     <para>
      Une expression ou une valeur à affecter à <replaceable
      class="PARAMETER">colonne</replaceable>.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><literal>DEFAULT</literal></term>
    <listitem>
     <para>
      La colonne sera remplie avec sa valeur par défaut.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="PARAMETER">requête</replaceable></term>
    <listitem>
     <para>
      Une requête (instruction <command>SELECT</command>) fournissant les
      lignes à insérer. Référez-vous à l'instruction <command>SELECT</command>
      pour une description de la syntaxe.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>

 <refsect1>
  <title>Sorties</title>

  <para>
   En cas de succès, une commande <command>INSERT</> renvoit un code de la forme
<screen>
INSERT <replaceable>oid</replaceable> <replaceable
class="parameter">nombre</replaceable>
</screen>
   Le <replaceable class="parameter">nombre</replaceable> correspond au nombre
   de lignes insérées. Si <replaceable class="parameter">nombre</replaceable>
   vaut exactement un et que la table cible contient des OID, alors <replaceable
   class="parameter">oid</replaceable> est l'<acronym>OID</acronym> affecté à la
   ligne insérée. Sinon, <replaceable class="parameter">oid</replaceable> vaut
   zéro.
  </para>
 </refsect1>

 <refsect1>
  <title>Exemples</title>

  <para>
   Insérez une seule ligne dans la table <literal>films</literal>&nbsp;:

<programlisting>
INSERT INTO films VALUES
    ('UA502', 'Bananas', 105, '1971-07-13', 'Comédie', '82 minutes');
</programlisting>
  </para>

  <para>
   Dans ce second exemple, la dernière colonne <literal>longueur</literal> est
   omise et, du coup, elle aura la valeur par défaut, NULL&nbsp;:

<programlisting>
INSERT INTO films (code, titre, did, date_prod, genre)
    VALUES ('T_601', 'Yojimbo', 106, '1961-06-16', 'Drame');
</programlisting>
  </para>

  <para>
   Le troisième exemple utilise la clause <literal>DEFAULT</literal> pour les
   colonnes date plutôt que de spécifier une valeur&nbsp;:

<programlisting>
INSERT INTO films VALUES
    ('UA502', 'Bananas', 105, DEFAULT, 'Comédie', '82 minutes');
INSERT INTO films (code, title, did, date_prod, kind)
    VALUES ('T_601', 'Yojimbo', 106, DEFAULT, 'Drame');
</programlisting>
  </para>

  <para>
   Cet exemple insère plusieurs lignes dans la table
   <literal>films</literal> à partir de la table table
   <literal>tmp</literal>&nbsp;:

<programlisting>
INSERT INTO films SELECT * FROM tmp;
</programlisting>
  </para>

  <para>
   Cet exemple insére dans des colonnes de type tableau&nbsp;:

<programlisting>
-- Create an empty 3x3 gameboard for noughts-and-crosses
-- (all of these commands create the same board)
INSERT INTO tictactoe (game, board[1:3][1:3])
    VALUES (1,'{{"","",""},{},{"",""}}');
INSERT INTO tictactoe (game, board[3][3])
    VALUES (2,'{}');
INSERT INTO tictactoe (game, board)
    VALUES (3,'{{,,},{,,},{,,}}');
</programlisting>
  </para>
 </refsect1>

 <refsect1>
  <title>Compatibilité</title>

  <para>
   <command>INSERT</command> est totalement compatible avec le standard SQL.
   Les limitations possibles des clauses <replaceable
   class="PARAMETER">requête</replaceable> sont documentées sous <xref
   linkend="sql-select" endterm="sql-select-title">.
  </para>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:"/usr/lib/sgml/catalog"
sgml-local-ecat-files:nil
End:
-->
