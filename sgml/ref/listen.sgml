<!--
$Header: /var/lib/cvs/pgsql-fr/sgml/ref/listen.sgml,v 1.9 2005/06/07 20:38:00 guillaume Exp $
PostgreSQL documentation
-->

<refentry id="SQL-LISTEN">
 <refmeta>
  <refentrytitle id="SQL-LISTEN-TITLE">LISTEN</refentrytitle>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>LISTEN</refname>
  <refpurpose>écoute une notification</refpurpose>
 </refnamediv>

 <indexterm zone="sql-listen">
  <primary>LISTEN</primary>
 </indexterm>

 <refsynopsisdiv>
<synopsis>
LISTEN <replaceable class="PARAMETER">nom</replaceable>
</synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>

  <para>
   <command>LISTEN</command> enregistre la session courante comme étant 
   en attente d'une condition de notification <replaceable
   class="PARAMETER">nom</replaceable>. Si la session courante est déjà
   enregistrée comme étant en écoute de cette condition de notification,
   rien n'est fait.
  </para>

  <para>
   Quand la commande <command>NOTIFY <replaceable
   class="PARAMETER">nom</replaceable></command> est appelée, soit par cette
   session soit par une autre connectée à la même base de données, toutes les
   sessions en cours d'écoute de cette condition de notification sont notifiées
   et chacune pourra notifier en retour son application cliente connectée. Voir
   la discussion de <command>NOTIFY</command> pour plus d'informations.
  </para>

  <para>
   Une condition de notification donnée peut être effecée pour une session avec
   la commande <command>UNLISTEN</command>. Les enregistrements d'écoute d'une
   session sont automatiquement effacés lorsque la session se termine.
  </para>

  <para>
   La méthode qu'une application client doit utiliser pour détecter des
   événements de notification dépend de l'interface de programmation
   <productname>PostgreSQL</productname> qu'elle utilise. Avec la bibliothèque
   <application>libpq</>, l'application exécute <command>LISTEN</command> comme
   une commande SQL ordinaire, puis doit appeler périodiquement la fonction
   <function>PQnotifies</function> pour savoir quels événements de
   notification ont été reçus. Les autres interfaces, comme
   <application>libpgtcl</>, fournissent des méthodes de plus haut niveau pour
   gérer les événements de notification&nbsp;; en fait, avec
   <application>libpgtcl</>, le développeur de l'application ne devrait même pas
   lancer <command>LISTEN</command> ou <command>UNLISTEN</command> directement.
   Voir la documentation de l'interface que vous utilisez pour plus de détails.
  </para>

  <para>
   <xref linkend="sql-notify" endterm="sql-notify-title"> contient une
   discussion plus détaillée sur l'utilisation de <command>LISTEN</command> et
   <command>NOTIFY</command>.
  </para>
 </refsect1>

 <refsect1>
  <title>Paramètres</title>

  <variablelist>
   <varlistentry>
    <term><replaceable class="PARAMETER">nom</replaceable></term>
    <listitem>
     <para>
      Nom d'une condition de notification (tout identifiant).
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>

 <refsect1>
  <title>Exemples</title>

  <para>
   Configure et exécute une séquence listen/notify à partir de
   <application>psql</application>&nbsp;:

<programlisting>
LISTEN virtual;
NOTIFY virtual;
Asynchronous notification "virtual" received from server process with PID 8448.
</programlisting>
  </para>
 </refsect1>

 <refsect1>
  <title>Compatibilité</title>

  <para>
   Il n'existe pas d'instruction <command>LISTEN</command> dans le standard SQL.
  </para>
 </refsect1>

 <refsect1>
  <title>Voir aussi</title>

  <simplelist type="inline">
   <member><xref linkend="sql-notify" endterm="sql-notify-title"></member>
   <member><xref linkend="sql-unlisten" endterm="sql-unlisten-title"></member>
  </simplelist>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:"/usr/lib/sgml/catalog"
sgml-local-ecat-files:nil
End:
-->
