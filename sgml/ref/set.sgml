<!--
$Header: /var/lib/cvs/pgsql-fr/sgml/ref/set.sgml,v 1.8 2005/04/22 06:38:58 guillaume Exp $
PostgreSQL documentation
-->

<refentry id="SQL-SET">
 <refmeta>
  <refentrytitle id="SQL-SET-TITLE">SET</refentrytitle>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>SET</refname>
  <refpurpose>change un paramètre d'exécution</refpurpose>
 </refnamediv>

 <indexterm zone="sql-set">
  <primary>SET</primary>
 </indexterm>

 <refsynopsisdiv>
<synopsis>
SET [ SESSION | LOCAL ] <replaceable class="PARAMETER">nom</replaceable> { TO | = } { <replaceable class="PARAMETER">valeur</replaceable> | '<replaceable class="PARAMETER">valeur</replaceable>' | DEFAULT }
SET [ SESSION | LOCAL ] TIME ZONE { <replaceable class="PARAMETER">fuseau-horaire</replaceable> | LOCAL | DEFAULT }
</synopsis>
 </refsynopsisdiv>
 
 <refsect1>
  <title>Description</title>

  <para>
   La commande <command>SET</command> change des paramètres
   d'exécution. Beaucoup des paramètres d'exécution listés dans
   <xref linkend="runtime-config"> peuvent être changés à la volée
   avec la commande <command>SET</command>.
   (Mais certains nécessitent d'être un superutilisateur pour les
   changer, et d'autres ne peuvent être changés après le démarrage
   du serveur ou de la session.)
   <command>SET</command> ne modifie que les paramètres utilisés par 
   la session courante.
  </para>

  <para>
   Si <command>SET</command> ou <command>SET SESSION</command> sont
   utilisés dans une transaction qui est ensuite abandonnée, les effets de la
   commande <command>SET</command> disparaissent lorsque la transaction est
   annulée. (Ce comportement a changé par rapport aux versions antérieures
   à la 7.3, pour lesquelles les effets de la commande <command>SET</command>
   n'étaient pas annulés dans ce cas.)
   Une fois que la transaction englobant la commande est validée, les
   effets de la commande persistent jusqu'à la fin de la session, à moins
   qu'ils ne soient annulés par une autre commande <command>SET</command>.
  </para>

  <para>
   Les effets de <command>SET LOCAL</command> ne durent que jusqu'à la fin 
   de la transaction en cours, qu'elle soit validée ou non.
   Dans le cas particulier d'une commande <command>SET</command> suivie
   par <command>SET LOCAL</command> dans une même transaction, la valeur de
   <command>SET LOCAL</command> est utilisée jusqu'à la fin de la transaction,
   et celle de <command>SET</command> prend effet ensuite (si la 
   transaction est validée).
  </para>
 </refsect1>

 <refsect1>
  <title>Paramètres</title>

  <variablelist>
   <varlistentry>
    <term><literal>SESSION</></term>
    <listitem>
     <para>
      Indique que la commande prend effet pour la session courante.
      C'est la valeur par défaut si ni <literal>SESSION</> ni
      <literal>LOCAL</> n'apparaissent.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><literal>LOCAL</></term>
    <listitem>
     <para>
      Indique que la commande n'est effective que pour la transaction
      courante. Après <command>COMMIT</>ou <command>ROLLBACK</>,
      la valeur utilisée pour la session redevient effective.
      Notez qu'une commande <command>SET LOCAL</> semble sans effet si
      elle est exécutée en dehors d'un bloc <command>BEGIN</> car la 
      transaction prend immédiatement fin.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="PARAMETER">nom</replaceable></term>
    <listitem>
     <para>
      Nom d'un paramètre ajustable pendant l'exécution.
      La liste des paramètres disponibles est documentée dans 
      <xref linkend="runtime-config"> et ci-dessous.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="PARAMETER">valeur</replaceable></term>
    <listitem>
     <para>
      Nouvelle valeur du paramètre. Les valeurs peuvent être indiquées
      sous forme de constantes de chaîne, d'identifiants, de nombres ou
      de listes de ceux-ci, séparés par des virgules.
      <literal>DEFAULT</literal> peut être utilisé pour remettre le
      paramètre à sa valeur par défaut.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   En plus des paramètres de configuration documentés dans <xref
   linkend="runtime-config">, il y en a quelques autres qui ne peuvent
   être utilisés qu'avec la commande <command>SET</command> ou qui
   ont une syntaxe spéciale.

   <variablelist>
    <varlistentry>
     <term><literal>NAMES</literal></term>
     <listitem>
      <para>
       <literal>SET NAMES <replaceable>valeur</></> est un équivalent de
       <literal>SET client_encoding TO <replaceable>valeur</></>.
      </para>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term><literal>SEED</literal></term>
     <listitem>
      <para>
       Donne une valeur initiale au générateur de nombres aléatoires
       (la fonction <function>random</function>).
       Les valeurs autorisées sont des nombres à virgule flottante entre
       0 et 1, qui sont ensuite multipliés par 2<superscript>31</>-1.
      </para>

      <para>
       Le générateur de nombres aléatoires peut aussi être initialisé en
       appelant la fonction <function>setseed</function>&nbsp;:
<programlisting>
SELECT setseed(<replaceable>valeur</replaceable>);
</programlisting>
      </para>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term><literal>TIME ZONE</literal></term>
     <listitem>
      <para>
       <literal>SET TIME ZONE <replaceable>valeur</></> est équivalent à
       <literal>SET timezone TO <replaceable>valeur</></>.
       La syntaxe <literal>SET TIME ZONE</literal> permet d'utiliser une
       syntaxe spéciale pour indiquer le fuseau horaire.
       Voici des exemples de valeurs valides&nbsp;:

       <variablelist>
        <varlistentry>
         <term><literal>'PST8PDT'</literal></term>
         <listitem>
          <para>
           Le fuseau horaire de Berkeley, Californie.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><literal>'Europe/Rome'</literal></term>
         <listitem>
          <para>
           Le fuseau horaire de l'Italie.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><literal>-7</literal></term>
         <listitem>
          <para>
           Le fuseau horaire situé 7 heures à l'ouest de l'UTC (équivalent 
           à PDT). Les valeurs positives sont à l'est de l'UTC.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><literal>INTERVAL '-08:00' HOUR TO MINUTE</literal></term>
         <listitem>
          <para>
           Le fuseau horaire situé 8 heures à l'ouest de l'UTC (équivalent 
           à PST).
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><literal>LOCAL</literal></term>
         <term><literal>DEFAULT</literal></term>
         <listitem>
          <para>
           Utilise le fuseau horaire local (celui du système d'exploitation
           du serveur).
          </para>
         </listitem>
        </varlistentry>
       </variablelist>

       Voir <xref linkend="datatype-datetime"> pour de plus amples
       informations sur les fuseaux horaires. De même, <xref
       linkend="datetime-appendix"> a une liste des noms reconnus pour les
       fuseaux horaires.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </para>
 </refsect1>

 <refsect1>
  <title>Notes</title>

  <para>
   La fonction <function>set_config</function> propose des fonctionnalités
   équivalentes. Voir <xref linkend="functions-admin">.
  </para>
 </refsect1>
 
 <refsect1>
  <title>Exemples</title>

  <para>
   Mettre à jour le chemin de recherche&nbsp;:
<programlisting>
SET search_path TO my_schema, public;
</programlisting>
  </para>

  <para>
   Utiliser le style de date traditionnel 
   <productname>POSTGRES</productname> avec comme convention de saisie
   <quote>les jours avant les mois</quote>&nbsp;:
<screen>
SET datestyle TO postgres, dmy;
</screen>
  </para>

  <para>
   Utiliser le fuseau horaire de Berkeley, Californie&nbsp;:
<screen>
SET TIME ZONE 'PST8PDT';
</screen>
  </para>

  <para>
   Utiliser le fuseau horaire de l'Italie&nbsp;:
<screen>
SET TIME ZONE 'Europe/Rome';
</screen>
  </para>
 </refsect1>

 <refsect1>
  <title>Compatibilité</title>

  <para>
   <literal>SET TIME ZONE</literal> étend la syntaxe définie dans le standard
   SQL. Le standard ne permet que des fuseaux horaires numériques alors que
   <productname>PostgreSQL</productname> est plus souple dans les syntaxes 
   acceptées.
   Toutes les autre fonctionnalités de <literal>SET</literal> sont des 
   extensions de <productname>PostgreSQL</productname>.
  </para>
 </refsect1>

 <refsect1>
  <title>Voir aussi</title>

  <simplelist type="inline">
   <member><xref linkend="SQL-RESET" endterm="SQL-RESET-title"></member>
   <member><xref linkend="SQL-SHOW" endterm="SQL-SHOW-title"></member>
  </simplelist>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode:sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:("/usr/lib/sgml/catalog")
sgml-local-ecat-files:nil
End:
-->

