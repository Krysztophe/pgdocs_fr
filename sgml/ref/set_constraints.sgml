<!-- $Header: /var/lib/cvs/pgsql-fr/sgml/ref/set_constraints.sgml,v 1.7 2005/03/14 06:03:53 guillaume Exp $ -->
<refentry id="SQL-SET-CONSTRAINTS">
 <refmeta>
  <refentrytitle id="SQL-SET-CONSTRAINTS-title">SET CONSTRAINTS</refentrytitle>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>SET CONSTRAINTS</refname>
  <refpurpose>initialise le mode de contrainte de la transaction en
   cours</refpurpose>
 </refnamediv>

 <indexterm zone="sql-set-constraints">
  <primary>SET CONSTRAINTS</primary>
 </indexterm>

 <refsynopsisdiv>
<synopsis>
SET CONSTRAINTS { ALL | <replaceable class="parameter">nom</replaceable> [, ...]
} { DEFERRED | IMMEDIATE }
</synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>

  <para>
   <command>SET CONSTRAINTS</command> initialise le comportement de la
   vérification de la constrainte dans la transaction en cours.
   Les contraintes <literal>IMMEDIATE</literal> sont vérifiées à la fin de
   chaque instruction. Les contraintes <literal>DEFERRED</literal> ne sont
   vérifiées qu'à la validation de la transaction. Chaque contrainte a son
   propre mode <literal>IMMEDIATE</literal> ou <literal>DEFERRED</literal>.
  </para>

  <para>
   À la création, une contrainte se voit donnée une des trois
   caractérisitiques&nbsp;: <literal>DEFERRABLE INITIALLY DEFERRED</literal>,
   <literal>DEFERRABLE INITIALLY IMMEDIATE</literal> ou
   <literal>NOT DEFERRABLE</literal>. La troisième classe est toujours
   <literal>IMMEDIATE</literal> et n'est pas affectée par la commande
   <command>SET CONSTRAINTS</command>. Les deux premières classes commencent
   chaque transaction dans le mode indiqué mais leur comportement peut changer à
   l'intérieur d'une transaction par <command>SET CONSTRAINTS</command>.
  </para>

  <para>
   <command>SET CONSTRAINTS</command> avec une liste de noms de constraintes
   modifie le mode de ces contraintes (qui doivent toutes être déferrables).
   S'il existe plusieurs constraintes correspondant à un nom donné, elles sont
   toutes affectées. <command>SET CONSTRAINTS ALL</command> modifie le mode de
   toutes les constaintes déferrables.
  </para>

  <para>
   Lorsque <command>SET CONSTRAINTS</command> modifie le mode d'une contrainte
   de <literal>DEFERRED</literal> à <literal>IMMEDIATE</literal>, le nouveau
   mode prend effet rétroactivement&nbsp;:: toute modification de données qui
   aurait été vérifiée à la fin de la transaction est en fait vérifiée lors de
   l'exécution de la commande <command>SET CONSTRAINTS</command>. Si une
   contrainte est violée, la commande <command>SET CONSTRAINTS</command> échoue
   (et ne change pas le mode de contrainte). Du coup, <command>SET
   CONSTRAINTS</command> peut être utilisé pour forcer la vérification de
   contraintes à un point spécifique d'une transaction.
  </para>

  <para>
   Actuellement, seules les contraintes de clés étrangères sont affectées
   par ce paramètrage. Les contraintes de vérification et les contraintes
   uniques sont toujours immédiates.
  </para>
 </refsect1>

 <refsect1>
  <title>Notes</title>

  <para>
   Cette commande altère seulement le comportement des contraintes à l'intérieur
   de la transaction en cours. Du coup, si vous exécutez cette commande en
   dehors d'un bloc de transaction (pair
   <command>BEGIN</command>/<command>COMMIT</command>), il ne semblera pas avoir
   d'effets.
  </para>
 </refsect1>

 <refsect1>
  <title>Compatibilité</title>

  <para>
   Cette commande est compatible avec le comportement défini par le standard SQL
   sauf en ce qui concerne la limitation. Dans 
   <productname>PostgreSQL</productname>, il s'applique uniquement aux
   contraintes de clés étrangères.
  </para>

  <para>
   Le standard SQL indique que les noms de contraintes apparaissant dans
   <command>SET CONSTRAINTS</command> peut être qualifiés avec le nom du
   schéma. Ceci n'est pas encore supporté par
   <productname>PostgreSQL</productname>&nbsp;: les noms ne doivent pas être
   qualifiés et toutes les contraintes correspondant à la commande seront
   affectées quelque soit le schéma où ils se trouvent.
  </para>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode:sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:("/usr/lib/sgml/catalog")
sgml-local-ecat-files:nil
End:
-->
