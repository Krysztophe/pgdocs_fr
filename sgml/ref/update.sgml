<!--
$Header: /var/lib/cvs/pgsql-fr/sgml/ref/update.sgml,v 1.7.2.1 2005/03/14 06:03:04 guillaume Exp $
PostgreSQL documentation
-->

<refentry id="SQL-UPDATE">
 <refmeta>
  <refentrytitle id="SQL-UPDATE-TITLE">UPDATE</refentrytitle>
  <refmiscinfo>SQL - Instructions du langage</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>UPDATE</refname>
  <refpurpose>met à jour les lignes d'une table</refpurpose>
 </refnamediv>

 <indexterm zone="sql-update">
  <primary>UPDATE</primary>
 </indexterm>

 <refsynopsisdiv>
<synopsis>
UPDATE [ ONLY ] <replaceable class="PARAMETER">table</replaceable> SET
<replaceable class="PARAMETER">colonne</replaceable> = { <replaceable
class="PARAMETER">expression</replaceable> | DEFAULT } [, ...]
    [ FROM <replaceable class="PARAMETER">liste_from</replaceable> ]
    [ WHERE <replaceable class="PARAMETER">condition</replaceable> ]
</synopsis>
 </refsynopsisdiv>

 <refsect1>
  <title>Description</title>

  <para>
   <command>UPDATE</command> modifie les valeurs des colonnes spécifiées dans
   toutes les lignes pour satisfaire la condition. Seules les colonnes à
   modifier doivent être mentionnées dans l'instruction&nbsp;; les colonnes ne
   peuvent pas récupérer leur précédentes valeurs avec <literal>SET</>.
  </para>

  <para>
   Par défaut, <command>UPDATE</command> mettra à jour les lignes de la table
   spécifiée et toutes ses sous-tables. Si vous souhaitez ne mettre à jour que
   la table spécifique mentionnée, vous pouvez utiliser la clause
   <literal>ONLY</>.
  </para>

  <para>
   Vous devez avoir le droit <literal>UPDATE</literal> sur la table pour
   la mettre à jour, ainsi que le droit <literal>SELECT</literal> sur toutes les
   tables dont les valeurs sont lues dans <replaceable
   class="parameter">expression</replaceable> ou <replaceable
   class="parameter">condition</replaceable>.
  </para>
 </refsect1>

 <refsect1>
  <title>Paramètres</title>

  <variablelist>
   <varlistentry>
    <term><replaceable class="PARAMETER">table</replaceable></term>
    <listitem>
     <para>
      Le nom de la table à mettre à jour (pouvant être qualifié du nom du
      schéma).
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="PARAMETER">colonne</replaceable></term>
    <listitem>
     <para>
      Le nom d'une colonne dans <replaceable
      class="PARAMETER">table</replaceable>.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="PARAMETER">expression</replaceable></term>
    <listitem>
     <para>
      Une expression à affecter à la colonne. L'expression pourrait utiliser
      les anciennes valeurs de cette colonne et des autres dans la table.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><literal>DEFAULT</literal></term>
    <listitem>
     <para>
      Initialise sa colonne à la valeur par défaut (qui sera NULL si aucune
      expression spécifique par défaut ne lui a été affectée).
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="PARAMETER">liste_from</replaceable></term>
    <listitem>
     <para>
      Une liste d'expressions de table, permettant aux colonnes des autres
      tables d'apparaître dans la condition <literal>WHERE</> et les
      expressions de mise à jour.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><replaceable class="PARAMETER">condition</replaceable></term>
    <listitem>
     <para>
      Une expression qui renvoie une valeur de type <type>boolean</type>.
      Seules les lignes pour lesquelles cette expression renvoie
      <literal>true</> seront mises à jour.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>

 <refsect1>
  <title>Sorties</title>

  <para>
   En cas de succès, une commande <command>UPDATE</> renvoie une balise
   commande de la forme
<screen>
UPDATE <replaceable class="parameter">total</replaceable>
</screen>
   Le <replaceable class="parameter">total</replaceable> est le nombre de
   lignes mises à jour. Si <replaceable class="parameter">total</replaceable>
   vaut 0, aucune ligne ne correspond à <replaceable
   class="parameter">condition</replaceable> (ceci n'est pas considéré comme une
   erreur).
  </para>
 </refsect1>

 <refsect1>
  <title>Exemples</title>

  <para>
   Modifiez le mot <literal>Drame</> en <literal>Dramatique</> dans la colonne
   <structfield>genre</> de la table <literal>films</literal>&nbsp;:

<programlisting>
UPDATE films SET genre = 'Dramatique' WHERE genre = 'Drame';
</programlisting>
  </para>

  <para>
   Ajustez les entrées de température et réinitialisez la précipitation à sa
   valeur par défaut en une ligne de la table <literal>temps</literal>&nbsp;:

<programlisting>
UPDATE temps SET temp_basse = temp_basse+1, temp_haute = temp_basse+15, prcp =
DEFAULT
  WHERE ville = 'San Francisco' AND date = '2003-07-03';
</programlisting>
  </para>

 </refsect1>

 <refsect1>
  <title>Compatibilité</title>

  <para>
   Cette commande est conforme au standard SQL. La clause
   <literal>FROM</literal> est une extension
   <productname>PostgreSQL</productname>.
  </para>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:"/usr/lib/sgml/catalog"
sgml-local-ecat-files:nil
End:
-->
